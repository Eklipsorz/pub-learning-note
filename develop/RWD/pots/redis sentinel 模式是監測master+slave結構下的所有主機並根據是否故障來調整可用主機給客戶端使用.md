## æè¿°

å¼•ç”¨[[@wujiannanRedisSentinelJianJieYuBuShu]]æ‰€æè¿°ï¼š
> ä¸»å¾æ¨¡å¼å¯¦ç¾äº†è®€å¯«åˆ†é›¢ï¼Œä¸¦è§£æ±ºäº†æ•¸æ“šå‚™ä»½å’Œå–®ä¸€æ¨¡å¼å¯èƒ½å¼•ç™¼çš„æ•ˆèƒ½å•é¡Œï¼Œä½†å…¶åœ¨ä½¿ç”¨ä¸Šä¹Ÿæœ‰ä¸ä¾¿ä¹‹è™•ã€‚å› ç‚ºå®¢æˆ¶ç«¯é€£æ¥åˆ°ä¸åŒçš„Â redis instanceÂ æ™‚ï¼Œéƒ½å¾—è¦æŒ‡å®šIPç«¯å£ï¼Œè‹¥æ‰€é€£æ¥çš„Â instanceÂ æ•…éšœä¸‹ç·šäº†ï¼Œä¸»å¾æ¨¡å¼ç„¡æ³•é€šçŸ¥å®¢æˆ¶ç«¯åˆ‡æ›åˆ°å¦ä¸€å€‹å¯ç”¨çš„Â instanceï¼Œåªèƒ½é æ‰‹å‹•å»ä¿®æ”¹é…ç½®ä¸¦é‡æ–°å–å¾—æ–°çš„é€£ç·šã€‚è‹¥æ˜¯æ•…éšœçš„æ˜¯ä¸»ç¯€é»ï¼Œæ‰€æœ‰çš„å¾ç¯€é»æœƒå› ç‚ºæ²’æœ‰ä¸»ç¯€é»è€ŒåŒæ­¥ä¸­æ–·ï¼Œé€²è€Œè®Šæˆå„è‡ªç¨ç«‹çš„ç¯€é»ï¼Œå³æ•´å€‹å¢é›†ç„¡æ•ˆï¼Œç›´è‡³æ‰‹å‹•ä¿®æ”¹é…ç½®æˆ–æ˜¯é‡å•Ÿä¸»ç¯€é»ã€‚

![](https://www.tpisoftware.com/tpu/File/html/202009/20200918141416/images/20200917173700.png)

> å“¨å…µæ¨¡å¼ä¸»è¦åŸ·è¡Œä»¥ä¸‹å››å€‹ä»»å‹™:
> 1.Â Monitoring: sentinelÂ æœƒæŒçºŒåœ°å®šæœŸæª¢æŸ¥ä¸»å¾ç¯€é»æ˜¯å¦æ­£å¸¸é‹ä½œ
> 2.Â Notification:Â ç•¶è¢«ç›£æ§çš„ç¯€é»æœå‹™å‡ºç¾å•é¡Œæ™‚ï¼ŒsentinelÂ æœƒé€éÂ APIÂ å‘ç®¡ç†è€…æˆ–å…¶ä»–ç›¸é—œæ‡‰ç”¨ç¨‹åºç™¼é€é€šçŸ¥
> 3.Â Automatic failover:Â ç•¶ä¸»ç¯€é»æœªå¦‚æœŸå·¥ä½œæˆ–ç„¡æ³•æ­£å¸¸æœå‹™æ™‚ï¼ŒsentinelÂ æœƒå°‡å¤±æ•ˆä¸»ç¯€é»ä¸‹çš„å…¶ä¸­ä¸€å€‹å¾ç¯€é»æ¨é¸ç‚ºæ–°çš„ä¸»ç¯€é»ï¼Œä¸¦è¨­å®šå…¶ä»–å¾ç¯€é»ä½¿ç”¨æ–°çš„ä¸»ç¯€é»
> 4.Â Configuration provider:Â ç‚ºå®¢æˆ¶ç«¯æä¾›Â service discoveryï¼Œå®¢æˆ¶ç«¯å¯ä»¥é€éÂ sentinelÂ å–å¾—ä¸»ç¯€é»çš„é€£ç·šè³‡è¨Šï¼ŒåŒ…æ‹¬æ•…éšœè½‰ç§»å¾Œæ–°çš„ä¸»ç¯€é»ä½å€

é‡é»ï¼š
- sentinel æ˜¯ä»¥master/slaveç‚ºåŸºç¤ä¾†è§£æ±ºå…¶å•é¡Œ-è‡ªå‹•ç›£æ¸¬å“ªäº›ä¸»æ©Ÿå·²ç¶“æ•…éšœä¸¦è©¦è‘—å°‡å¯ç”¨çš„ä¸»æ©Ÿæ›¿ä»£æ•…éšœä¸»æ©Ÿä¸¦åˆ†é…çµ¦å®¢æˆ¶ç«¯ä½¿ç”¨ï¼ŒåŒ…å«masterä¸»æ©Ÿã€slaveä¸»æ©Ÿï¼š
	- è‹¥masterä¸»æ©Ÿå£æ‰çš„è©±ï¼Œsentinel çµ„é„§å¾åŸæœ¬masterä¸»æ©Ÿä¸‹çš„slaveä¸»æ©Ÿæ‰¾åˆ°å¯ç”¨çš„ä¸»æ©Ÿä¾†æ›¿ä»£masterä¸»æ©Ÿï¼Œä¸¦ç”±å‰©ä¸‹çš„slaveä¸»æ©Ÿä¾†æ“”ä»»æ–°masterä¸»æ©Ÿçš„slaveä¸»æ©Ÿ
	- è‹¥slaveä¸»æ©Ÿå£æ‰çš„è©±ï¼Œå°±è‡ªå‹•å¾å‰©ä¸‹å¯ç”¨çš„slaveä¸»æ©Ÿä¾†æ›¿ä»£
- å¸¸è¦‹çš„master/slave æœ¬èº«æ˜¯redis å¸¸è¦‹æ¨¡å¼ï¼Œä¸»è¦è² è²¬è§£æ±ºè®€å¯«åˆ†é›¢ã€è³‡æ–™å‚™ä»½ï¼Œç„¶è€Œç•¶æŸå€‹ä¸»æ©Ÿå› ç•¶æ©Ÿæˆ–è€…ç„¡æ³•åŠæ™‚è™•ç†æ™‚ï¼Œå°±å¿…é ˆæ‰‹å‹•èª¿æ•´å¯ç”¨çš„ä¸»æ©Ÿä¾†æ›¿ä»£å®ƒå»ç‚ºå®¢æˆ¶ç«¯å¯¦ç¾ï¼Œç”šè‡³æ˜¯è‹¥masterä¸»æ©Ÿï¼Œå°±å¿…é ˆæ‰‹å‹•æ‰¾åˆ°å¯ç”¨çš„masterä¸»æ©Ÿä¾†é‡æ–°æ§‹ç¯‰master/slave

### å–®ç´”çš„master/slave çµæ§‹ç”¨é€”æ˜¯ï¼Ÿ


### note
1. sentinelï¼šåŸæ„ç‚ºè¢«è˜è«‹ç”¨ä¾†è§€å¯Ÿæˆ–è€…æ³¨æ„æŸå€‹æ±è¥¿çš„äººï¼Œåœ¨é›»è…¦ç§‘å­¸è£¡ï¼Œæ˜¯æŒ‡è² è²¬ç›£æ§æŸäº›ä¸»æ©Ÿçš„ä¸»æ©Ÿæˆ–è€…å¯¦é«”

> sentine:  **a person employed to guard something**

> guard: **to watch someone and make certain they do not escape from a place**

## è¤‡ç¿’
#ğŸ§  redis sentinel æ˜¯ä»€éº¼æ¨£çš„æŠ€è¡“ï¼Ÿ ->->-> `sentinel æ˜¯ä»¥master/slaveç‚ºåŸºç¤ä¾†è§£æ±ºå…¶å•é¡Œ-è‡ªå‹•ç›£æ¸¬å“ªäº›ä¸»æ©Ÿå·²ç¶“æ•…éšœä¸¦è©¦è‘—å°‡å¯ç”¨çš„ä¸»æ©Ÿåˆ†é…çµ¦å®¢æˆ¶ç«¯ä½¿ç”¨`
<!--SR:!2024-04-01,405,250-->

#ğŸ§  redis sentinel ä¸»æ—¨æ˜¯ç›£æ¸¬master/slaveæ¨¡å¼ä¸‹å“ªäº›ä¸»æ©Ÿå¯ç”¨ä¸¦è‡ªå‹•èª¿æ•´ï¼Œè«‹å•ç›£æ§å“ªäº›ä¸»æ©Ÿï¼Ÿ->->-> `masterä¸»æ©Ÿå’Œslaveä¸»æ©Ÿ`
<!--SR:!2024-07-01,463,250-->

#ğŸ§  redis sentinel ä¸»æ—¨æ˜¯ç›£æ¸¬master/slaveæ¨¡å¼ä¸‹å“ªäº›ä¸»æ©Ÿå¯ç”¨ä¸¦è‡ªå‹•èª¿æ•´ï¼Ÿè«‹å•è‹¥masterä¸»æ©Ÿå£æ‰å¾Œï¼Œæœƒå¦‚ä½•æŒ‘é¸ ->->-> `sentinel çµ„é„§å¾åŸæœ¬masterä¸»æ©Ÿä¸‹çš„slaveä¸»æ©Ÿæ‰¾åˆ°å¯ç”¨çš„ä¸»æ©Ÿä¾†æ›¿ä»£masterä¸»æ©Ÿï¼Œä¸¦ç”±å‰©ä¸‹çš„slaveä¸»æ©Ÿä¾†æ“”ä»»æ–°masterä¸»æ©Ÿçš„slaveä¸»æ©Ÿ`
<!--SR:!2024-06-26,460,250-->

#ğŸ§  redis sentinel ä¸»æ—¨æ˜¯ç›£æ¸¬master/slaveæ¨¡å¼ä¸‹å“ªäº›ä¸»æ©Ÿå¯ç”¨ä¸¦è‡ªå‹•èª¿æ•´ï¼Ÿè«‹å•è‹¥slaveä¸»æ©Ÿå£æ‰å¾Œï¼Œæœƒå¦‚ä½•æŒ‘é¸ ->->-> `è‹¥slaveä¸»æ©Ÿå£æ‰çš„è©±ï¼Œå°±è‡ªå‹•å¾å‰©ä¸‹å¯ç”¨çš„slaveä¸»æ©Ÿä¾†é‡çµ„slaveä¸»æ©Ÿç¾¤å’Œç›®å‰çš„masterä¸»æ©Ÿé‡æ–°æ§‹æˆæ–°çš„master/slaveæ¶æ§‹`
<!--SR:!2023-08-12,263,250-->

#ğŸ§  redis æ¡ç”¨ master/slave ä¸»è¦è§£æ±ºäº†å“ªäº›å•é¡Œ  ->->-> `ä¸»è¦è² è²¬è§£æ±ºè®€å¯«åˆ†é›¢ã€è³‡æ–™å‚™ä»½`
<!--SR:!2023-04-29,133,250-->

#ğŸ§  redisï¼šmaster/slaveå’Œè®€å¯«åˆ†é›¢ï¼Œå…©è€…æ˜¯ä¸€æ¨£çš„å—ï¼Ÿ ç‚ºä»€éº¼ï¼Ÿ->->-> `éƒ½ä¸ä¸€æ¨£ï¼Œmaster/slaveåªæ˜¯èªªæ˜å¤šå€‹redisåˆ†æˆmasterå’Œslaveä¸»æ©Ÿï¼Œä¸¦ç”±masterä¾†åˆ†äº«ç‰¹å®šå‰¯æœ¬çµ¦å…¶ä»–slaveï¼Œè€Œè®€å¯«åˆ†é›¢åªæ˜¯master/slaveçš„å¯¦ç¾ä¹‹ä¸€`
<!--SR:!2023-12-13,270,250-->

#ğŸ§  redis æ¡ç”¨ master/slaveæ¨¡å¼å¾Œï¼Œè‹¥éƒ¨åˆ†(å«masterä¸»æ©Ÿå’Œslaveä¸»æ©Ÿ)ä¸»æ©Ÿæ›æ‰çš„è©±ï¼Œè©²æ¨¡å¼å¦‚ä½•è§£æ±º ->->-> `ç•¶æŸå€‹ä¸»æ©Ÿå› ç•¶æ©Ÿæˆ–è€…ç„¡æ³•åŠæ™‚è™•ç†æ™‚ï¼Œå°±å¿…é ˆæ‰‹å‹•èª¿æ•´å¯ç”¨çš„ä¸»æ©Ÿä¾†æ›¿ä»£å®ƒå»ç‚ºå®¢æˆ¶ç«¯å¯¦ç¾`
<!--SR:!2023-10-20,305,250-->

#ğŸ§  redis å›  master/slaveæ¨¡å¼ä¸‹çš„å“ªå€‹ç¼ºå¤±è€Œæ¼”è®Šæˆéœ€è¦redis sentinel æ¨¡å¼  ->->-> `å› master/slaveæ¨¡å¼ç„¡æ³•è‡ªå‹•æ ¹æ“šä¸»æ©Ÿç‹€æ…‹è€Œè‡ªå‹•æŒ‘é¸å¥½çš„ä¸»æ©Ÿä¾†æ›¿ä»£`
<!--SR:!2024-04-14,412,250-->

---
Status: #ğŸŒ± 
Tags:
[[Redis]] - [[Redis Sentinel]]
Links:
References:
[[@magezijieRedisGaoKeYongPianNiGuanZheJiao]]
[[@wujiannanRedisSentinelJianJieYuBuShu]]
