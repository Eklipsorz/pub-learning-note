


## æè¿°
[[@chengmomorganSetStateZheGeAPISheJiDaoDiZenMeYang]]
> ## å¤šæ¬¡setStateå‡½æ•°è°ƒç”¨äº§ç”Ÿçš„æ•ˆæœä¼šåˆå¹¶

> æ¯”å¦‚ä¸‹é¢çš„ä»£ç ã€‚

```text
function updateName() {
  this.setState({FirstName: 'Morgan'});
  this.setState({LastName: 'Cheng'});
}
```

> è¿ç»­è°ƒç”¨äº†ä¸¤æ¬¡this.setStateï¼Œä½†æ˜¯åªä¼šå¼•å‘ä¸€æ¬¡æ›´æ–°ç”Ÿå‘½å‘¨æœŸï¼Œä¸æ˜¯ä¸¤æ¬¡ï¼Œå› ä¸ºReactä¼šå°†å¤šä¸ªthis.setStateäº§ç”Ÿçš„ä¿®æ”¹æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œç¼“ä¸€ç¼“ï¼Œæ”’åœ¨ä¸€èµ·ï¼Œè§‰å¾—å·®ä¸å¤šäº†å†å¼•å‘ä¸€æ¬¡æ›´æ–°è¿‡ç¨‹ã€‚


> åœ¨æ¯æ¬¡æ›´æ–°è¿‡ç¨‹ä¸­ï¼Œä¼šæŠŠç§¯æ”’çš„setStateç»“æœåˆå¹¶ï¼Œåšä¸€ä¸ªmergeçš„åŠ¨ä½œï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç ç›¸å½“äºè¿™æ ·ã€‚

```text
function updateName() {
  this.setState({FirstName: 'Morgan', LastName: 'Cheng'});
}
```

> å¦‚æœæ¯ä¸€ä¸ªthis.setStateéƒ½å¼•å‘ä¸€ä¸ªæ›´æ–°è¿‡ç¨‹çš„è¯ï¼Œé‚£å°±å¤ªæµªè´¹äº†ï¼
> 
> å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œä¹Ÿå¯ä»¥æ”¾å¿ƒå¤šæ¬¡è°ƒç”¨this.setStateï¼Œæ¯ä¸€æ¬¡åªè¦å…³æ³¨å½“å‰ä¿®æ”¹çš„é‚£ä¸€ä¸ªå­—æ®µå°±è¡Œï¼Œåæ­£å…¶ä»–å­—æ®µä¼šåˆå¹¶ä¿ç•™ï¼Œä¸¢ä¸æ‰ã€‚  
> 
> æ‰€ä»¥ï¼Œåˆå¹¶å¤šæ¬¡this.setStateè°ƒç”¨æ›´æ”¹çš„çŠ¶æ€è¿™ä¸ªAPIè®¾è®¡å†³å®šä¹Ÿä¸é”™ã€‚
> 
> **æ€»ç»“ä¸€ä¸‹ï¼ŒsetStateæœ€æ‹›éª‚çš„å°±æ˜¯ä¸ä¼šç«‹å³ä¿®æ”¹this.stateã€‚**
> 
> å¦‚æœæœ‰å¯èƒ½çš„è¯ï¼Œæ€ä¹ˆæ”¹è¿›è¿™ä¸ªAPIå‘¢ï¼Ÿ
>
>é¦–å…ˆsetStateè‚¯å®šè¿˜æ˜¯ä¸èƒ½ç«‹åˆ»æ›´æ–°this.stateï¼Œä¸ç„¶Reactæ•´ä¸ªæ¦‚å¿µå°±è¢«æ¨ç¿»äº†ï¼Œæ‰€ä»¥èƒ½åšçš„åªæ˜¯ç”¨ä¸€ä¸ªæ›´æ¸…æ¥šçš„æ–¹å¼è¡¨è¾¾ï¼Œè®©å¼€å‘è€…ä¸ä¼šè¯¯ä»¥ä¸ºthis.stateä¼šè¢«this.setStateç«‹å³æ›´æ–°ï¼Œå¥½åƒä¹Ÿæ²¡æœ‰ç‰¹åˆ«å¥½çš„æ”¹è¿›æ–¹æ³•ã€‚
>
>ä¸è¿‡ï¼Œæœ€è¿‘ä¸€ä¸ªthis.setStateå‡½æ•°çš„éšè—åŠŸèƒ½è¿›å…¥äº†å¤§å®¶çš„è§†é‡ï¼Œé‚£å°±æ˜¯ï¼š**åŸæ¥this.setStateå¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°å•Šï¼**

é‡é»ï¼š
- setState æ¯ä¸€æ¬¡å‘¼å«æ™‚ï¼Œæœƒç”Ÿæˆä»¥ä¸‹æŒ‡å®šä»»å‹™å…§å®¹çš„éåŒæ­¥ä»»å‹™ä¸¦æ”¾é€²ä½‡åˆ—ï¼Œå…¶ä½‡åˆ—æœƒçµ¦ç³»çµ±ä¸­çš„éåŒæ­¥ä»»å‹™Xä¾†è² è²¬è™•ç†æ¸²æŸ“
	- æ›´æ–°æŒ‡å®šç‹€æ…‹å€¼
- ç•¶æ²’æœ‰å†åº¦æ¥æ”¶setStateæ™‚ï¼ŒéåŒæ­¥ä»»å‹™Xé–‹å§‹è™•ç†ä½‡åˆ—è£¡çš„éåŒæ­¥ä»»å‹™ï¼Œæœƒå…ˆå°‡ä½‡åˆ—è£¡çš„ä»»å‹™å€‘æ‰€è¦æ±‚çš„ç‹€æ…‹ä¿®æ”¹åˆä½µï¼Œé€™æœƒä½¿å¾—å¤šå€‹ä»»å‹™åˆä½µæˆä¸€å€‹ä»»å‹™ï¼Œå…¶ä»»å‹™è¦æ±‚æŒ‡å®šçš„ç‹€æ…‹å€¼æœƒæ˜¯å¤šå€‹ä»»å‹™æ‰€æŒ‡å®šçš„ç‹€æ…‹æ‰€åˆä½µçš„æ¨£å­ï¼Œæœ€å¾Œå°±ä»¥é‚£å€‹ä»»å‹™ä¾†è§¸ç™¼updatingçš„ç”Ÿå‘½é€±æœŸ

### class-based component vs. functional component ï¼š state  & setState

åœ¨åŒå€‹å…ƒä»¶ä¸‹ï¼Œæ¯å€‹setStateæœƒæ˜¯ï¼š
1. state è¨»å†Šç¯„ç–‡ï¼šclass-based component çš„ å–®å€‹state è¨»å†Šå…ƒä»¶ä¸‹çš„æ‰€æœ‰ç‹€æ…‹ï¼›functional component çš„ å–®å€‹state è¨»å†Šå…ƒä»¶ä¸‹çš„ä¸€å€‹ç‰¹å®šç‹€æ…‹
2. setState è¨»å†Šç¯„ç–‡ï¼šclass-based component çš„ å–®å€‹setState è² è²¬å…ƒä»¶ä¸‹çš„æ‰€æœ‰ç‹€æ…‹ä¹‹æ›´æ–°ï¼›functional component çš„ å–®å€‹setState  åŸå‰‡å…ƒä»¶ä¸‹çš„ä¸€å€‹ç‰¹å®šç‹€æ…‹ä¹‹æ›´æ–°
3. setState æ›´æ–°ç‹€æ…‹æ–¹å¼ï¼šclass-based component çš„ å–®å€‹setState æ›´æ–°æ–¹å¼æœƒæ˜¯å…ˆä»¥å‰ä¸€å€‹ç‹€æ…‹ç‚ºåŸºç¤ä¾†å¢åŠ é¡å¤–ç‹€æ…‹æˆç‚ºè£¡é ­çš„å­ç‹€æ…‹æˆ–è€…è¦†è“‹ç‹€æ…‹å…§çš„å­ç‹€æ…‹ï¼›functuonal component çš„ å–®å€‹setState æ›´æ–°ç‹€æ…‹æ–¹å¼æœƒæ˜¯ç›´æ¥è¦†è“‹å‰ä¸€å€‹setStateç‹€æ…‹æˆ–è€…å‰ä¸€å€‹ç‹€æ…‹



### å¯¦éš›å¯¦ç¾ 1 - å°‡ç‹€æ…‹æ›´æ–°ä»»å‹™æ”¾ç½®ä½‡åˆ—

- setState **æ¯ä¸€æ¬¡å‘¼å«æ™‚ï¼Œæœƒç”ŸæˆéåŒæ­¥ä»»å‹™ä¸¦æ”¾é€²ä½‡åˆ—ï¼Œå…¶ä½‡åˆ—æœƒçµ¦ç³»çµ±ä¸­çš„éåŒæ­¥ä»»å‹™Xä¾†è² è²¬è™•ç†æ¸²æŸ“** 
- åœ¨class-based componentä¸­çš„batchingå¯¦éš›å¯¦ç¾ï¼šç”±æ–¼å› ç‚ºèªæ³•é™åˆ¶è€Œåªèƒ½æ™‚å¸¸ä»¥ç‰©ä»¶ä¾†åŒ…å«å…ƒä»¶ä¸‹çš„æ‰€æœ‰å±¬æ€§ï¼Œä¹Ÿæœ‰å¯èƒ½åªæœ‰ä¸€å€‹ç‹€æ…‹ä¸”ç‹€æ…‹å€¼æ˜¯å–®ä¸€å€¼
	- è‹¥ç‹€æ…‹æ˜¯ä»¥å–®ä¸€å€¼ä¾†å„²å­˜çš„è©±ï¼Œå°±ç›´æ¥æ‹¿ç›®å‰ä»»å‹™çš„è«‹æ±‚ç‹€æ…‹å»è¦†è“‹å…ˆå‰ä»»å‹™æ‰€è¨˜éŒ„çš„ç‹€æ…‹
	- è‹¥ç‹€æ…‹æ˜¯ä»¥å¤šå±¬æ€§çš„ç‰©ä»¶ä¾†å„²å­˜çš„è©±
		- ä¸€é–‹å§‹æœƒå®šç¾©çµæœç‹€æ…‹ç‚ºç©ºç‰©ä»¶
		- å°‡setStateè¨­å®šçš„ç‹€æ…‹(ç‰©ä»¶çš„å±¬æ€§)å»è¿½åŠ /è¦†è“‹è‡³çµæœç‹€æ…‹ç‰©ä»¶ä¸Šçš„å±¬æ€§
			- è‹¥è¦æ±‚æ›´æ”¹ç‹€æ…‹çš„å±¬æ€§ä¸¦æ²’æœ‰å­˜åœ¨çµæœç‹€æ…‹ç‰©ä»¶çš„å±¬æ€§ä¸­ï¼Œç›´æ¥å¢åŠ è©²å±¬æ€§è‡³çµæœç‹€æ…‹ç‰©ä»¶
			- è‹¥è¦æ±‚æ›´æ”¹ç‹€æ…‹çš„å±¬æ€§å­˜åœ¨çµæœç‹€æ…‹ç‰©ä»¶çš„å±¬æ€§ä¸­ï¼Œå°±ç›´æ¥ä»¥ç›®å‰è¦æ±‚æ›´æ”¹çš„ç‹€æ…‹è¦†è“‹è‡³çµæœç‰©ä»¶ä¸Šçš„ç›¸å°æ‡‰å±¬æ€§
- åœ¨functional componentä¸­çš„batchingå¯¦éš›å¯¦ç¾ï¼šæ¯ç¨®ç‹€æ…‹éƒ½æœ‰å„è‡ªç‹€æ…‹æ›´æ–°ç”¨çš„å‡½å¼ï¼Œæ¯å€‹ç”±useStateæ‰€è¨»å†Šçš„ç‹€æ…‹æœƒè¢«è¦–ç‚ºçµæœç‹€æ…‹ç‰©ä»¶ä¸­çš„ä¸€ç¨®å±¬æ€§
	- ä¸€é–‹å§‹æœƒå®šç¾©çµæœç‹€æ…‹ç‚ºç©ºç‰©ä»¶ï¼š
		- è‹¥è¦æ±‚æ›´æ”¹ç‹€æ…‹çš„å±¬æ€§æœ¬èº«ä¸¦æ²’æœ‰å­˜åœ¨çµæœç‹€æ…‹ç‰©ä»¶çš„å±¬æ€§ä¸­ï¼Œç›´æ¥å¢åŠ è©²å±¬æ€§è‡³çµæœç‹€æ…‹ç‰©ä»¶
		- è‹¥è¦æ±‚æ›´æ”¹ç‹€æ…‹çš„å±¬æ€§æœ¬èº«ä¸¦æ²’æœ‰å­˜åœ¨çµæœç‹€æ…‹ç‰©ä»¶çš„å±¬æ€§ä¸­ï¼Œå°±ç›´æ¥ä»¥ç›®å‰è¦æ±‚æ›´æ”¹çš„ç‹€æ…‹è¦†è“‹è‡³çµæœç‰©ä»¶ä¸Šçš„ç›¸å°æ‡‰å±¬æ€§

		

### å¯¦éš›å¯¦ç¾ 2 - è™•ç†ä½‡åˆ—çš„ä»»å‹™

**ç•¶éåŒæ­¥ä»»å‹™Xé–‹å§‹è™•ç†ä½‡åˆ—è£¡çš„éåŒæ­¥ä»»å‹™ï¼Œæœƒå…ˆå°‡ä½‡åˆ—è£¡çš„ä»»å‹™å€‘æ‰€è¦æ±‚çš„ç‹€æ…‹ä¿®æ”¹åˆä½µï¼Œé€™æœƒä½¿å¾—å¤šå€‹ä»»å‹™åˆä½µæˆä¸€å€‹ä»»å‹™ï¼Œå…¶ä»»å‹™è¦æ±‚æŒ‡å®šçš„ç‹€æ…‹å€¼æœƒæ˜¯å¤šå€‹ä»»å‹™æ‰€æŒ‡å®šçš„ç‹€æ…‹æ‰€åˆä½µçš„æ¨£å­ï¼Œæœ€å¾Œå°±ä»¥é‚£å€‹ä»»å‹™ä¾†è§¸ç™¼updatingçš„ç”Ÿå‘½é€±æœŸ** 

- å¯¦éš›å¯¦ç¾ç‚ºï¼šç•¶ç›®å‰å¯ä»¥åˆä½µçš„æŒ‡ä»¤éƒ½å®Œæˆåˆä½µæ™‚ï¼Œå°±åŸ·è¡Œ
	- ä»¥ç›®å‰çµæœç‹€æ…‹ä¾†è§¸ç™¼å¯¦éš›ç‹€æ…‹æ›´æ–° & æ¸²æŸ“ã€‚



#### class-based component æ¡ˆä¾‹ 1
å‡å¦‚ç³»çµ±åŸ·è¡Œä»¥ä¸‹setStateï¼Œè€Œç‹€æ…‹æœƒæ˜¯ä»¥ç‰©ä»¶ä¾†è¡¨ç¤º
```
	function updateName() {
	  this.setState({FirstName: 'Morgan'});
	  this.setState({LastName: 'Cheng'});
	}
```

åŸ·è¡Œç¬¬ä¸€å€‹this.setStateæŒ‡ä»¤ä»»å‹™ï¼Œæœƒå…ˆå°‡çµæœç‰©ä»¶è¨­å®šç‚ºç©ºç‰©ä»¶ï¼Œä¸¦å°‡è©²ä»»å‹™è¦æ±‚æ›´æ”¹çš„ç‹€æ…‹å€¼è¿½åŠ è‡³ç©ºç‰©ä»¶ï¼Œåšå®Œå°±åšç¬¬äºŒå€‹
```
// è¿½åŠ å‰
{}
// è¿½åŠ å¾Œ
{ FirstName: 'Morgan' }
```

åŸ·è¡Œç¬¬äºŒå€‹this.setStateæŒ‡ä»¤ä»»å‹™ï¼Œæœƒå…ˆå°‡ä»»å‹™è¦æ±‚æ›´æ”¹çš„ç‹€æ…‹è¿½åŠ /è¦†è“‹è‡³ç©ºç‰©ä»¶ï¼Œåšå®Œå°±çœ‹æœ‰æ²’æœ‰ç¬¬ä¸‰å€‹
```
// è¿½åŠ å‰ 
{ FirstName: 'Morgan' }
// è¿½åŠ å¾Œ
{ FirstName: 'Morgan', LastName: 'Cheng' }
```

åšå®Œç™¼ç¾æ²’äº†ï¼Œå°±ç›´æ¥è®“è² è²¬è™•ç†ä½‡åˆ—çš„éåŒæ­¥ä»»å‹™Xä¾†å°å¤¾å¸¶è‘—ç‰¹å®šç‹€æ…‹å€¼çš„åˆä½µå¾Œä»»å‹™é€²è¡Œç‹€æ…‹æ›´æ–°&æ¸²æŸ“

#### class-based component æ¡ˆä¾‹ 2

å‡å¦‚ç³»çµ±åŸ·è¡Œä»¥ä¸‹setStateï¼Œè€Œç‹€æ…‹æœƒæ˜¯ä»¥å–®ä¸€å€¼ä¾†è¡¨ç¤º
```
	function updateName() {
	  // count = 1
	  this.setState(count + 1);
	  this.setState(count + 2);
	  this.setState(count + 3);
	}
```


åŸ·è¡Œç¬¬ä¸€å€‹this.setStateæŒ‡ä»¤ä»»å‹™ï¼Œæœƒå…ˆå°‡çµæœç‰©ä»¶è¨­å®šç‚º 1
```
// è¿½åŠ å‰
undefined
// è¿½åŠ å¾Œ
1
```
åŸ·è¡Œç¬¬äºŒå€‹this.setStateæŒ‡ä»¤ä»»å‹™ï¼Œæœƒå…ˆå°‡çµæœç‰©ä»¶è¨­å®šç‚º 2
```
// è¿½åŠ å‰
1
// è¿½åŠ å¾Œ
2
```

åŸ·è¡Œç¬¬ä¸‰å€‹this.setStateæŒ‡ä»¤ä»»å‹™ï¼Œæœƒå…ˆå°‡çµæœç‰©ä»¶è¨­å®šç‚º 3
```
// è¿½åŠ å‰
2
// è¿½åŠ å¾Œ
3
```

åšå®Œç™¼ç¾æ²’äº†ï¼Œå°±ç›´æ¥è² è²¬è™•ç†ä½‡åˆ—çš„éåŒæ­¥ä»»å‹™Xä¾†å°å¤¾å¸¶è‘—ç‰¹å®šç‹€æ…‹å€¼çš„åˆä½µå¾Œä»»å‹™é€²è¡Œç‹€æ…‹æ›´æ–°&æ¸²æŸ“


#### functional component æ¡ˆä¾‹1
ä»¥class-based componentç‚ºåƒè€ƒæ¡ˆä¾‹ï¼Œæ‰€å°æ‡‰çš„èªæ³•æœƒæ˜¯å¦‚ä¸‹
```
const [firstName, setFirstName] = useState('');
const [lastName, setLastName] = useState('');
```

ä½¿ç”¨å…©æ¬¡useStateä¾†è¨»å†Šå…©ç¨®ç‹€æ…‹åˆ†åˆ¥ç‚ºfirstNameã€lastNameï¼Œç•¶åŸ·è¡Œä»¥ä¸‹setStateæ™‚
```
setFirstName('Morgan');
setLastName('Cheng');
```

åŸ·è¡Œå‰æœƒå…ˆè¨­å®šç©ºç‰©ä»¶ç‚ºçµæœç‹€æ…‹ç‰©ä»¶
```
{}
```

æ¥è‘—åŸ·è¡Œç¬¬ä¸€å€‹setState-setFirstNameæ™‚ï¼Œå…¶ç‹€æ…‹ç‰©ä»¶æœƒæ˜¯
```
// è¿½åŠ å¾Œ
{ FirstName: 'Morgan' }
```

ç„¶å¾Œå†åŸ·è¡Œç¬¬äºŒå€‹setState-setLastNameæ™‚ï¼Œå…¶ç‹€æ…‹ç‰©ä»¶æœƒæ˜¯
```
// è¿½åŠ å‰ 
{ FirstName: 'Morgan' }
// è¿½åŠ å¾Œ
{ FirstName: 'Morgan', LastName: 'Cheng' }
```


åšå®Œç™¼ç¾æ²’äº†ï¼Œå°±ç›´æ¥è®“è² è²¬è™•ç†ä½‡åˆ—çš„éåŒæ­¥ä»»å‹™Xä¾†å°å¤¾å¸¶è‘—ç‰¹å®šç‹€æ…‹å€¼çš„åˆä½µå¾Œä»»å‹™é€²è¡Œç‹€æ…‹æ›´æ–°&æ¸²æŸ“


### useState ä½•æ™‚è§¸ç™¼åŸ·è¡Œï¼Ÿ
[[@vencovskyAnswerWhenUse2019]]

> useCallback
> On every render, everything that's inside a functional component will run again.

é‡é»ï¼š
- æ¯ä¸€æ¬¡åŸ·è¡Œå…ƒä»¶çš„renderå‡½å¼å°±æœƒåŸ·è¡ŒuseStateï¼Œé¦–æ¬¡mountéšæ®µæœƒä»¥åˆå§‹å€¼ä¾†è¡¨ç¤ºï¼Œupdateéšæ®µå‰‡æ˜¯æœƒä»¥æ–°ç‹€æ…‹ä¾†å›å‚³





## è¤‡ç¿’

#ğŸ§  Reactï¼šç„¡è«–æ˜¯å¦ç‚ºclass-based componet æˆ–è€… functional componentï¼ŒsetState æ¯ä¸€æ¬¡åŸ·è¡Œæ™‚ï¼Œæ¦‚å¿µæœƒå¦‚ä½•åŸ·è¡Œ ->->-> `æœƒç”Ÿæˆä»¥ä¸‹æŒ‡å®šä»»å‹™å…§å®¹çš„éåŒæ­¥ä»»å‹™ä¸¦æ”¾é€²ä½‡åˆ—ï¼Œå…¶ä½‡åˆ—æœƒçµ¦ç³»çµ±ä¸­çš„éåŒæ­¥ä»»å‹™Xä¾†è² è²¬è™•ç†æ¸²æŸ“ï¼ŒæŒ‡å®šä»»å‹™å…§å®¹ç‚ºæ›´æ–°æŒ‡å®šç‹€æ…‹å€¼ï¼Œç•¶æ²’æœ‰å†åº¦æ¥æ”¶setStateæ™‚ï¼ŒéåŒæ­¥ä»»å‹™Xé–‹å§‹è™•ç†ä½‡åˆ—è£¡çš„éåŒæ­¥ä»»å‹™ï¼Œæœƒå…ˆå°‡ä½‡åˆ—è£¡çš„ä»»å‹™å€‘æ‰€è¦æ±‚çš„ç‹€æ…‹ä¿®æ”¹åˆä½µï¼Œé€™æœƒä½¿å¾—å¤šå€‹ä»»å‹™åˆä½µæˆä¸€å€‹ä»»å‹™ï¼Œå…¶ä»»å‹™è¦æ±‚æŒ‡å®šçš„ç‹€æ…‹å€¼æœƒæ˜¯å¤šå€‹ä»»å‹™æ‰€æŒ‡å®šçš„ç‹€æ…‹æ‰€åˆä½µçš„æ¨£å­ï¼Œæœ€å¾Œå°±ä»¥é‚£å€‹ä»»å‹™ä¾†è§¸ç™¼updatingçš„ç”Ÿå‘½é€±æœŸ`

#ğŸ§  Reactï¼šåœ¨class-based componentä¸­çš„batchingå¯¦éš›å¯¦ç¾ä¸­ï¼Œ setState çš„ç‹€æ…‹æ˜¯ä»¥å–®ä¸€å€¼æˆ–è€…primitive data valueï¼Œæœƒå¦‚ä½•é€²è¡Œç‹€æ…‹çš„batchingï¼Ÿ->->-> `è‹¥ç‹€æ…‹æ˜¯ä»¥å–®ä¸€å€¼ä¾†å„²å­˜çš„è©±ï¼Œå°±ç›´æ¥æ‹¿ç›®å‰ä»»å‹™çš„è«‹æ±‚ç‹€æ…‹å»è¦†è“‹å…ˆå‰ä»»å‹™æ‰€è¨˜éŒ„çš„ç‹€æ…‹`


#ğŸ§  Reactï¼š åœ¨class-based componentä¸­çš„batchingå¯¦éš›å¯¦ç¾ä¸­ï¼Œ setState çš„ç‹€æ…‹æ˜¯ä»¥å–®ä¸€å€¼æˆ–è€…primitive data valueï¼Œæœƒå¦‚ä½•é€²è¡Œç‹€æ…‹çš„batchingï¼Ÿ ->->-> `ä¸€é–‹å§‹æœƒå®šç¾©çµæœç‹€æ…‹ç‚ºç©ºç‰©ä»¶ã€å°‡setStateè¨­å®šçš„ç‹€æ…‹(ç‰©ä»¶çš„å±¬æ€§)å»è¿½åŠ /è¦†è“‹è‡³çµæœç‹€æ…‹ç‰©ä»¶ä¸Šçš„å±¬æ€§`

#ğŸ§  Reactï¼šç„¡è«–ç‹€æ…‹æ›´æ–°æ˜¯å¦ç‚ºclass-based componet æˆ–è€… functional componentï¼Œæœ‰èª°èƒ½å¤ åŸ·è¡Œå®ŒsetStateä¾¿ç«‹åˆ»æ›´æ–°stateå— ->->-> `éƒ½æ²’æœ‰`


#ğŸ§  Reactï¼šç„¡è«–æ˜¯å¦ç‚ºclass-based componet æˆ–è€… functional componentï¼Œè«‹å•setState æ¯ä¸€æ¬¡å‘¼å«æ™‚æœƒç«‹åˆ»æ›´æ–°stateå—ï¼Ÿ ç‚ºä½•ï¼Ÿ->->-> `ä¸¦ä¸æœƒï¼Œå…·é«”è¦ç­‰æ‰€æœ‰ç‹€æ…‹æ›´æ–°æŒ‡ä»¤åŸ·è¡Œå®Œç•¢ï¼Œä¸¦ä¸”ä»¥batchingå½¢å¼ä¾†åˆä½µç‹€æ…‹ï¼Œæœ€å¾Œä»¥æœ€å¾Œåˆä½µç‹€æ…‹ç‚ºçµæœç‹€æ…‹ä¾†é€²è¡Œä¸€æ¬¡ç‹€æ…‹æ›´æ–°å’Œå‡ºç™¼æ¸²æŸ“é€±æœŸ`

#ğŸ§  Reactï¼šsetState1(A) setState2(B) setState3(C)ï¼Œè«‹å•æœ€å¾Œçš„batchingçµæœæœƒæ˜¯ä»€éº¼ ->->-> `æœƒæ˜¯å€‹{state1: A, state2: B, state3: C}çš„çµæœï¼Œä¸¦ä»¥é€™å€‹ç‹€æ…‹ä¾†æ›´æ–°ç‹€æ…‹å’Œè§¸ç™¼æ¸²æŸ“`


#ğŸ§  Reactï¼šsetState1(A) setState2(B) setState1(A1) ï¼Œè«‹å•æœ€å¾Œçš„batchingçµæœæœƒæ˜¯ä»€éº¼->->-> `æœƒæ˜¯å€‹{state1: A1, state2: B}çš„çµæœï¼Œä¸¦ä»¥é€™å€‹ç‹€æ…‹ä¾†æ›´æ–°ç‹€æ…‹å’Œè§¸ç™¼æ¸²æŸ“`





#ğŸ§  Reactï¼š **ç•¶éåŒæ­¥ä»»å‹™Xé–‹å§‹è™•ç†ä½‡åˆ—è£¡çš„éåŒæ­¥ä»»å‹™ï¼Œæœƒå…ˆå°‡ä½‡åˆ—è£¡çš„ä»»å‹™å€‘æ‰€è¦æ±‚çš„ç‹€æ…‹ä¿®æ”¹åˆä½µï¼Œé€™æœƒä½¿å¾—å¤šå€‹ä»»å‹™åˆä½µæˆä¸€å€‹ä»»å‹™ï¼Œå…¶ä»»å‹™è¦æ±‚æŒ‡å®šçš„ç‹€æ…‹å€¼æœƒæ˜¯å¤šå€‹ä»»å‹™æ‰€æŒ‡å®šçš„ç‹€æ…‹æ‰€åˆä½µçš„æ¨£å­ï¼Œæœ€å¾Œå°±ä»¥é‚£å€‹ä»»å‹™ä¾†è§¸ç™¼updatingçš„ç”Ÿå‘½é€±æœŸ** ï¼Œå…¶å¯¦éš›å¯¦ç¾ç‚ºä½•ï¼Ÿ ->->-> `å¯¦éš›å¯¦ç¾ç‚ºï¼šç•¶ç›®å‰å¯ä»¥åˆä½µçš„æŒ‡ä»¤éƒ½å®Œæˆåˆä½µæ™‚ï¼Œå°±åŸ·è¡Œä»¥ç›®å‰çµæœç‹€æ…‹ä¾†è§¸ç™¼å¯¦éš›ç‹€æ…‹æ›´æ–° & æ¸²æŸ“ã€‚`
<!--SR:!2022-12-15,73,250-->


#ğŸ§  Reactï¼šåœ¨class-based componetä¸­ï¼Œè² è²¬è™•ç†å„²å­˜å¤šå€‹ç‹€æ…‹æ›´æ–°ä»»å‹™ä½‡åˆ—çš„éåŒæ­¥ä»»å‹™Xä½•æ™‚æœƒåšç‹€æ…‹æ›´æ–°&æ¸²æŸ“ ->->-> `ç­‰åˆ°æ²’æœ‰ç‹€æ…‹æ›´æ–°ä»»å‹™å¯è¢«åŸ·è¡Œï¼Œå°±é–‹å§‹åŸ·è¡Œ`

#ğŸ§  Reactï¼šåœ¨functional componentä¸­ï¼Œè² è²¬è™•ç†å„²å­˜å¤šå€‹ç‹€æ…‹æ›´æ–°ä»»å‹™ä½‡åˆ—çš„éåŒæ­¥ä»»å‹™Xä½•æ™‚æœƒåšç‹€æ…‹æ›´æ–°&æ¸²æŸ“ ->->-> `ç­‰åˆ°æ²’æœ‰ç‹€æ…‹æ›´æ–°ä»»å‹™å¯è¢«åŸ·è¡Œï¼Œå°±é–‹å§‹åŸ·è¡Œ`



#ğŸ§  React18ï¼šclass-based component å‡å¦‚ç³»çµ±åŸ·è¡Œä»¥ä¸‹setStateï¼Œè€Œç‹€æ…‹æœƒæ˜¯ä»¥å–®ä¸€å€¼ä¾†è¡¨ç¤ºï¼Œé‚£éº¼éç¨‹æœƒæ˜¯å¦‚ä½•åŸ·è¡Œç‹€æ…‹æ›´æ–°![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1661180158/blog/react/batching/handler-multiple-setState-value-example_tw7yp7.png) ->->-> `åŸ·è¡Œç¬¬ä¸€å€‹this.setStateæŒ‡ä»¤ä»»å‹™ï¼Œæœƒå…ˆå°‡çµæœç‰©ä»¶è¨­å®šç‚º 2ã€åŸ·è¡Œç¬¬äºŒå€‹this.setStateæŒ‡ä»¤ä»»å‹™ï¼Œæœƒå…ˆå°‡çµæœç‰©ä»¶è¨­å®šç‚º 3ã€åŸ·è¡Œç¬¬ä¸‰å€‹this.setStateæŒ‡ä»¤ä»»å‹™ï¼Œæœƒå…ˆå°‡çµæœç‰©ä»¶è¨­å®šç‚º 4ã€åšå®Œç™¼ç¾æ²’äº†ï¼Œå°±ç›´æ¥è² è²¬è™•ç†ä½‡åˆ—çš„éåŒæ­¥ä»»å‹™Xä¾†å°å¤¾å¸¶è‘—ç‰¹å®šç‹€æ…‹å€¼çš„åˆä½µå¾Œä»»å‹™é€²è¡Œç‹€æ…‹æ›´æ–°&æ¸²æŸ“`


#ğŸ§  React18ï¼šclass-based component å‡å¦‚ç³»çµ±åŸ·è¡Œä»¥ä¸‹setStateï¼Œè€Œç‹€æ…‹æœƒæ˜¯ä»¥ç‰©ä»¶ä¾†è¡¨ç¤ºï¼Œé‚£éº¼éç¨‹æœƒæ˜¯å¦‚ä½•åŸ·è¡Œç‹€æ…‹æ›´æ–°![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1661180158/blog/react/batching/handler-multiple-setState-object-example_lcz6tg.png) ->->-> `åŸ·è¡Œç¬¬ä¸€å€‹this.setStateæŒ‡ä»¤ä»»å‹™ï¼Œæœƒå…ˆå°‡çµæœç‰©ä»¶è¨­å®šç‚ºç©ºç‰©ä»¶ï¼Œä¸¦å°‡è©²ä»»å‹™è¦æ±‚æ›´æ”¹çš„ç‹€æ…‹å€¼è¿½åŠ è‡³ç©ºç‰©ä»¶ï¼Œåšå®Œå°±åšç¬¬äºŒå€‹ã€‚åŸ·è¡Œç¬¬äºŒå€‹this.setStateæŒ‡ä»¤ä»»å‹™ï¼Œæœƒå…ˆå°‡ä»»å‹™è¦æ±‚æ›´æ”¹çš„ç‹€æ…‹è¿½åŠ /è¦†è“‹è‡³ç©ºç‰©ä»¶ï¼Œåšå®Œå°±çœ‹æœ‰æ²’æœ‰ç¬¬ä¸‰å€‹ã€‚åšå®Œç™¼ç¾æ²’äº†ï¼Œå°±ç›´æ¥è®“è² è²¬è™•ç†ä½‡åˆ—çš„éåŒæ­¥ä»»å‹™Xä¾†å°å¤¾å¸¶è‘—ç‰¹å®šç‹€æ…‹å€¼çš„åˆä½µå¾Œä»»å‹™é€²è¡Œç‹€æ…‹æ›´æ–°&æ¸²æŸ“`

#ğŸ§  è‹¥é€éä»¥ä¸‹èªæ³•è€Œç²å¾—\{ FirstName: \'Morgan\', LastName: \'Cheng\' \}ï¼Œè«‹å•æ˜¯å±¬æ–¼å“ªç¨®å…ƒä»¶é–‹ç™¼æ–¹æ³•ï¼Ÿ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1661180158/blog/react/batching/handler-multiple-setState-object-example_lcz6tg.png) ->->-> `class-based component`


#ğŸ§  Reactï¼šsetState1(\{firstName: \'Morgan\' \}); setState1(\{lastName:\'Cheng\'\}) è«‹å•æœ€å¾Œçµæœæœƒæ˜¯ä»€éº¼ï¼Ÿç‚ºä»€éº¼->->-> `æœ€å¾Œçµæœç‚º{lastName: 'Cheng'}ï¼Œå› ç‚ºé€™æ˜¯functional componentï¼Œè€ŒsetState1å‰‡æ˜¯å°æ–¼åŒä¸€å€‹ç‹€æ…‹çš„ç‹€æ…‹æ›´æ–°å‡½å¼ï¼Œæ›è¨€ä¹‹ï¼Œå°±æ˜¯åŒä¸€å€‹ç‹€æ…‹ï¼Œæ‰€ä»¥é€™å°æ–¼batchingçš„çµæœç‹€æ…‹ç‰©ä»¶ä¾†èªªï¼Œåªæ˜¯å°åŒä¸€ç¨®å±¬æ€§çš„è¦†å¯«`






#ğŸ§  React18ï¼šclass-based component å‡å¦‚ç³»çµ±åŸ·è¡Œä»¥ä¸‹setStateï¼Œè€Œç‹€æ…‹æœƒæ˜¯ä»¥å–®ä¸€å€¼ä¾†è¡¨ç¤ºï¼Œé‚£éº¼æœƒä»¥ä½•ç¨®ç‹€æ…‹ä¾†æ¸²æŸ“å’Œæ›´æ–°ç‹€æ…‹ï¼Ÿ![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1661180158/blog/react/batching/handler-multiple-setState-value-example_tw7yp7.png) ->->-> `4`
<!--SR:!2022-12-16,74,250-->

#ğŸ§  React18ï¼šclass-based component å‡å¦‚ç³»çµ±åŸ·è¡Œä»¥ä¸‹setStateï¼Œè€Œç‹€æ…‹æœƒæ˜¯ä»¥ç‰©ä»¶ä¾†è¡¨ç¤ºï¼Œé‚£éº¼æœƒä»¥ä½•ç¨®ç‹€æ…‹ä¾†æ¸²æŸ“å’Œæ›´æ–°ç‹€æ…‹![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1661180158/blog/react/batching/handler-multiple-setState-object-example_lcz6tg.png) ->->-> `{ FirstName: 'Morgan', LastName: 'Cheng' }`
<!--SR:!2022-12-13,72,250-->


#ğŸ§  React useState ä½•æ™‚è§¸ç™¼åŸ·è¡Œï¼Ÿ ->->-> `æ¯ä¸€æ¬¡åŸ·è¡Œå…ƒä»¶çš„renderå‡½å¼å°±æœƒåŸ·è¡ŒuseState`
<!--SR:!2022-10-09,3,250-->

#ğŸ§  React useState æ¯æ¬¡è§¸ç™¼åŸ·è¡Œæ‰€å›å‚³çš„ç‹€æ…‹æœƒæ˜¯ï¼Ÿ ->->-> `é¦–æ¬¡mountéšæ®µæœƒä»¥åˆå§‹å€¼ä¾†è¡¨ç¤ºï¼Œupdateéšæ®µå‰‡æ˜¯æœƒä»¥æ–°ç‹€æ…‹ä¾†å›å‚³`
<!--SR:!2022-10-17,8,250-->

#ğŸ§  Reactï¼šåœ¨functional componentä¸­çš„batchingå¯¦éš›å¯¦ç¾æ˜¯å¦‚ä½•é€²è¡Œbatching?->->-> `æ¯ç¨®ç‹€æ…‹éƒ½æœ‰å„è‡ªç‹€æ…‹æ›´æ–°ç”¨çš„å‡½å¼ï¼Œæ‰€ä»¥æœƒä»¥æ¯å€‹ç”±useStateæ‰€è¨»å†Šçš„ç‹€æ…‹è¦–ç‚ºçµæœç‹€æ…‹ç‰©ä»¶ä¸­çš„ä¸€ç¨®å±¬æ€§ï¼Œæ¥è‘—åŸ·è¡ŒsetStateä¹‹å‰ï¼Œä¸€é–‹å§‹æœƒå®šç¾©çµæœç‹€æ…‹ç‚ºç©ºç‰©ä»¶ï¼Œ- è‹¥è¦æ±‚æ›´æ”¹ç‹€æ…‹çš„å±¬æ€§æœ¬èº«ä¸¦æ²’æœ‰å­˜åœ¨çµæœç‹€æ…‹ç‰©ä»¶çš„å±¬æ€§ä¸­ï¼Œç›´æ¥å¢åŠ è©²å±¬æ€§è‡³çµæœç‹€æ…‹ç‰©ä»¶ - è‹¥è¦æ±‚æ›´æ”¹ç‹€æ…‹çš„å±¬æ€§æœ¬èº«ä¸¦æ²’æœ‰å­˜åœ¨çµæœç‹€æ…‹ç‰©ä»¶çš„å±¬æ€§ä¸­ï¼Œå°±ç›´æ¥ä»¥ç›®å‰è¦æ±‚æ›´æ”¹çš„ç‹€æ…‹è¦†è“‹è‡³çµæœç‰©ä»¶ä¸Šçš„ç›¸å°æ‡‰å±¬æ€§`

#ğŸ§  Reactï¼šåœ¨functional componentä¸­çš„batchingå¯¦éš›å¯¦ç¾ä¸‹ï¼Œä¸€é–‹å§‹å‰›é–‹å§‹åŸ·è¡Œbatchingæœƒåšä»€éº¼ï¼Ÿ ->->-> `ä¸€é–‹å§‹æœƒå®šç¾©çµæœç‹€æ…‹ç‚ºç©ºç‰©ä»¶`

#ğŸ§  Reactï¼šåœ¨functional componentä¸­çš„batchingå¯¦éš›å¯¦ç¾ä¸‹ï¼Œä¸€é–‹å§‹å‰›é–‹å§‹åŸ·è¡Œbatchingæœƒå®šç¾©çµæœç‹€æ…‹ç‚ºç©ºç‰©ä»¶ä¸¦æ ¹æ“šç‹€æ…‹çš„å±¬æ€§æ˜¯å¦å­˜åœ¨ä¾†è™•ç†ï¼Œè«‹å•é€™æ˜¯ä»€éº¼æ„æ€ï¼Ÿ->->-> `å°±æ˜¯æŒ‰ç…§æ¯å€‹è¢«è¨»å†Šçš„ç‹€æ…‹ä¾†ç•¶ä½œå±¬æ€§ä¾†ç´å…¥çµæœç‹€æ…‹ç‰©ä»¶ä¸Š`

#ğŸ§  Reactï¼šåœ¨functional componentä¸­çš„batchingå¯¦éš›å¯¦ç¾æ˜¯å¦‚ä½•é€²è¡Œbatchingï¼Œä¸€é–‹å§‹æœƒå®šç¾©çµæœç‹€æ…‹ç‚ºç©ºç‰©ä»¶ï¼Œæ¥è‘—æ ¹æ“šç‹€æ…‹çš„å±¬æ€§æ˜¯å¦å­˜åœ¨ä¾†è™•ç†ï¼Œé‚£éº¼å¦‚ä½•åšï¼Ÿ>->-> `è‹¥è¦æ±‚æ›´æ”¹ç‹€æ…‹çš„å±¬æ€§æœ¬èº«ä¸¦æ²’æœ‰å­˜åœ¨çµæœç‹€æ…‹ç‰©ä»¶çš„å±¬æ€§ä¸­ï¼Œç›´æ¥å¢åŠ è©²å±¬æ€§è‡³çµæœç‹€æ…‹ç‰©ä»¶ã€ è‹¥è¦æ±‚æ›´æ”¹ç‹€æ…‹çš„å±¬æ€§æœ¬èº«ä¸¦æ²’æœ‰å­˜åœ¨çµæœç‹€æ…‹ç‰©ä»¶çš„å±¬æ€§ä¸­ï¼Œå°±ç›´æ¥ä»¥ç›®å‰è¦æ±‚æ›´æ”¹çš„ç‹€æ…‹è¦†è“‹è‡³çµæœç‰©ä»¶ä¸Šçš„ç›¸å°æ‡‰å±¬æ€§`

#ğŸ§  Reactï¼šåœ¨functional componentä¸­çš„batchingå¯¦éš›å¯¦ç¾æ˜¯å¦‚ä½•é€²è¡Œbatchingï¼Œä¸€é–‹å§‹æœƒå®šç¾©çµæœç‹€æ…‹ç‚ºç©ºç‰©ä»¶ï¼Œæ¥è‘—æ ¹æ“šç‹€æ…‹çš„å±¬æ€§æ˜¯å¦å­˜åœ¨ä¾†è™•ç†ï¼Œè‹¥è¦æ±‚æ›´æ”¹ç‹€æ…‹çš„å±¬æ€§æœ¬èº«ä¸¦æ²’æœ‰å­˜åœ¨çµæœç‹€æ…‹ç‰©ä»¶çš„å±¬æ€§ä¸­ï¼Œé‚£æ¥ä¸‹ä¾†å¦‚ä½•åšï¼Ÿ ->->-> `ç›´æ¥å¢åŠ è©²å±¬æ€§è‡³çµæœç‹€æ…‹ç‰©ä»¶`

#ğŸ§  Reactï¼šåœ¨functional componentä¸­çš„batchingå¯¦éš›å¯¦ç¾æ˜¯å¦‚ä½•é€²è¡Œbatchingï¼Œä¸€é–‹å§‹æœƒå®šç¾©çµæœç‹€æ…‹ç‚ºç©ºç‰©ä»¶ï¼Œæ¥è‘—æ ¹æ“šç‹€æ…‹çš„å±¬æ€§æ˜¯å¦å­˜åœ¨ä¾†è™•ç†ï¼Œè‹¥è¦æ±‚æ›´æ”¹ç‹€æ…‹çš„å±¬æ€§æœ¬èº«ä¸¦æ²’æœ‰å­˜åœ¨çµæœç‹€æ…‹ç‰©ä»¶çš„å±¬æ€§ä¸­ï¼Œé‚£æ¥ä¸‹ä¾†å¦‚ä½•åšï¼Ÿ->->-> `å°±ç›´æ¥ä»¥ç›®å‰è¦æ±‚æ›´æ”¹çš„ç‹€æ…‹è¦†è“‹è‡³çµæœç‰©ä»¶ä¸Šçš„ç›¸å°æ‡‰å±¬æ€§`


#ğŸ§  è«‹è©¦è‘—ä»¥functional componentçš„æ–¹å¼ä¾†æ‰“é€ ä»¥ä¸‹çš„ç‹€æ…‹batching![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1661180158/blog/react/batching/handler-multiple-setState-object-example_lcz6tg.png) ->->-> `const [firstName, setFirstName] = useState('');ã€const [lastName, setLastName] = useState('');ã€setFirstName('Morgan');setLastName('Cheng');`

#ğŸ§  Reactï¼šsetFirstName('Morgan'); setLastName('Cheng'); æ˜¯å±¬æ–¼å“ªä¸€ç¨®å…ƒä»¶é–‹ç™¼æ–¹æ³•ï¼Ÿ ->->-> `functional component`

#ğŸ§  Reactï¼šsetFirstName('Morgan'); setLastName('Cheng'); è«‹å•å¦‚ä½•åšç‹€æ…‹çš„batchingï¼Ÿ ->->-> `ç•¶åŸ·è¡Œä»¥ä¸‹setStateæ™‚ï¼ŒåŸ·è¡Œå‰æœƒå…ˆè¨­å®šç©ºç‰©ä»¶ç‚ºçµæœç‹€æ…‹ç‰©ä»¶ {}ï¼Œæ¥è‘—åŸ·è¡Œç¬¬ä¸€å€‹setState-setFirstNameæ™‚ï¼Œå…¶ç‹€æ…‹ç‰©ä»¶æœƒæ˜¯{ FirstName: 'Morgan' }ï¼Œç„¶å¾Œå†åŸ·è¡Œç¬¬äºŒå€‹setState-setLastNameæ™‚ï¼Œå…¶ç‹€æ…‹ç‰©ä»¶æœƒæ˜¯{ FirstName: 'Morgan', LastName: 'Cheng' }ï¼Œåšå®Œç™¼ç¾æ²’äº†ï¼Œå°±ç›´æ¥è®“è² è²¬è™•ç†ä½‡åˆ—çš„éåŒæ­¥ä»»å‹™Xä¾†å°å¤¾å¸¶è‘—ç‰¹å®šç‹€æ…‹å€¼çš„åˆä½µå¾Œä»»å‹™é€²è¡Œç‹€æ…‹æ›´æ–°&æ¸²æŸ“`


#ğŸ§  class-based component vs. functional component ï¼š state  & setState æœ‰å“ªäº›ä¸»è¦å·®åˆ¥(ç°¡è¦å°±å¥½) ->->-> `state è¨»å†Šç¯„ç–‡ã€setState è¨»å†Šç¯„ç–‡ã€setState æ›´æ–°ç‹€æ…‹æ–¹å¼`

#ğŸ§  class-based component vs. functional component ï¼š state  & setState åœ¨ state è¨»å†Šç¯„ç–‡æ˜¯ä»€éº¼ï¼Ÿèªªæ˜æ¸…æ¥š ->->-> `class-based component çš„ å–®å€‹state è¨»å†Šå…ƒä»¶ä¸‹çš„æ‰€æœ‰ç‹€æ…‹ï¼›functional component çš„ å–®å€‹state è¨»å†Šå…ƒä»¶ä¸‹çš„ä¸€å€‹ç‰¹å®šç‹€æ…‹`


#ğŸ§  class-based component vs. functional component ï¼š state  & setState å°æ–¼åœ¨ state è¨»å†Šç¯„ç–‡ä¹‹å·®åˆ¥æ˜¯ä»€éº¼ï¼Ÿèªªæ˜æ¸…æ¥š ->->-> `class-based component çš„ å–®å€‹state è¨»å†Šå…ƒä»¶ä¸‹çš„æ‰€æœ‰ç‹€æ…‹ï¼›functional component çš„ å–®å€‹state è¨»å†Šå…ƒä»¶ä¸‹çš„ä¸€å€‹ç‰¹å®šç‹€æ…‹`


#ğŸ§  class-based component vs. functional component ï¼š state  & setState å°æ–¼åœ¨setState è¨»å†Šç¯„ç–‡ä¹‹å·®åˆ¥ æ˜¯ä»€éº¼ï¼Ÿèªªæ˜æ¸…æ¥š ->->-> `class-based component çš„ å–®å€‹setState è² è²¬å…ƒä»¶ä¸‹çš„æ‰€æœ‰ç‹€æ…‹ä¹‹æ›´æ–°ï¼›functional component çš„ å–®å€‹setState  åŸå‰‡å…ƒä»¶ä¸‹çš„ä¸€å€‹ç‰¹å®šç‹€æ…‹ä¹‹æ›´æ–°`

#ğŸ§  class-based component vs. functional component ï¼š state  & setState å°æ–¼setState æ›´æ–°ç‹€æ…‹æ–¹å¼ä¹‹å·®åˆ¥ æ˜¯ä»€éº¼ï¼Ÿ (æç¤ºå­ç‹€æ…‹ã€ä»¥ä»€éº¼ç‚ºä¸»ä¾†å»¶ä¼¸)èªªæ˜æ¸…æ¥š ->->-> `class-based component çš„ å–®å€‹setState æ›´æ–°æ–¹å¼æœƒæ˜¯å…ˆä»¥å‰ä¸€å€‹ç‹€æ…‹ç‚ºåŸºç¤ä¾†å¢åŠ é¡å¤–ç‹€æ…‹æˆç‚ºè£¡é ­çš„å­ç‹€æ…‹æˆ–è€…è¦†è“‹ç‹€æ…‹å…§çš„å­ç‹€æ…‹ï¼›functuonal component çš„ å–®å€‹setState æ›´æ–°ç‹€æ…‹æ–¹å¼æœƒæ˜¯ç›´æ¥è¦†è“‹å‰ä¸€å€‹setStateç‹€æ…‹æˆ–è€…å‰ä¸€å€‹ç‹€æ…‹`

#ğŸ§  class-based component vs. functional component ï¼š state  & setState å°æ–¼setState æ›´æ–°ç‹€æ…‹æ–¹å¼ä¹‹å·®åˆ¥ æ˜¯ä»€éº¼ï¼Ÿ èªªæ˜æ¸…æ¥š ->->-> `class-based component çš„ å–®å€‹setState æ›´æ–°æ–¹å¼æœƒæ˜¯å…ˆä»¥å‰ä¸€å€‹ç‹€æ…‹ç‚ºåŸºç¤ä¾†å¢åŠ é¡å¤–ç‹€æ…‹æˆç‚ºè£¡é ­çš„å­ç‹€æ…‹æˆ–è€…è¦†è“‹ç‹€æ…‹å…§çš„å­ç‹€æ…‹ï¼›functuonal component çš„ å–®å€‹setState æ›´æ–°ç‹€æ…‹æ–¹å¼æœƒæ˜¯ç›´æ¥è¦†è“‹å‰ä¸€å€‹setStateç‹€æ…‹æˆ–è€…å‰ä¸€å€‹ç‹€æ…‹`

---
Status: #â˜€ï¸ 
Tags:
[[React]] - [[JavaScript]]
Links:
[[class-based component çš„ç‹€æ…‹é€šå¸¸æœƒä»¥ç‰©ä»¶ä¾†å›Šæ‹¬å…ƒä»¶ä¸‹çš„æ‰€æœ‰ç‹€æ…‹ï¼Œè€Œfunctional componentçš„ç‹€æ…‹é€éuseStateå¯ä»¥å»ºç«‹å¤šå€‹ç¨ç«‹çš„ç‹€æ…‹ï¼Œè€Œéé›†ä¸­åœ¨ç‰©ä»¶ä¸Š]]
[[React batching æ˜¯å°‡Nå€‹ç‹€æ…‹æ›´æ–°æŒ‡ä»¤åˆä½µæˆä¸€å€‹æŒ‡ä»¤ä¸¦åªå¼•ç™¼ä¸€æ¬¡ç•«é¢æ¸²æŸ“]]
References:
[[@gaearonAutomaticBatchingFewer]]
[[@chengmomorganSetStateZheGeAPISheJiDaoDiZenMeYang]]