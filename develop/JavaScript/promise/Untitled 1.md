## æè¿°




### promise æ‰€çµ¦äºˆçš„inversionæ–½åŠ åœ¨inversion of control


åŸæœ¬åœ¨Promiseæ™‚ä»£ä¹‹å‰ï¼Œå‘¼å«ç«¯æ‰€å®šç¾©çš„ç¨‹å¼ç¢¼æœƒç”±å‘¼å«ç«¯ä¾†æ±ºå®šä½•æ™‚åŸ·è¡Œï¼Œä½†åœ¨å°‡callbackçµ¦äºˆç‰¹å®šä»»å‹™ä¾†è™•ç†æ™‚ï¼Œæœƒå°‡callbackè½‰ç”±ä»»å‹™åŸ·è¡Œï¼Œé€™ç­‰åŒæ–¼è®Šç›¸åœ°ï¼Œç”±ç¨‹å¼ç¢¼/ç¬¬ä¸‰æ–¹ç¨‹å¼ç¢¼ä¾†æ±ºå®šå‘¼å«ç«¯æ‰€å®šç¾©çš„ç¨‹å¼ç¢¼ä½•æ™‚åŸ·è¡Œã€‚

promise é¢å°inversion of control å•é¡Œä¹‹æ¦‚å¿µ æˆ–è€…uninversionï¼š
- promiseæ¦‚å¿µç‚ºå°‡inversion of controlçš„æ¦‚å¿µå†æ¬¡é€²è¡Œinverseï¼Œè®“å‘¼å«ç«¯ä¸»å°callbackçš„åŸ·è¡Œæ§åˆ¶
- åŸæœ¬å¯¦ä½œå‰ï¼š
	- å‘¼å«ç«¯å§”æ´¾callbackçµ¦æŒ‡å®šä»»å‹™ä¾†åŸ·è¡Œï¼Œä¸ç­‰ä»»å‹™å®Œæˆ
	- ä½¿callbackçš„åŸ·è¡Œæ¬Šç”±ä»»å‹™ä¾†æ±ºå®š
- åŸä½œå¯¦ä½œå¾Œï¼š
	- å‘¼å«ç«¯ç­‰å¾…ä»»å‹™å®Œæˆï¼Œä¸¦ç”±å‘¼å«ç«¯ä¾†åŸ·è¡Œcallback
	- ä½¿callbackçš„åŸ·è¡Œæ¬Šç”±å‘¼å«ç«¯ä¾†æ±ºå®š



### promise åœ¨ç¨‹å¼é–‹ç™¼ä¸Šæ¦‚å¿µç‚º

1. é æœŸç‰¹å®šä»»å‹™å›å‚³æ±è¥¿è‡³ç‰¹å®šç¨‹å¼æ¨¡çµ„(å‘¼å«æ–¹)
2. è—‰ç”±å‘¼å«æ–¹æ ¹æ“šå›å‚³çµæœä¾†è‡ªè¡Œè™•ç†ï¼Œå¾è€Œä¸æŠŠç¨‹å¼çš„continuationäº¤çµ¦å¦ä¸€æ–¹åŸ·è¡Œ


#### inversion of control


- Inversion of Control (æ§åˆ¶åè½‰) 
	- Inversionï¼šç‰¹å®šäº‹ç‰©åœ¨ç‰¹å®šå±¤é¢ä¸‹çš„ç›¸åæƒ…æ³ 
	- Controlï¼šèª°æ±ºå®šèª°çš„éç¨‹ã€æ–¹æ³•ï¼Œåœ¨ä¸€èˆ¬é–‹ç™¼ä¸Šï¼Œå¸¸æœƒå°‡æ±ºå®šç•¶æˆåŸ·è¡Œ/ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯èª°åŸ·è¡Œ/ä½¿ç”¨èª°çš„éç¨‹ã€æ–¹æ³• 
	- ç¸½çµèµ·ä¾†æœƒæ˜¯æŒ‡ èª°æ±ºå®šèª°çš„åè½‰ / èª°åŸ·è¡Œèª°çš„åè½‰ ï¼Œæ¯”å¦‚ç¨‹å¼å€å¡ŠAåŸ·è¡Œç¨‹å¼å€å¡ŠBï¼Œåè½‰å¾Œæœƒæ˜¯ç¨‹å¼å€å¡ŠB åŸ·è¡Œ ç¨‹å¼å€å¡Š Aã€é¡åˆ¥Aç¹¼æ‰¿(ä½¿ç”¨)é¡åˆ¥Bï¼Œåè½‰å¾Œæœƒæ˜¯é¡åˆ¥Bç¹¼æ‰¿(ä½¿ç”¨)é¡åˆ¥Aã€‚


#### promise å‘½åç·£ç”±

> the act of saying that you will certainly do something

é‡é»ï¼š
- promise æ˜¯æŒ‡ç‰¹å®šäº‹ç‰©Aè²ç¨±ç‰¹å®šäº‹ç‰©Aä¸€å®šæœƒå»åšç‰¹å®šäº‹æƒ…çš„è¡Œç‚º


## è¤‡ç¿’

#ğŸ§  JavaScriptï¼š è«‹æè¿°åœ¨Promise æ™‚ä»£å‰æ‰€ç™¼ç”Ÿçš„callbackå•é¡Œ - inversion of control->->-> `åŸæœ¬åœ¨Promiseæ™‚ä»£ä¹‹å‰ï¼Œå‘¼å«ç«¯æ‰€å®šç¾©çš„ç¨‹å¼ç¢¼æœƒç”±å‘¼å«ç«¯ä¾†æ±ºå®šä½•æ™‚åŸ·è¡Œï¼Œä½†åœ¨å°‡callbackçµ¦äºˆç‰¹å®šä»»å‹™ä¾†è™•ç†æ™‚ï¼Œæœƒå°‡callbackè½‰ç”±ä»»å‹™åŸ·è¡Œï¼Œé€™ç­‰åŒæ–¼è®Šç›¸åœ°ï¼Œç”±ç¨‹å¼ç¢¼/ç¬¬ä¸‰æ–¹ç¨‹å¼ç¢¼ä¾†æ±ºå®šå‘¼å«ç«¯æ‰€å®šç¾©çš„ç¨‹å¼ç¢¼ä½•æ™‚åŸ·è¡Œã€‚`

#ğŸ§  JavaScriptï¼š Promise é¢å°inversion of control å•é¡Œä¹‹æ¦‚å¿µ æˆ–è€…uninversionæœƒæ˜¯ä»€éº¼ï¼Ÿ->->-> `Promiseæ¦‚å¿µç‚ºå°‡inversion of controlçš„æ¦‚å¿µå†æ¬¡é€²è¡Œinverseï¼Œè®“å‘¼å«ç«¯ä¸»å°callbackçš„åŸ·è¡Œæ§åˆ¶`

#ğŸ§   JavaScriptï¼š Promise é¢å°inversion of control å•é¡Œä¹‹æ¦‚å¿µ æˆ–è€…uninversionæœƒæ˜¯inversion of controlçš„æ¦‚å¿µå†æ¬¡é€²è¡Œinverseï¼Œè®“å‘¼å«ç«¯ä¸»å°callbackçš„åŸ·è¡Œæ§åˆ¶ï¼Œé‚£éº¼å¯¦ä½œå‰å’Œå¯¦ä½œå¾Œæœƒæ˜¯ä»€éº¼æ¨¡å¼ï¼Ÿè«‹ä»¥å‘¼å«ç«¯ã€callbackã€æŒ‡å®šä»»å‹™ä¾†èªªæ˜->->-> `- åŸæœ¬å¯¦ä½œå‰ï¼š - å‘¼å«ç«¯å§”æ´¾callbackçµ¦æŒ‡å®šä»»å‹™ä¾†åŸ·è¡Œï¼Œä¸ç­‰ä»»å‹™å®Œæˆ - ä½¿callbackçš„åŸ·è¡Œæ¬Šç”±ä»»å‹™ä¾†æ±ºå®šã€‚åŸä½œå¯¦ä½œå¾Œï¼š - å‘¼å«ç«¯ç­‰å¾…ä»»å‹™å®Œæˆï¼Œä¸¦ç”±å‘¼å«ç«¯ä¾†åŸ·è¡Œcallback  - ä½¿callbackçš„åŸ·è¡Œæ¬Šç”±å‘¼å«ç«¯ä¾†æ±ºå®š`


#ğŸ§  promise å‘½åç·£ç”±æœƒæ˜¯ä»€éº¼ï¼Ÿï¼Ÿ ->->-> `promise æ˜¯æŒ‡ç‰¹å®šäº‹ç‰©Aè²ç¨±ç‰¹å®šäº‹ç‰©Aä¸€å®šæœƒå»åšç‰¹å®šäº‹æƒ…çš„è¡Œç‚º`

#ğŸ§  JavaScriptï¼š Promise é¢å°inversion of control å•é¡Œä¹‹æ¦‚å¿µ æˆ–è€…uninversionæœƒæ˜¯inversion of controlçš„æ¦‚å¿µå†æ¬¡é€²è¡Œinverseã€‚ä¸Šè¿°è‹¥ä»¥ç¨‹å¼ä¾†é–‹ç™¼çš„è©±ï¼Œå…¶å¯¦ç¾æ¦‚å¿µç‚ºä½•ï¼Ÿ->->-> `1. é æœŸç‰¹å®šä»»å‹™å›å‚³æ±è¥¿è‡³ç‰¹å®šç¨‹å¼æ¨¡çµ„(å‘¼å«æ–¹) 2. è—‰ç”±å‘¼å«æ–¹æ ¹æ“šå›å‚³çµæœä¾†è‡ªè¡Œè™•ç†ï¼Œå¾è€Œä¸æŠŠç¨‹å¼çš„continuationäº¤çµ¦å¦ä¸€æ–¹åŸ·è¡Œ`

#ğŸ§  inversion of control ä¸­çš„ inversion å’Œ control å„ç‚ºä»€éº¼æ„æ€ï¼Ÿ ->->-> `	- Inversionï¼šç‰¹å®šäº‹ç‰©åœ¨ç‰¹å®šå±¤é¢ä¸‹çš„ç›¸åæƒ…æ³  - Controlï¼šèª°æ±ºå®šèª°çš„éç¨‹ã€æ–¹æ³•ï¼Œåœ¨ä¸€èˆ¬é–‹ç™¼ä¸Šï¼Œå¸¸æœƒå°‡æ±ºå®šç•¶æˆåŸ·è¡Œ/ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯èª°åŸ·è¡Œ/ä½¿ç”¨èª°çš„éç¨‹ã€æ–¹æ³• `

#ğŸ§  inversion of control åœ¨é›»è…¦ç§‘å­¸æœƒæ˜¯æŒ‡ä»€éº¼ï¼Ÿ->->-> `ç¸½çµèµ·ä¾†æœƒæ˜¯æŒ‡ èª°æ±ºå®šèª°çš„åè½‰ / èª°åŸ·è¡Œèª°çš„åè½‰ ï¼Œæ¯”å¦‚ç¨‹å¼å€å¡ŠAåŸ·è¡Œç¨‹å¼å€å¡ŠBï¼Œåè½‰å¾Œæœƒæ˜¯ç¨‹å¼å€å¡ŠB åŸ·è¡Œ ç¨‹å¼å€å¡Š Aã€é¡åˆ¥Aç¹¼æ‰¿(ä½¿ç”¨)é¡åˆ¥Bï¼Œåè½‰å¾Œæœƒæ˜¯é¡åˆ¥Bç¹¼æ‰¿(ä½¿ç”¨)é¡åˆ¥Aã€‚`

#ğŸ§  inversion of control åœ¨é›»è…¦ç§‘å­¸æœƒæ˜¯æŒ‡æœƒæ˜¯æŒ‡ èª°æ±ºå®šèª°çš„åè½‰ / èª°åŸ·è¡Œèª°çš„åè½‰ï¼Œé‚£éº¼æœƒæ¶‰åŠå“ªäº›ç¨‹å¼èªè¨€çš„ç¯„ç–‡->->-> `OOPçš„ç¹¼æ‰¿ã€æ¨¡çµ„é–“çš„ä¾è³´æˆ–è€…èª¿ç”¨`








---
Status: #ğŸŒ± 
Tags:
[[JavaScript]]
Links:
References: