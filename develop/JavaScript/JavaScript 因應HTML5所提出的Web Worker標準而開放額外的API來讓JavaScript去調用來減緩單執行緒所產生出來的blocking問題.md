


## 描述
當然這只是建立在JavaScript本身的限制，實際上來說執行環境(如瀏覽器、Node.js)會因應HTML5所提出的Web Worker標準而開放額外的API來讓JavaScript去調用並在執行環境上建立除了主執行緒以外的執行緒，而這些執行緒會受到主執行緒來控制，並且不能夠操作DOM節點，這樣子的提供不僅增加效能，也保證DOM節點會是單個執行緒(也就是主執行緒)來執行。

#### 瀏覽器的JavaScript 

瀏覽器會有個Renderer Process，主要是渲染引擎的執行實體，負責解析同一個網頁下的HTML、CSS並計算每個網頁元素的位置以及實際上的繪製、執行JavaScript程式碼，然而實際執行單位會是以執行緒為主，所以會有個主要執行緒：
	- 解析同一個網頁下的HTML、CSS並計算每個網頁元素的位置並生成對應的繪製指令給其他同為Process下的Thread進行繪製
	- 執行JavaScript程式碼
	- Main Thread的數量本身會是單個執行緒


#### JavaScript 是單執行緒，在電腦系統意味著？
由於JavaScript 本身是單執行緒，通常電腦系統會以執行緒為一個執行單位來給予CPU資源執行，這說明了若有多個任務(意旨為要給電腦執行的事情)來放進執行緒執行的話，勢必這些任務得輪流放進執行緒執行：
 - 執行方式會是以一個佇列來存放每一個要執行的任務，採用FIFO，誰先進去佇列，誰就先使用執行緒，執行完才輪下一個任務


#### JavaScript 採用 web worker 標準的原因

由於多個任務要輪著使用JavaScript的單個執行緒，所以容易因為單個任務執行而阻塞其他任務，比如一個向資料庫系統發送請求的任務A跟一些任務，當執行任務A，勢必任務A一旦發送請求，就會等待其結果，而這樣等待勢必會讓其他任務都必須等待任務A才能夠執行，因而任務A阻塞其他任務執行

為了減緩阻塞情形，而讓JavaScript 採用web worker的標準，其標準是主要單個執行緒去產生額外的執行緒去減緩單執行緒所引發的blocking 問題

另外為了確保產生出來的執行緒不會違反JavaScript 設計的初衷-盡可能減緩DOM節點上的race condition，每一個產生出來的執行緒會受到主要執行緒管理和控制，讓每一次可能會對DOM節點進行改變的操作都給主執行緒操作


## 複習
#🧠 JavaScript 是單執行緒，在電腦系統意味著多個任務要如何執行？ (提示：看啊，前面只有一個馬桶，但我們有七個人，要如何上啊)->->-> `由於JavaScript 本身是單執行緒，通常電腦系統會以執行緒為一個執行單位來給予CPU資源執行，這說明了若有多個任務(意旨為要給電腦執行的事情)來放進執行緒執行的話，勢必這些任務得輪流放進執行緒執行。`
<!--SR:!2022-07-22,20,250-->

#🧠 JavaScript 是單執行緒，多個任務要輪著使用單執行緒的話，會是如何執行？(提示：從獲取執行至釋放)->->-> `執行方式會是以一個佇列來存放每一個要執行的任務，採用FIFO，誰先進去佇列，誰就先使用執行緒，執行完才輪下一個任務`
<!--SR:!2022-07-09,6,210-->


#🧠 JavaScript 本身是單執行緒，會不會有任務A阻塞其他任務的情形 ->->-> `會，這是因為JavaScript只有一個執行緒能夠執行任務，若有多個任務，勢必得輪流使用一個執行緒，一個任務必須要等待前一個任務執行完畢才能被執行，可若一個任務A執行很久，那麼任務A就會阻塞其他任務`
<!--SR:!2022-07-24,22,250-->


#🧠 JavaScript 為了解決單執行緒所衍生出來的阻塞情形，而採取什麼樣的做法? (提示：一個我不夠用，那就用兩個我吧) ->->-> `採取HTML5 的web worker標準，其標準是主要單個執行緒去產生額外的執行緒來減緩blocking的問題`
<!--SR:!2022-08-01,28,250-->

#🧠 JavaScript 的單個主執行緒若採用web worker標準的話，會如何執行一個會向資料庫索要特定資料的任務，來讓它不阻塞其他任務？ ->->-> `單個主執行緒會產生額外的執行緒去負責向資料庫發送請求、等待、處理，產生完的主執行緒就做其他任務。`
<!--SR:!2022-07-29,26,250-->

#🧠 JavaScript 採取了web worker標準會不會有DOM節點 race codition的危害可能，若沒特別設定什麼限制的話，比如繼續讓多的執行緒去存取DOM節點 ->->-> `有可能`
<!--SR:!2022-07-30,26,250-->


#🧠 JavaScript 採取了web worker標準，如何確保產生出來的執行緒能夠盡可能減緩DOM節點上的race condition？ (先說概念，別說細節)->->-> `由主執行緒來管理由它產生出來的執行緒，當它們要對DOM節點進行操作時，就改由主執行緒來負責執行`


---
Status: #🌱 
Tags:
[[JavaScript]]
Links:
[[JavaScript之所以為直譯語言，是原本就為了盡可能讓開發者快速進行網頁上開發好拓展網景瀏覽器的市場，同時也盡可能減少編譯時所帶來的額外成本]]
[[JavaScript 因應HTML5所提出的Web Worker標準而開放額外的API來讓JavaScript去調用來減緩單執行緒所產生出來的blocking問題]]
References: