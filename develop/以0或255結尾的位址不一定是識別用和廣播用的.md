
## 描述

引用[[@wikidataIPv42022]]所描述的誤解：以0結尾的IP就一定是識別用的IP，以255結尾的IP就一定是廣播[[一個IP群組上一定會有負責用來識別整個IP群組以及廣播位址]]用的，且這兩者都因為識別或者廣播用途而無法分配給其他主機

> 一個常見的誤解是以0或255結尾的位址永遠不能分配給主機：這僅在子網路遮罩至少24位元長度時（舊的C類位址，或CIDR[[CIDR 解決分類定址無法彈性分配適當數量的IP給使用者]]中的/24到/32）才成立。

> 在有類別的編址[[分類定址是將IP分個群組來重新定義使用者能用的IP群組是什麼]]中，只有三種可能的子網路遮罩[[網路遮罩是用來判斷目前IP所屬的子網域是什麼]]：A類：255.0.0.0，B類：255.255.0.0，C類：255.255.255.0。如，在子網路192.168.5.0/255.255.255.0（即192.168.5.0/24）中，網路識別碼192.168.5.0用來表示整個子網路，所以它不能用來標識子網路上的某個特定主機。

> 允許封包發往子網路上的所有裝置。一般情況下，廣播位址是藉由子網路遮罩的位元一補數並和網路識別碼執行 OR 的位元運算得到，即廣播位址是子網路中的最後一個位址。在上述例子中，廣播位址是192.168.5.255，所以為了避免歧義，這個位址也不能被分配給主機。在A、B和C類網路中，廣播位址總是以255結尾。

 > 但是，這並不意味著每個以255結尾的位址都不能用做主機位址。比如，在B類子網路192.168.0.0/255.255.0.0（即192.168.0.0/16）中，廣播位址是192.168.255.255（主機位全1）。在這種情況下，儘管可能帶來誤解，但192.168.1.255、192.168.2.255等位址可以被分配給主機。同理，192.168.0.0作為網路識別碼不能被分配，但192.168.1.0、192.168.2.0等都是可以的。

> 隨著CIDR的到來，廣播位址不一定總是以255結尾（廣播位址是指主機位都為1的位址，255隻是其中一種情況）。比如，子網路203.0.113.16/28的廣播位址是203.0.113.31。過程如下：

```
網路：203.0.113.16

遮罩：255.255.255.240

遮罩一補數：0.0.0.15

OR操作：

00010000 | 00001111 = 00011111 =31
```
> 一般情況下，子網路的第一個和最後一個位址分別被作為網路識別碼和廣播位址，任何其它位址都可以被分配給其上的主機。

重點：
- 識別用的IP和廣播用的IP怕處理上有歧義，所以不會直接被分配給主機
- 一個常見的誤解是以0或255結尾的位址永遠不能分配給主機，這論述只在遮罩為24位皆為1的情況，換言之，就是未使用CIDR的 C類IP群組 或者CIDR /24 /32
- 若考量到A類IP和B類IP，並不是所有0結尾的IP皆為識別用的IP，如

```
192.168.0.0/255.255.0.0，以192.168.x.x為主的子網域

1. 192.168.0.0 => 192.168.x.x子網域的識別用IP
2. 192.168.1.0 => 可被分配主機
3. 192.168.2.0 => 可被分配主機
```
- 若考量到A類IP和B類IP，並不是所有255結尾的IP皆為廣播用的IP，如
```
192.168.0.0/255.255.0.0，以192.168.x.x為主的子網域

1. 192.168.255.255 => 192.168.x.x子網域的廣播用IP
2. 192.168.0.255 => 可被分配主機
3. 192.168.1.255 => 可被分配主機
```


- 計算子網域的廣播用IP公式為
```
識別用的IP OR計算 遮罩(補數)
例子：
網路子網路為:203.0.113.16/28，識別IP為203.0.113.16
其IP範圍為:203.0.113.16 - 203.0.113.31
而遮罩會是：11111111.11111111.11111111.11110000
遮罩補數會: 00000000.00000000.00000000.00001111

廣播用的IP: 子網路識別IP + 遮罩補數 = 203.0.113.31

在這裡只算到最後8位
0001 0000
(or)
0000 1111
=>
0001 1111
```





## 複習

#🧠 為啥以0或255結尾的位址不一定是識別用和廣播用的？ ->->-> `這論述只在遮罩為24位皆為1的情況，換言之，就是未使用CIDR的 C類IP群組 或者CIDR /24 /32，所以在其他子網域的識別用IP和廣播用的IP不一定會是`
<!--SR:!2022-05-21,3,250-->

---
Status: #🌱 
Tags:
[[Network]]
Links:
[[分類定址是將IP分個群組來重新定義使用者能用的IP群組是什麼]]
[[CIDR 解決分類定址無法彈性分配適當數量的IP給使用者]] 
[[網路遮罩是用來判斷目前IP所屬的子網域是什麼]]
[[一個IP群組上一定會有負責用來識別整個IP群組以及廣播位址]]
References:
[[@wikidataIPv42022]]