

## æè¿°



[[@wikidataACID2022]] æ‰€æè¿°çš„ï¼š
> Consistency ensures that a transaction can only bring the database from one valid state to another, maintaining database invariants: any data written to the database must be valid according to all defined rules, including constraints, cascades, triggers, and any combination thereof. This prevents database corruption by an illegal transaction, but does not guarantee that a transaction is _correct_. 


é‡é»ï¼š
- Consistency æ˜¯æŒ‡åªè¦åŸ·è¡Œå”è­°ä¸Šçš„æŒ‡å®šä»»å‹™ä¹‹å¾Œéƒ½èƒ½ç”¢ç”ŸåŒå€‹çµæœï¼Œå…¶çµæœç‚ºå…¶è³‡æ–™åº«ä¸Šçš„è³‡æ–™éƒ½æœƒæ˜¯ç¶­æŒè‘—åˆæ³•çš„ç‰¹æ€§
	- åˆæ³•æ˜¯æŒ‡æ»¿è¶³è³‡æ–™åº«å°æ–¼è³‡æ–™ä¸Šçš„è¦å‰‡
- Consistency æå‡ºç›®çš„æ˜¯ç‚ºäº†ç¢ºä¿å”è­°ä¸Šçš„æŒ‡å®šä»»å‹™ä¸ç ´å£è³‡æ–™åº«æœ¬èº«çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ï¼Œä½†ä¸ä¸€å®šä¿è­‰è‘—æŒ‡å®šä»»å‹™çš„çµæœéƒ½æœƒå¦‚åŒé–‹ç™¼è€…æ‰€è¦é”æˆçš„ç›®æ¨™
>  This prevents database corruption by an illegal transaction, but does not guarantee that a transaction is _correct_.
-  Consistency ä¸ä¸€å®šå°±å¯¦ç¾åœ¨æ¯å€‹å”è­°ï¼Œå…·é«”é‚„è¦çœ‹è³‡æ–™åº«ç³»çµ±æ˜¯å¦æ”¯æ´å’Œé–‹ç™¼è€…æ˜¯å¦æ·»åŠ ç‰¹å®šèªæ³•

### consistency å‘½åç·£ç”±

[[@cambridgedictionaryConsistencyTranslateTraditional]] æ‰€æè¿°çš„ï¼š
> the quality of always behaving or performing in a similar way, or of always happening in a similar way

consistency ä¸­æ–‡ç¿»è­¯ç‚ºä¸€è‡´æ€§
[[@guojiajiaoyuyanjiuyuanGuoJiaJiaoYuYanJiuYuanShuangYuCiHuiXueShuMingCiJiCiShuZiXunWang]]æ‰€æè¿°ï¼š
> #### ç•¶æŸå€‹ç¾è±¡ç™¼ç”Ÿå¾Œï¼Œå¦‚æœå†æ¬¡æä¾›èˆ‡è©²ç¾è±¡ç™¼ç”Ÿæ™‚ç›¸å½·çš„æ¢ä»¶èˆ‡æƒ…å¢ƒæ™‚ï¼Œé¡ä¼¼çš„ç¾è±¡ä¹Ÿæœƒå†åº¦ç™¼ç”Ÿ



é‡é»ï¼š
- ç¬¬ä¸€éƒ¨åˆ†æŒ‡çš„æ˜¯å¤šå€‹ä»¥åŒå€‹æƒ…å¢ƒå’Œç‹€æ…‹ç™¼ç”Ÿæˆ–è€…é¡ä¼¼çš„äº‹ä»¶æˆ–è€…å¤šå€‹åŸ·è¡ŒåŒå€‹ä»»å‹™å…§å®¹æˆ–è€…é¡ä¼¼å…§å®¹çš„ä»»å‹™ä¹‹æ•ˆæœä¹‹é–“çš„ç›¸ä¼¼æ€§ï¼Œè‹¥é€™äº›é‡è¤‡ç™¼ç”Ÿçš„ç™¼ç”Ÿçš„çµæœè¿‘ä¼¼çš„è©±ï¼Œä»£è¡¨ç›¸ä¼¼åº¦é«˜ï¼›è‹¥é€™äº›åŸ·è¡Œå¤šå€‹åŒå€‹ä»»å‹™å…§å®¹çš„ä»»å‹™ï¼Œå…¶çµæœæœƒæ˜¯ä¸€æ¨£çš„è©±ï¼Œé‚£éº¼ç›¸ä¼¼åº¦é«˜ï¼ŒåŒæ™‚ä»£è¡¨è‘—ä¸€è‡´æ€§ä¹Ÿè·Ÿè‘—é«˜
- ç¬¬äºŒéƒ¨åˆ†å‰‡æ˜¯ä»¥consistency ç¿»éä¾†çš„ä¸€è‡´æ€§ä¾†è§£é‡‹å…¶æ„æ€ï¼Œä½†å…¶ä¸€è‡´æ€§åŸæ–‡æ˜¯ Uniformity
- ä¸€è‡´æ€§åœ¨è³‡æ–™åº«çš„Transactionæ˜¯å½¢å®¹åŸ·è¡Œtransaction å¾Œéƒ½èƒ½ç”¢ç”ŸæŸå€‹çµæœ -å…¶çµæœå°±æ˜¯è³‡æ–™åº«è¡¨æ ¼éƒ½èƒ½ä¿æŒåœ¨ä¸€è‡´æ€§ã€å®Œæ•´æ€§çš„

## è¤‡ç¿’
#ğŸ§  Consistency åŸæ„ç‚ºä½•ï¼Ÿ (å¤šå€‹ç™¼ç”Ÿäº‹ä»¶ï¼Ÿæ˜¯å¦ä¸€æ¨£ï¼Ÿå¦‚ä½•ä¸€æ¨£ï¼Œå…¶çµæœç›¸ä¼¼åº¦ç‚ºä½•ï¼Ÿ) ->->-> `å¤šå€‹ä»¥åŒå€‹æƒ…å¢ƒå’Œç‹€æ…‹ç™¼ç”Ÿæˆ–è€…é¡ä¼¼çš„äº‹ä»¶æˆ–è€…å¤šå€‹åŸ·è¡ŒåŒå€‹ä»»å‹™å…§å®¹æˆ–è€…é¡ä¼¼å…§å®¹çš„ä»»å‹™ä¹‹æ•ˆæœä¹‹é–“çš„ç›¸ä¼¼æ€§ï¼Œè‹¥é€™äº›é‡è¤‡ç™¼ç”Ÿçš„ç™¼ç”Ÿçš„çµæœè¿‘ä¼¼çš„è©±ï¼Œä»£è¡¨ç›¸ä¼¼åº¦é«˜ï¼›è‹¥é€™äº›åŸ·è¡Œå¤šå€‹åŒå€‹ä»»å‹™å…§å®¹çš„ä»»å‹™ï¼Œå…¶çµæœæœƒæ˜¯ä¸€æ¨£çš„è©±ï¼Œé‚£éº¼ç›¸ä¼¼åº¦é«˜ï¼ŒåŒæ™‚ä»£è¡¨è‘—ä¸€è‡´æ€§ä¹Ÿè·Ÿè‘—é«˜`


#ğŸ§  Consistency åœ¨ Transaction æ‰€è¦è¡¨é”ä»€éº¼ï¼Ÿ (è«‹å¼·èª¿åŒå€‹çµæœ)->->-> `Consistency æ˜¯æŒ‡åªè¦åŸ·è¡Œå”è­°ä¸Šçš„æŒ‡å®šä»»å‹™ä¹‹å¾Œéƒ½èƒ½ç”¢ç”ŸåŒå€‹çµæœï¼Œå…¶çµæœç‚ºå…¶è³‡æ–™åº«ä¸Šçš„è³‡æ–™éƒ½æœƒæ˜¯ç¶­æŒè‘—åˆæ³•çš„ç‰¹æ€§æ€§`


#ğŸ§  Consistency åŠ å…¥è‡³Transaction æ˜¯ç‚ºäº†ä»€éº¼ï¼Ÿ ->->-> `Consistency æ˜¯æŒ‡åªè¦åŸ·è¡Œå”è­°ä¸Šçš„æŒ‡å®šä»»å‹™ä¹‹å¾Œéƒ½èƒ½ç”¢ç”ŸåŒå€‹çµæœï¼Œå…¶çµæœç‚ºå…¶è³‡æ–™åº«ä¸Šçš„è³‡æ–™éƒ½æœƒæ˜¯ç¶­æŒè‘—åˆæ³•çš„ç‰¹æ€§`



#ğŸ§  Consistency åŠ å…¥è‡³Transactionèƒ½å¤ ç¢ºä¿transactionåŸ·è¡Œæ­£ç¢ºå—ï¼Ÿ æˆ–è€…ç¢ºä¿å¦‚åŒé–‹ç™¼è€…é‚£æ¨£é æœŸçš„çµæœå—ï¼Ÿ ->->-> `ä¸¦ä¸èƒ½ä¿è­‰ï¼Œåªèƒ½ä¿è­‰Transactionè¢«åŸ·è¡Œä¸¦ä¸æœƒé•åè³‡æ–™åº«ä¸Šçš„è³‡æ–™è¦å‰‡ï¼Œä¸ä¸€å®šä¿è­‰è‘—æŒ‡å®šä»»å‹™çš„çµæœéƒ½æœƒå¦‚åŒé–‹ç™¼è€…æ‰€è¦é”æˆçš„ç›®æ¨™`


#ğŸ§  DB: æ¯ä¸€å€‹Transactionéƒ½ä¸€å®šæœ‰consistencyé€™ç‰¹æ€§å—ï¼Ÿ ->->-> `Consistency ä¸ä¸€å®šå°±å¯¦ç¾åœ¨æ¯å€‹å”è­°ï¼Œå…·é«”é‚„è¦çœ‹è³‡æ–™åº«ç³»çµ±æ˜¯å¦æ”¯æ´å’Œé–‹ç™¼è€…æ˜¯å¦æ·»åŠ ç‰¹å®šèªæ³•`
<!--SR:!2023-04-28,190,250-->


#ğŸ§  Consistency æ˜¯æŒ‡åªè¦åŸ·è¡Œå”è­°ä¸Šçš„æŒ‡å®šä»»å‹™ä¹‹å¾Œéƒ½èƒ½ç”¢ç”ŸåŒå€‹çµæœï¼Œå…¶çµæœç‚ºå…¶è³‡æ–™åº«ä¸Šçš„è³‡æ–™éƒ½æœƒæ˜¯ç¶­æŒè‘—åˆæ³•çš„ç‰¹æ€§ï¼Œå…¶ä¸­åˆæ³•æ˜¯æŒ‡ä»€éº¼ï¼Ÿ ->->-> `åˆæ³•æ˜¯æŒ‡æ»¿è¶³è³‡æ–™åº«å°æ–¼è³‡æ–™ä¸Šçš„è¦å‰‡`
<!--SR:!2022-11-12,3,250-->


---
Status: #ğŸŒ± 
Tags:
[[Database]] - [[Transaction]]
Links:
[[Transaction - Atomicity æ˜¯æŒ‡å”è­°ä¸Šæ‰€æœ‰è¢«åŸ·è¡Œçš„ä»»å‹™ç›´æ¥éƒ½è¦–ç‚ºä¸€å€‹ä¸å¯åˆ†å‰²çš„åŸå­ï¼Œä»»ä½•ä¸€å€‹ä»»å‹™ä¸èƒ½å–®ç¨è¢«å®Œæˆï¼Œåªæœ‰å…¨éƒ¨ä»»å‹™å®Œæˆæˆ–è€…å…¨éƒ¨ä»»å‹™ä¸å®Œæˆ]]
[[Database transaction æ˜¯æŒ‡è³‡æ–™åº«è¦æ›¿ç‰¹å®šå°è±¡Aæä¾›ç‰¹å®šè³‡æ–™çš„å­˜å–æ‰€è¦æ»¿è¶³çš„å”è­°ï¼Œå…¶å”è­°å…§å®¹ç‚ºä¸€äº›è³‡æ–™åº«ç³»çµ±æ‰€è¦åŸ·è¡Œçš„ä»£ç¢¼å’Œé™„åŠ åŸ·è¡Œè¦å‰‡]]
References:
[[@wikidataACID2022]][[@guojiajiaoyuyanjiuyuanGuoJiaJiaoYuYanJiuYuanShuangYuCiHuiXueShuMingCiJiCiShuZiXunWang]]
[[@cambridgedictionaryConsistencyTranslateTraditional]]