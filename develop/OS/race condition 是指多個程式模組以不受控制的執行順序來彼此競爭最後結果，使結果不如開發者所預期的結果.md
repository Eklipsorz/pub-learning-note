
## æè¿°
[[@wikidataJingZhengWeiHai2022]] æè¿°
> **ç«¶çˆ­å±å®³**ï¼ˆrace hazardï¼‰åˆå**ç«¶æ…‹æ¢ä»¶**ã€**ç«¶çˆ­æ¢ä»¶**ï¼ˆrace conditionï¼‰ï¼Œå®ƒæ—¨åœ¨æè¿°ä¸€å€‹ç³»çµ±æˆ–è€…é€²ç¨‹çš„è¼¸å‡ºä¾è³´æ–¼ä¸å—æ§åˆ¶çš„äº‹ä»¶å‡ºç¾é †åºæˆ–è€…å‡ºç¾æ™‚æ©Ÿã€‚æ­¤è©æºè‡ªæ–¼å…©å€‹è¨Šè™Ÿè©¦è‘—å½¼æ­¤ç«¶çˆ­ï¼Œä¾†å½±éŸ¿èª°å…ˆè¼¸å‡ºã€‚

> èˆ‰ä¾‹ä¾†èªªï¼Œå¦‚æœé›»è…¦ä¸­çš„å…©å€‹è¡Œç¨‹åŒæ™‚è©¦åœ–ä¿®æ”¹ä¸€å€‹å…±äº«è¨˜æ†¶é«”çš„å…§å®¹ï¼Œåœ¨æ²’æœ‰ä¸¦è¡Œæ§åˆ¶çš„æƒ…æ³ä¸‹ï¼Œæœ€å¾Œçš„çµæœä¾è³´æ–¼å…©å€‹è¡Œç¨‹çš„åŸ·è¡Œé †åºèˆ‡æ™‚æ©Ÿã€‚è€Œä¸”å¦‚æœç™¼ç”Ÿäº†ä¸¦è¡Œå­˜å–è¡çªï¼Œå‰‡æœ€å¾Œçš„çµæœæ˜¯ä¸æ­£ç¢ºçš„ã€‚
> 
> ç«¶çˆ­å±å®³å¸¸è¦‹æ–¼ä¸è‰¯è¨­è¨ˆçš„é›»å­ç³»çµ±ï¼Œå°¤å…¶æ˜¯é‚è¼¯é›»è·¯ã€‚ä½†å®ƒå€‘åœ¨è»Ÿé«”ä¸­ä¹Ÿæ¯”è¼ƒå¸¸è¦‹ï¼Œå°¤å…¶æ˜¯æœ‰æ¡ç”¨å¤šåŸ·è¡Œç·’æŠ€è¡“çš„è»Ÿé«”ã€‚

[[@RaceCondition2022]] æè¿°ï¼š
> A **race condition** or **race hazard** is the condition of an electronics, software, or other system where the system's substantive behavior is dependent on the sequence or timing of other uncontrollable events. It becomes a bug when one or more of the possible behaviors is undesirable.

[[@techtargetWhatRaceCondition]] æè¿°ï¼š
> A race condition is an undesirable situation that occurs when a device or system attempts to perform two or more operations at the same time, but because of the nature of the device or system, the operations must be done in the proper sequence to be done correctly.




é‡é»ï¼š
- race condition æ˜¯æŒ‡å¤šå€‹ç¨‹å¼æ¨¡çµ„ä»¥ä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºä¾†å½¼æ­¤ç«¶çˆ­è‘—æ”¹è®Šæœ€å¾Œçµæœçš„ç‹€æ…‹ï¼Œä½¿çµæœä¸å¦‚é–‹ç™¼è€…æ‰€é æœŸçš„çµæœï¼Œä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºåŒ…å«äº†ä»¥ä¸‹ï¼š
	- å¤šå€‹ç¨‹å¼æ¨¡çµ„çš„åŒæ™‚åŸ·è¡Œï¼šç”±æ–¼åŒæ™‚åŸ·è¡Œè‘—å¤šå€‹ç¨‹å¼æ¨¡çµ„ï¼Œå°è‡´ç³»çµ±å’Œé–‹ç™¼è€…é›£ä»¥çŸ¥é“å…¶åŸ·è¡Œé †åºæ˜¯å¦‚ä½•ï¼Œä½¿å…¶å¾ˆé›£é€éæ§åˆ¶å…¶é †åºä¾†ä½¿çµæœå¦‚åŒé–‹ç™¼è€…æ‰€æƒ³è¦çš„çµæœ
- ç‚ºä»€éº¼å¤šå€‹ç¨‹å¼æ¨¡çµ„çš„åºåˆ—ç„¡æ³•æ§‹æˆä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºï¼Ÿ
	- ç•¶å¤šå€‹ç¨‹å¼æ¨¡çµ„æ’éšŠè‘—å»åŸ·è¡Œæ™‚ï¼Œè‚¯å®šåªæœ‰å°‘éƒ¨åˆ†æˆ–è€…é‚„æ²’æœ‰ç¨‹å¼æ¨¡çµ„å»è¢«åŸ·è¡Œï¼Œè€Œå¤§éƒ¨åˆ†ç¨‹å¼æ¨¡çµ„å°±å·²ç¶“åœ¨éšŠä¼ç­‰å€™åŸ·è¡Œï¼Œå…¶éšŠä¼çµæ§‹æœ¬èº«å°±å¯ä»¥è®“ç³»çµ±å’Œé–‹ç™¼è€…å…ˆè¢«äº†è§£ï¼Œå› æ­¤å¯ä»¥å…ˆèª¿æ•´éšŠä¼ä¸­çš„ç¨‹å¼æ¨¡çµ„ä½¿å®ƒå€‘èƒ½è®“çµæœå¦‚åŒé–‹ç™¼è€…æ‰€æƒ³è¦çš„çµæœ
- é€šå¸¸é€™äº›ç¨‹å¼æ¨¡çµ„èƒ½å¤ å½±éŸ¿æœ€å¾Œçµæœæ–¹å¼ï¼š
	- ç«¶çˆ­å­˜å–è‘—åŒä¸€ä»½è³‡æ–™ã€è³‡æºï¼Œè€Œé€™äº›è³‡æ–™ã€è³‡æºå°‡æœƒå½±éŸ¿çµæœ


### ç‚ºä»€éº¼å¤šå€‹ç¨‹å¼æ¨¡çµ„çš„åºåˆ—ç„¡æ³•æ§‹æˆä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºï¼Ÿ
ç•¶å¤šå€‹ç¨‹å¼æ¨¡çµ„æ’éšŠè‘—å»åŸ·è¡Œæ™‚ï¼Œè‚¯å®šåªæœ‰å°‘éƒ¨åˆ†æˆ–è€…é‚„æ²’æœ‰ç¨‹å¼æ¨¡çµ„å»è¢«åŸ·è¡Œï¼Œè€Œå¤§éƒ¨åˆ†ç¨‹å¼æ¨¡çµ„å°±å·²ç¶“åœ¨éšŠä¼ç­‰å€™åŸ·è¡Œï¼Œå…¶éšŠä¼çµæ§‹æœ¬èº«å°±å¯ä»¥è®“ç³»çµ±å’Œé–‹ç™¼è€…å…ˆè¢«äº†è§£ï¼Œå› æ­¤å¯ä»¥å…ˆèª¿æ•´éšŠä¼ä¸­çš„ç¨‹å¼æ¨¡çµ„ä½¿å®ƒå€‘èƒ½è®“çµæœå¦‚åŒé–‹ç™¼è€…æ‰€æƒ³è¦çš„çµæœ

### race condition å‘½åç·£ç”±
race åŸæ„ç‚ºç«¶çˆ­ï¼Œcondition æ˜¯æŒ‡ç‹€æ…‹ã€ç‹€æ³ï¼Œåœ¨é›»è…¦ç§‘å­¸æ˜¯æŒ‡å¤šå€‹ç¨‹å¼æ¨¡çµ„åœ¨å½¼æ­¤ç«¶çˆ­èª°èƒ½å¤ å½±éŸ¿æœ€å¾Œçµæœ
- è‹¥æ˜¯åºåˆ—åŸ·è¡Œï¼Œé‚£å°±æ˜¯å¤šå€‹ç¨‹å¼æ¨¡çµ„æ’éšŠå½±éŸ¿æœ€å¾Œçµæœ
- è‹¥æ˜¯ä¸¦åˆ—åŸ·è¡Œï¼Œé‚£å°±æ˜¯å¤šå€‹ç¨‹å¼æ¨¡çµ„åŒæ™‚åŸ·è¡Œï¼Œä¸¦ä¸”ä¸æ’éšŠï¼Œç›´æ¥èª°å…ˆæ¶åˆ°èª°å°±å…ˆå½±éŸ¿
## è¤‡ç¿’


#ğŸ§  race condition æ˜¯æŒ‡ä»€éº¼ï¼Ÿ ->->-> `æ˜¯æŒ‡å¤šå€‹ç¨‹å¼æ¨¡çµ„ä»¥ä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºä¾†å½¼æ­¤ç«¶çˆ­è‘—æ”¹è®Šæœ€å¾Œçµæœçš„ç‹€æ…‹ï¼Œä½¿çµæœä¸å¦‚é–‹ç™¼è€…æ‰€é æœŸçš„çµæœï¼Œä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºåŒ…å«äº†`

#ğŸ§  race conditionï¼šç‚ºä»€éº¼å¤šå€‹ç¨‹å¼æ¨¡çµ„çš„åºåˆ—ç„¡æ³•æ§‹æˆä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åº ->->-> `ç•¶å¤šå€‹ç¨‹å¼æ¨¡çµ„æ’éšŠè‘—å»åŸ·è¡Œæ™‚ï¼Œè‚¯å®šåªæœ‰å°‘éƒ¨åˆ†æˆ–è€…é‚„æ²’æœ‰ç¨‹å¼æ¨¡çµ„å»è¢«åŸ·è¡Œï¼Œè€Œå¤§éƒ¨åˆ†ç¨‹å¼æ¨¡çµ„å°±å·²ç¶“åœ¨éšŠä¼ç­‰å€™åŸ·è¡Œï¼Œå…¶éšŠä¼çµæ§‹æœ¬èº«å°±å¯ä»¥è®“ç³»çµ±å’Œé–‹ç™¼è€…å…ˆè¢«äº†è§£ï¼Œå› æ­¤å¯ä»¥å…ˆèª¿æ•´éšŠä¼ä¸­çš„ç¨‹å¼æ¨¡çµ„ä½¿å®ƒå€‘èƒ½è®“çµæœå¦‚åŒé–‹ç™¼è€…æ‰€æƒ³è¦çš„çµæœ`


#ğŸ§  race condition æ˜¯æŒ‡å¤šå€‹ç¨‹å¼æ¨¡çµ„ä»¥ä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºä¾†å½¼æ­¤ç«¶çˆ­è‘—æœ€å¾Œçš„çµæœï¼Œä½¿çµæœä¸å¦‚é–‹ç™¼è€…æ‰€é æœŸçš„çµæœï¼Œä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºåŒ…å«äº†å“ªäº›ï¼Ÿ ç‚ºä»€éº¼ï¼Ÿ ->->-> `å¤šå€‹ç¨‹å¼æ¨¡çµ„çš„åŒæ™‚åŸ·è¡Œï¼šç”±æ–¼åŒæ™‚åŸ·è¡Œè‘—å¤šå€‹ç¨‹å¼æ¨¡çµ„ï¼Œå°è‡´ç³»çµ±å’Œé–‹ç™¼è€…é›£ä»¥çŸ¥é“å…¶åŸ·è¡Œé †åºæ˜¯å¦‚ä½•ï¼Œå¾ˆé›£é€éæ§åˆ¶å…¶é †åºä¾†ä½¿çµæœå¦‚åŒé–‹ç™¼è€…æ‰€æƒ³è¦çš„çµæœ`

#ğŸ§  race conditionï¼šç‚ºä»€éº¼å¤šå€‹ç¨‹å¼æ¨¡çµ„èƒ½å¤ å½±éŸ¿æœ€å¾Œçµæœï¼Œé€šå¸¸æœƒæ˜¯ä»€éº¼ï¼Ÿ(è³‡æ–™æœƒå½±éŸ¿çµæœå—) ->->-> `å¤šå€‹ç¨‹å¼æ¨¡çµ„éƒ½ç«¶çˆ­å­˜å–è‘—åŒä¸€ä»½è³‡æ–™ã€è³‡æºï¼Œè€Œé€™äº›è³‡æ–™ã€è³‡æºå°‡æœƒå½±éŸ¿çµæœ`


#ğŸ§   race conditionï¼šå¤šå€‹ç¨‹å¼æ¨¡çµ„èƒ½å¤ å½±éŸ¿æœ€å¾Œçµæœï¼Œè‹¥å¤šå€‹ç¨‹å¼ä¸¦åˆ—åŸ·è¡Œçš„è©±ï¼Œæœƒæ˜¯å¦‚ä½•åŸ·è¡Œï¼Ÿ->->-> `é‚£å°±æ˜¯å¤šå€‹ç¨‹å¼æ¨¡çµ„åŒæ™‚åŸ·è¡Œï¼Œä¸¦ä¸”ä¸æ’éšŠï¼Œç›´æ¥èª°å…ˆæ¶åˆ°èª°å°±å…ˆå½±éŸ¿`


#ğŸ§  race condition å‘½åç·£ç”± ->->-> `race åŸæ„ç‚ºç«¶çˆ­ï¼Œcondition æ˜¯æŒ‡ç‹€æ…‹ã€ç‹€æ³ï¼Œåœ¨é›»è…¦ç§‘å­¸æ˜¯æŒ‡å¤šå€‹ç¨‹å¼æ¨¡çµ„åœ¨å½¼æ­¤ç«¶çˆ­èª°èƒ½å¤ å½±éŸ¿æœ€å¾Œçµæœ`

---
Status: #â˜€ï¸ 
Tags:
[[Operating System]]
Links:
References:
[[@techtargetWhatRaceCondition]]
[[@RaceCondition2022]]
[[@wikidataJingZhengWeiHai2022]]
