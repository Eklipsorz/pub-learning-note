
## æè¿°
[[@wikidataJingZhengWeiHai2022]] æè¿°
> **ç«¶çˆ­å±å®³**ï¼ˆrace hazardï¼‰åˆå**ç«¶æ…‹æ¢ä»¶**ã€**ç«¶çˆ­æ¢ä»¶**ï¼ˆrace conditionï¼‰ï¼Œå®ƒæ—¨åœ¨æè¿°ä¸€å€‹ç³»çµ±æˆ–è€…é€²ç¨‹çš„è¼¸å‡ºä¾è³´æ–¼ä¸å—æ§åˆ¶çš„äº‹ä»¶å‡ºç¾é †åºæˆ–è€…å‡ºç¾æ™‚æ©Ÿã€‚æ­¤è©æºè‡ªæ–¼å…©å€‹è¨Šè™Ÿè©¦è‘—å½¼æ­¤ç«¶çˆ­ï¼Œä¾†å½±éŸ¿èª°å…ˆè¼¸å‡ºã€‚

> èˆ‰ä¾‹ä¾†èªªï¼Œå¦‚æœé›»è…¦ä¸­çš„å…©å€‹è¡Œç¨‹åŒæ™‚è©¦åœ–ä¿®æ”¹ä¸€å€‹å…±äº«è¨˜æ†¶é«”çš„å…§å®¹ï¼Œåœ¨æ²’æœ‰ä¸¦è¡Œæ§åˆ¶çš„æƒ…æ³ä¸‹ï¼Œæœ€å¾Œçš„çµæœä¾è³´æ–¼å…©å€‹è¡Œç¨‹çš„åŸ·è¡Œé †åºèˆ‡æ™‚æ©Ÿã€‚è€Œä¸”å¦‚æœç™¼ç”Ÿäº†ä¸¦è¡Œå­˜å–è¡çªï¼Œå‰‡æœ€å¾Œçš„çµæœæ˜¯ä¸æ­£ç¢ºçš„ã€‚
> 
> ç«¶çˆ­å±å®³å¸¸è¦‹æ–¼ä¸è‰¯è¨­è¨ˆçš„é›»å­ç³»çµ±ï¼Œå°¤å…¶æ˜¯é‚è¼¯é›»è·¯ã€‚ä½†å®ƒå€‘åœ¨è»Ÿé«”ä¸­ä¹Ÿæ¯”è¼ƒå¸¸è¦‹ï¼Œå°¤å…¶æ˜¯æœ‰æ¡ç”¨å¤šåŸ·è¡Œç·’æŠ€è¡“çš„è»Ÿé«”ã€‚

[[@RaceCondition2022]] æè¿°
> A **race condition** or **race hazard** is the condition of an electronics, software, or other system where the system's substantive behavior is dependent on the sequence or timing of other uncontrollable events. It becomes a bug when one or more of the possible behaviors is undesirable.

é‡é»ï¼š
- race condition æ˜¯æŒ‡å¤šå€‹ç¨‹å¼æ¨¡çµ„ä»¥ä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºä¾†å½¼æ­¤ç«¶çˆ­è‘—æœ€å¾Œçš„çµæœï¼Œä½¿çµæœä¸å¦‚é–‹ç™¼è€…æ‰€é æœŸçš„çµæœï¼Œä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºåŒ…å«äº†ä»¥ä¸‹ï¼š
	- å¤šå€‹ç¨‹å¼æ¨¡çµ„çš„åŒæ™‚åŸ·è¡Œ
	- å¤šå€‹ç¨‹å¼æ¨¡çµ„çš„åºåˆ—åŸ·è¡Œï¼šå³ä½¿åºåˆ—åŸ·è¡Œï¼Œä¸¦ä¸èƒ½å¤ ä¿è­‰æœ€å¾Œçµæœæœƒå¦‚åŒä½¿ç”¨è€…æ‰€é æœŸï¼Œæ¯”å¦‚æœ‰ä»»å‹™1ã€ä»»å‹™2ï¼Œé–‹ç™¼è€…é æœŸæœ€å¾Œçµæœæœƒå…ˆç”±ä»»å‹™2å…ˆåŸ·è¡Œï¼Œå†ç”±ä»»å‹™1åŸ·è¡Œï¼Œä½†è‹¥ä»»å‹™1å…ˆåŸ·è¡Œï¼Œé‚£éº¼å°±æœ‰å¯èƒ½ä¸å¦‚é æœŸ
- é€šå¸¸é€™äº›ç¨‹å¼æ¨¡çµ„èƒ½å¤ å½±éŸ¿æœ€å¾Œçµæœæ–¹å¼ï¼š
	- ç«¶çˆ­å­˜å–è‘—åŒä¸€ä»½è³‡æ–™ã€è³‡æºï¼Œè€Œé€™äº›è³‡æ–™ã€è³‡æºå°‡æœƒå½±éŸ¿çµæœ

### race condition å‘½åç·£ç”±
race åŸæ„ç‚ºç«¶çˆ­ï¼Œcondition æ˜¯æŒ‡ç‹€æ…‹ã€ç‹€æ³ï¼Œåœ¨é›»è…¦ç§‘å­¸æ˜¯æŒ‡å¤šå€‹ç¨‹å¼æ¨¡çµ„åœ¨å½¼æ­¤ç«¶çˆ­èª°èƒ½å¤ å½±éŸ¿æœ€å¾Œçµæœï¼Œä¸è«–æ˜¯ä»¥åºåˆ—åŸ·è¡Œæˆ–è€…ä¸¦åˆ—åŸ·è¡Œï¼š
- è‹¥æ˜¯åºåˆ—åŸ·è¡Œï¼Œé‚£å°±æ˜¯å¤šå€‹ç¨‹å¼æ¨¡çµ„æ’éšŠå½±éŸ¿æœ€å¾Œçµæœ
- è‹¥æ˜¯ä¸¦åˆ—åŸ·è¡Œï¼Œé‚£å°±æ˜¯å¤šå€‹ç¨‹å¼æ¨¡çµ„åŒæ™‚åŸ·è¡Œï¼Œä¸¦ä¸”ä¸æ’éšŠï¼Œç›´æ¥èª°å…ˆæ¶åˆ°èª°å°±å…ˆå½±éŸ¿
## è¤‡ç¿’
#ğŸ§  race condition æ˜¯æŒ‡ä»€éº¼ï¼Ÿ ->->-> `æ˜¯æŒ‡å¤šå€‹ç¨‹å¼æ¨¡çµ„ä»¥ä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºä¾†å½¼æ­¤ç«¶çˆ­è‘—æœ€å¾Œçš„çµæœï¼Œä½¿çµæœä¸å¦‚é–‹ç™¼è€…æ‰€é æœŸçš„çµæœ`

#ğŸ§  race condition æ˜¯æŒ‡å¤šå€‹ç¨‹å¼æ¨¡çµ„ä»¥ä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºä¾†å½¼æ­¤ç«¶çˆ­è‘—æœ€å¾Œçš„çµæœï¼Œä½¿çµæœä¸å¦‚é–‹ç™¼è€…æ‰€é æœŸçš„çµæœï¼Œä¸å—æ§åˆ¶çš„åŸ·è¡Œé †åºåŒ…å«äº†å“ªäº›ï¼Ÿ->->-> `å¤šå€‹ç¨‹å¼æ¨¡çµ„çš„åŒæ™‚åŸ·è¡Œã€ å¤šå€‹ç¨‹å¼æ¨¡çµ„çš„åºåˆ—åŸ·è¡Œï¼šå³ä½¿åºåˆ—åŸ·è¡Œï¼Œä¸¦ä¸èƒ½å¤ ä¿è­‰æœ€å¾Œçµæœæœƒå¦‚åŒä½¿ç”¨è€…æ‰€é æœŸï¼Œæ¯”å¦‚æœ‰ä»»å‹™1ã€ä»»å‹™2ï¼Œé–‹ç™¼è€…é æœŸæœ€å¾Œçµæœæœƒå…ˆç”±ä»»å‹™2å…ˆåŸ·è¡Œï¼Œå†ç”±ä»»å‹™1åŸ·è¡Œï¼Œä½†è‹¥ä»»å‹™1å…ˆåŸ·è¡Œï¼Œé‚£éº¼å°±æœ‰å¯èƒ½ä¸å¦‚é æœŸ`

#ğŸ§  race conditionï¼šç‚ºä»€éº¼å¤šå€‹ç¨‹å¼æ¨¡çµ„èƒ½å¤ å½±éŸ¿æœ€å¾Œçµæœï¼Œé€šå¸¸æœƒæ˜¯ä»€éº¼ï¼Ÿ(è³‡æ–™æœƒå½±éŸ¿çµæœå—) ->->-> `å¤šå€‹ç¨‹å¼æ¨¡çµ„éƒ½ç«¶çˆ­å­˜å–è‘—åŒä¸€ä»½è³‡æ–™ã€è³‡æºï¼Œè€Œé€™äº›è³‡æ–™ã€è³‡æºå°‡æœƒå½±éŸ¿çµæœ`

#ğŸ§  race conditionï¼šå¤šå€‹ç¨‹å¼æ¨¡çµ„èƒ½å¤ å½±éŸ¿æœ€å¾Œçµæœï¼Œè‹¥å¤šå€‹ç¨‹å¼åºåˆ—åŸ·è¡Œçš„è©±ï¼Œæœƒæ˜¯å¦‚ä½•åŸ·è¡Œï¼Ÿ ->->-> `é‚£å°±æ˜¯å¤šå€‹ç¨‹å¼æ¨¡çµ„æ’éšŠå½±éŸ¿æœ€å¾Œçµæœ`

#ğŸ§   race conditionï¼šå¤šå€‹ç¨‹å¼æ¨¡çµ„èƒ½å¤ å½±éŸ¿æœ€å¾Œçµæœï¼Œè‹¥å¤šå€‹ç¨‹å¼ä¸¦åˆ—åŸ·è¡Œçš„è©±ï¼Œæœƒæ˜¯å¦‚ä½•åŸ·è¡Œï¼Ÿ->->-> `é‚£å°±æ˜¯å¤šå€‹ç¨‹å¼æ¨¡çµ„åŒæ™‚åŸ·è¡Œï¼Œä¸¦ä¸”ä¸æ’éšŠï¼Œç›´æ¥èª°å…ˆæ¶åˆ°èª°å°±å…ˆå½±éŸ¿`


#ğŸ§  race condition å‘½åç·£ç”± ->->-> `race åŸæ„ç‚ºç«¶çˆ­ï¼Œcondition æ˜¯æŒ‡ç‹€æ…‹ã€ç‹€æ³ï¼Œåœ¨é›»è…¦ç§‘å­¸æ˜¯æŒ‡å¤šå€‹ç¨‹å¼æ¨¡çµ„åœ¨å½¼æ­¤ç«¶çˆ­èª°èƒ½å¤ å½±éŸ¿æœ€å¾Œçµæœï¼Œä¸è«–æ˜¯ä»¥åºåˆ—åŸ·è¡Œæˆ–è€…ä¸¦åˆ—åŸ·è¡Œ`

---
Status: #ğŸŒ± 
Tags:
[[Operating System]]
Links:
References:
[[@RaceCondition2022]]
[[@wikidataJingZhengWeiHai2022]]
