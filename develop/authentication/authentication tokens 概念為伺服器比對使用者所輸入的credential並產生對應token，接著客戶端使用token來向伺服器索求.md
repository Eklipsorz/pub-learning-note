## æè¿°


ç™»å…¥é©—è­‰æœ¬èº«æœƒæœ‰
1. server-side sessionç‚ºä¸»çš„ç™»å…¥é©—è­‰
2. authentication tokensï¼Œå¦‚JWTæŠ€è¡“



### authentication tokens æ¦‚å¿µ

1. å®¢æˆ¶ç«¯å¾ä¼ºæœå™¨ä¸Šç²å–permission/accessï¼š
	- ä¼ºæœå™¨æ¯”å°ä½¿ç”¨è€…æ‰€è¼¸å…¥çš„credentialå’Œè³‡æ–™åº«ä¸Šçš„credentialæ˜¯å¦ä¸€æ¨£ï¼Œè‹¥ä¸€æ¨£å°±åšä¸‹ä¸€æ­¥ï¼›è‹¥ä¸ä¸€æ¨£å°±ä¸åš
	 - å»ºç«‹permission token çµ¦äºˆå®¢æˆ¶ç«¯
 2. å®¢æˆ¶ç«¯è—‰ç”±permission/accessä¾†å‘ä¼ºæœå™¨ç´¢æ±‚
	- å®¢æˆ¶ç«¯ä½¿ç”¨tokenä¾†ç™¼é€è«‹æ±‚ç´¢è¦æ‰€ä¿è­·çš„è³‡æº
	- ä¼ºæœå™¨é©—è­‰tokenæ˜¯å¦åˆæ³•ï¼Œåˆæ³•å°±å…è¨±ä½¿ç”¨ï¼›ä¸åˆæ³•ä¸å…è¨±ä½¿ç”¨


### å¯¦ç¾æ‰€éœ€

1. ä¼ºæœå™¨æœƒéœ€è¦å®šç¾©secretã€hashing algorithm ä¾†ç”¢ç”Ÿhashing key



### å®¢æˆ¶ç«¯å¾ä¼ºæœå™¨ä¸Šç²å–permission/access

1. å®¢æˆ¶ç«¯è¼¸å…¥credential ä¾†çµ¦ä¼ºæœå™¨åšä½¿ç”¨è€…é©—è­‰
2. ä¼ºæœå™¨æ”¶åˆ°å°±å¾è³‡æ–™åº«å–å¾—å°æ‡‰ä½¿ç”¨è€…çš„credentialï¼Œçœ‹æ˜¯å¦å®Œå…¨ä¸€æ¨£ï¼Œè‹¥ä¸€æ¨£å°±åšä¸‹ä¸€æ­¥ï¼›ä¸ä¸€æ¨£å°±å‘ŠçŸ¥ç™»å…¥å¤±æ•—
3. ä¼ºæœå™¨æœƒç”¢ç”Ÿä¸€å€‹è­˜åˆ¥å­—å­—ä¸²ï¼Œè©²å­—ä¸²æœƒç”±credentialå’Œhashing å­—ä¸²æ§‹æˆï¼Œhashing å­—ä¸²æ˜¯ç”±ä¼ºæœå™¨çš„hashing algorithmå’Œä¼ºæœå™¨å„²å­˜çš„secretæ­é…è­˜åˆ¥ç”¨çš„è³‡æ–™ä¾†çµ„åˆæˆç¨ç‰¹ä¸”ä¸å¯åè§£çš„hashå­—ä¸²ã€‚
4. å°‡è­˜åˆ¥å­—å­—ä¸²å‚³éè‡³å®¢æˆ¶ç«¯
5. å®¢æˆ¶ç«¯æ”¶åˆ°å°±å„²å­˜åœ¨å®¢æˆ¶ç«¯çš„cookieä¸¦ç”¨domainå’Œpathä¾†æ¨™è¨˜è©²è³‡æ–™æ˜¯å±¬æ–¼å“ªå€‹ä¼ºæœå™¨å’Œå“ªå€‹ç«¯é»ã€‚


![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1672252937/blog/authentication/authentication-tokens-generate_n3vrxj.png)




###  å®¢æˆ¶ç«¯è—‰ç”±permission/accessä¾†å‘ä¼ºæœå™¨ç´¢æ±‚

1. å®¢æˆ¶ç«¯è—‰ç”±è­˜åˆ¥å­—å­—ä¸²ä¾†å‘ä¼ºæœå™¨ç´¢æ±‚å—ä¿è­·çš„è³‡æºã€‚
2. ä¼ºæœå™¨æ”¶åˆ°å°±æœƒæ‹¿è­˜åˆ¥ç”¨çš„å­—ä¸²å’Œkeyã€hashing algorithmä¾†ç”¢ç”Ÿå°æ‡‰hashå­—ä¸²ï¼Œä¸¦æ¯”å°hash å­—ä¸²å’Œå®¢æˆ¶ç«¯çš„tokenå…§å­˜çš„å…§å®¹æ˜¯å¦ä¸€æ¨£ï¼Œè‹¥ä¸€æ¨£å°±è¡¨ç¤ºé€™tokenæ˜¯ç”±ä¼ºæœå™¨æ‰€ç”¢ç”Ÿï¼Œä¸”æœªç«„æ”¹ï¼Œé‚£éº¼å°±åšä¸‹ä¸€æ­¥ï¼›è‹¥ä¸ä¸€æ¨£å°±è¡¨ç¤ºé€™tokenä¸æ˜¯ç”±ä¼ºæœå™¨ç”¢ç”Ÿï¼Œæˆ–è€…è¢«ç¯¡æ”¹éçš„ï¼Œé‚£éº¼å°±å‘ŠçŸ¥ç™»å…¥å¤±æ•—ã€‚
3. ä¼ºæœå™¨å°‡å—ä¿è­·çš„è³‡æºå›å‚³çµ¦å®¢æˆ¶ç«¯


![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1672252937/blog/authentication/authentication-tokens-compare_yld5da.png)


## è¤‡ç¿’

#ğŸ§  ç™»å…¥é©—è­‰çš„å¯¦ç¾æ–¹å¼æœ‰å“ªäº›ï¼Ÿ ->->-> `1. server-side sessionç‚ºä¸»çš„ç™»å…¥é©—è­‰ 2. authentication tokensï¼Œå¦‚JWTæŠ€è¡“`

#ğŸ§  ç™»å…¥é©—è­‰çš„å¯¦ç¾æ–¹å¼æœ‰1. server-side sessionç‚ºä¸»çš„ç™»å…¥é©—è­‰ 2. authentication tokensï¼Œå…¶ä¸­å¾Œè€…çš„æ¡ˆä¾‹æœƒæ˜¯ä»€éº¼ï¼Ÿ ->->-> `JWT`

#ğŸ§  authentication tokens æ¦‚å¿µç‚ºä½•ï¼Ÿ ->->-> ` authentication tokens æ¦‚å¿µç‚ºä¼ºæœå™¨æ¯”å°ä½¿ç”¨è€…æ‰€è¼¸å…¥çš„credentialä¸¦ç”¢ç”Ÿå°æ‡‰tokenï¼Œæ¥è‘—å®¢æˆ¶ç«¯ä½¿ç”¨tokenä¾†å‘ä¼ºæœå™¨ç´¢æ±‚`

#ğŸ§  authentication tokens æ¦‚å¿µç‚ºauthentication tokens æ¦‚å¿µç‚ºä¼ºæœå™¨æ¯”å°ä½¿ç”¨è€…æ‰€è¼¸å…¥çš„credentialä¸¦ç”¢ç”Ÿå°æ‡‰tokenï¼Œæ¥è‘—å®¢æˆ¶ç«¯ä½¿ç”¨tokenä¾†å‘ä¼ºæœå™¨ç´¢æ±‚ï¼Œå…·é«”æœƒæ˜¯ï¼Ÿï¼Ÿ ->->-> `1. å®¢æˆ¶ç«¯å¾ä¼ºæœå™¨ä¸Šç²å–permission/accessï¼š	- ä¼ºæœå™¨æ¯”å°ä½¿ç”¨è€…æ‰€è¼¸å…¥çš„credentialå’Œè³‡æ–™åº«ä¸Šçš„credentialæ˜¯å¦ä¸€æ¨£ï¼Œè‹¥ä¸€æ¨£å°±åšä¸‹ä¸€æ­¥ï¼›è‹¥ä¸ä¸€æ¨£å°±ä¸åšã€‚- å»ºç«‹permission token çµ¦äºˆå®¢æˆ¶ç«¯ 2. å®¢æˆ¶ç«¯è—‰ç”±permission/accessä¾†å‘ä¼ºæœå™¨ç´¢æ±‚ï¼š- å®¢æˆ¶ç«¯ä½¿ç”¨tokenä¾†ç™¼é€è«‹æ±‚ç´¢è¦æ‰€ä¿è­·çš„è³‡æºã€‚ - ä¼ºæœå™¨é©—è­‰tokenæ˜¯å¦åˆæ³•ï¼Œåˆæ³•å°±å…è¨±ä½¿ç”¨ï¼›ä¸åˆæ³•ä¸å…è¨±ä½¿ç”¨`

#ğŸ§  authentication tokens é€šå¸¸éœ€è¦ä»€éº¼æ±è¥¿æ‰èƒ½å¯¦ç¾ï¼Ÿ ->->-> `secretã€hashing algorithm `

#ğŸ§  å®¢æˆ¶ç«¯å¾ä¼ºæœå™¨ä¸Šç²å–permission/accessï¼Œå…·é«”æµç¨‹æœƒæ˜¯ä»€éº¼ï¼Ÿ->->-> `1. å®¢æˆ¶ç«¯è¼¸å…¥credential ä¾†çµ¦ä¼ºæœå™¨åšä½¿ç”¨è€…é©—è­‰ 2. ä¼ºæœå™¨æ”¶åˆ°å°±å¾è³‡æ–™åº«å–å¾—å°æ‡‰ä½¿ç”¨è€…çš„credentialï¼Œçœ‹æ˜¯å¦å®Œå…¨ä¸€æ¨£ï¼Œè‹¥ä¸€æ¨£å°±åšä¸‹ä¸€æ­¥ï¼›ä¸ä¸€æ¨£å°±å‘ŠçŸ¥ç™»å…¥å¤±æ•— 3. ä¼ºæœå™¨æœƒç”¢ç”Ÿä¸€å€‹è­˜åˆ¥å­—å­—ä¸²ï¼Œè©²å­—ä¸²æœƒç”±credentialå’Œhashing å­—ä¸²æ§‹æˆï¼Œhashing å­—ä¸²æ˜¯ç”±ä¼ºæœå™¨çš„hashing algorithmå’Œä¼ºæœå™¨å„²å­˜çš„secretæ­é…è­˜åˆ¥ç”¨çš„è³‡æ–™ä¾†çµ„åˆæˆç¨ç‰¹ä¸”ä¸å¯åè§£çš„hashå­—ä¸²ã€‚ 4. å°‡è­˜åˆ¥å­—å­—ä¸²å‚³éè‡³å®¢æˆ¶ç«¯ 5. å®¢æˆ¶ç«¯æ”¶åˆ°å°±å„²å­˜åœ¨å®¢æˆ¶ç«¯çš„cookieä¸¦ç”¨domainå’Œpathä¾†æ¨™è¨˜è©²è³‡æ–™æ˜¯å±¬æ–¼å“ªå€‹ä¼ºæœå™¨å’Œå“ªå€‹ç«¯é»ã€‚`


#ğŸ§  å®¢æˆ¶ç«¯å¾ä¼ºæœå™¨ä¸Šç²å–permission/accessï¼Œå…·é«”æµç¨‹æœƒæ˜¯ä»€éº¼ï¼Ÿç•«åœ–è¡¨ç¤º ->->-> ``


#ğŸ§  å®¢æˆ¶ç«¯è—‰ç”±permission/accessä¾†å‘ä¼ºæœå™¨ç´¢æ±‚ï¼Œå…·é«”æµç¨‹æœƒæ˜¯ä»€éº¼ï¼Ÿ->->-> `1. å®¢æˆ¶ç«¯è—‰ç”±è­˜åˆ¥å­—å­—ä¸²ä¾†å‘ä¼ºæœå™¨ç´¢æ±‚å—ä¿è­·çš„è³‡æºã€‚ 2. ä¼ºæœå™¨æ”¶åˆ°å°±æœƒæ‹¿è­˜åˆ¥ç”¨çš„å­—ä¸²å’Œkeyã€hashing algorithmä¾†ç”¢ç”Ÿå°æ‡‰hashå­—ä¸²ï¼Œä¸¦æ¯”å°hash å­—ä¸²å’Œå®¢æˆ¶ç«¯çš„tokenå…§å­˜çš„å…§å®¹æ˜¯å¦ä¸€æ¨£ï¼Œè‹¥ä¸€æ¨£å°±è¡¨ç¤ºé€™tokenæ˜¯ç”±ä¼ºæœå™¨æ‰€ç”¢ç”Ÿï¼Œä¸”æœªç«„æ”¹ï¼Œé‚£éº¼å°±åšä¸‹ä¸€æ­¥ï¼›è‹¥ä¸ä¸€æ¨£å°±è¡¨ç¤ºé€™tokenä¸æ˜¯ç”±ä¼ºæœå™¨ç”¢ç”Ÿï¼Œæˆ–è€…è¢«ç¯¡æ”¹éçš„ï¼Œé‚£éº¼å°±å‘ŠçŸ¥ç™»å…¥å¤±æ•—ã€‚ 3. ä¼ºæœå™¨å°‡å—ä¿è­·çš„è³‡æºå›å‚³çµ¦å®¢æˆ¶ç«¯`


#ğŸ§  å®¢æˆ¶ç«¯è—‰ç”±permission/accessä¾†å‘ä¼ºæœå™¨ç´¢æ±‚ï¼Œå…·é«”æµç¨‹æœƒæ˜¯ä»€éº¼ï¼Ÿç•«åœ–è¡¨ç¤º>->->  ``


---
Status: #ğŸŒ± 
Tags:
[[Authentication]]
Links:
[[ç™»å…¥é©—è­‰å¯ä½¿ç”¨server-side sessionä¾†å¯¦ç¾ï¼Œä¸¦å°‡è«‹æ±‚å°åŒ…è™•ç†å…§å®¹å„²å­˜åœ¨sessionä¸¦è³¦äºˆidè‡³å®¢æˆ¶ç«¯ä¾†ç•¶ä½œaccessï¼Œå¥½æ–¹ä¾¿å®¢æˆ¶ç«¯åˆ©ç”¨accesså­˜å–]]
References:
