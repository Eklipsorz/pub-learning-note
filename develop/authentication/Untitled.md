## æè¿°


### Resource Server è„«é›¢æˆæ¬Šèªè­‰çš„å¯èƒ½æ€§

[[@AccessTokenRefresh]]
> ### èµ„æºæœåŠ¡å¦‚ä½•è„±ç¦»æˆæƒæœåŠ¡éªŒè¯Access Tokenï¼Ÿ

> ä»¥JTWä¸ºä¾‹ã€‚å¦‚æœAccess Tokenæ˜¯JWTå½¢å¼ç­¾å‘ï¼Œèµ„æºæœåŠ¡å¯ä»¥ä½¿ç”¨éªŒè¯ç­¾åçš„æ–¹å¼åˆ¤æ–­æ˜¯å¦åˆæ³•ï¼Œåªéœ€è¦æŠŠç­¾åå¯†é’¥åœ¨èµ„æºæœåŠ¡åŒæ­¥ä¸€ä»½å³å¯ã€‚ä¹Ÿæœ‰ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„ï¼ŒæˆæƒæœåŠ¡ä½¿ç”¨ç§é’¥ç­¾å‘ï¼Œèµ„æºæœåŠ¡ä½¿ç”¨å…¬é’¥éªŒè¯ã€‚ç”±äºJWTå…è®¸æºå¸¦ä¸€äº›ä¿¡æ¯ï¼Œç”¨æˆ·ï¼Œæƒé™ï¼Œæœ‰æ•ˆæœŸç­‰ï¼Œå› æ­¤èµ„æºæœåŠ¡åˆ¤æ–­JWTåˆæ³•ä¹‹åå¯ä»¥ç»§ç»­æ ¹æ®æºå¸¦ä¿¡æ¯æ¥åˆ¤æ–­æ˜¯å¦å¯è®¿é—®èµ„æºã€‚ä»…æ­¤è€Œå·²ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥å¿«é€ŸéªŒè¯æœ‰æ•ˆæ€§ï¼Œåå¤„æ˜¯Access Tokenä¸€æ—¦ç­¾å‘ï¼Œå°†å¾ˆéš¾æ”¶å›ï¼Œåªèƒ½é€šè¿‡è¿‡æœŸæ¥å¤±æ•ˆã€‚

é‡é»ï¼š
- ç”±æ–¼æˆæ¬Šçš„ç™¼é€æœƒæ˜¯ä»¥JWTè£½æˆçš„tokenï¼Œå…¶JWTæœ¬èº«å°±å­˜åœ¨æª¢æ¸¬æ˜¯å¦ç«„æ”¹çš„ç°½ç½²å€¼ä»¥åŠæ­é…ç‰¹å®šèº«åˆ†è³‡è¨Šï¼Œæ‰€ä»¥Resource Serverå¯ä»¥åªä½¿ç”¨ç‰¹å®šå¯†é‘°ã€è£½ä½œç°½ç½²å€¼çš„ç®—æ³•ã€è«‹æ±‚ç«¯å¤¾é›œçš„tokenä¾†é©—è­‰è«‹æ±‚ç«¯æ˜¯åˆæ³•çš„ï¼š
	-  Resource Server - Authorization Server ä¹‹é–“å…·é«”çš„é›™æ–¹ç‰¹å®šå¯†é‘°ï¼š
		- Resource Server å’Œ Authorization Server çš†ä½¿ç”¨ç›¸åŒå¯†é‘°ä¾†é©—è­‰ç°½ç½²å€¼
		- Public-key algorithm ç‚ºåŸºç¤ï¼šAuthorization Serverä½¿ç”¨ç§é‘°ç™¼æ”¾tokenï¼ŒResource Serverä½¿ç”¨å…¬é‘°é©—è­‰
	- 


> ### Refresh Tokenæœºåˆ¶å¦‚ä½•æå‡å®‰å…¨ï¼Ÿ

> Refresh Tokençš„å…¶ä¸­ä¸€ä¸ªç›®çš„æ˜¯è®©ç”¨æˆ·åœ¨è¾ƒé•¿çš„æ—¶é—´ä¿æŒç™»å½•çŠ¶æ€ï¼Œé‚£ä¹ˆå¯å¦ç›´æ¥è®©Access Tokenå…·æœ‰æ›´é•¿çš„æœ‰æ•ˆæœŸï¼Œä»è€Œå¯ä»¥çœå»è®¸å¤šæ²¡ç”¨çš„æ­¥éª¤ã€‚ç­”æ¡ˆæ˜¯ä¸å®‰å…¨ï¼Œç†ç”±å‚è€ƒä¸Šé¢é—®é¢˜çš„ç­”æ¡ˆã€‚

> ä¸¾ä¸ªä¾‹å­ï¼ŒæŸä¸ªç”¨æˆ·ç™»å½•æˆåŠŸï¼Œè·å¾—äº†ä¸€ä¸ªå¯ä»¥å‘å¸–çš„Access Tokenï¼Œè¿™æ—¶ç®¡ç†å‘˜å‘ç°ä»–å‘å¸ƒåƒåœ¾å†…å®¹åŠé”€äº†å‘å¸–æƒé™ï¼Œè€Œè¿™ä¸ªä¿¡æ¯ä¸€èˆ¬å±äºæˆæƒæœåŠ¡ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä¸‹æ¬¡å‘æˆæƒæœåŠ¡è¯·æ±‚Access Tokenå°†ä¸ä¼šå¾—åˆ°å‘å¸–æƒé™ã€‚ä½†æ˜¯å¦‚æœç”¨æˆ·ä¹‹å‰æ‹¿åˆ°çš„Access Tokenæ˜¯é•¿æœŸæœ‰æ•ˆçš„ï¼Œé‚£ä¹ˆè¿™ä¸ªç”¨æˆ·å°±å¯ä»¥å‘å¸–å¾ˆé•¿æ—¶é—´ã€‚å¦‚æœAccess Tokenåœ¨çŸ­æ—¶é—´å†…å¤±æ•ˆï¼Œé‚£ä¹ˆä»–å¿…é¡»é‡æ–°å»æˆæƒæœåŠ¡è¯·æ±‚ï¼Œè¿™æ—¶æˆæƒæœåŠ¡å°†ä¸ä¼šé¢å‘å…·å¤‡å‘å¸–æƒé™çš„Access Tokenã€‚

> ç¬¬äºŒä¸ªä¾‹å­ï¼Œå¦‚æœAccess Tokenå…·æœ‰è¾ƒé•¿çš„æœ‰æ•ˆæœŸï¼Œä¸€æ—¦è¢«ç›—ç”¨ï¼Œæ”»å‡»è€…å°±å¯ä»¥æ‹¿Access Tokenä½¿ç”¨å¾ˆé•¿æ—¶é—´ã€‚èªæ˜çš„ä½ å¯èƒ½ä¼šæƒ³åˆ°ï¼Œæ”»å‡»è€…å¯ä»¥åŒæ—¶ç›—å–Refresh Tokenã€‚

>[RFC6749](https://link.juejin.cn?target=http%3A%2F%2Fwww.rfcreader.com%2F%23rfc6749 "http://www.rfcreader.com/#rfc6749")ç¬¬10èŠ‚ä¸­æœ‰è¯´æ˜ï¼ŒæˆæƒæœåŠ¡**å¿…é¡»ç»´æŠ¤Refresh Tokenä¸å®¢æˆ·ç«¯çš„ç»‘å®šå…³ç³»**ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰åˆæ³•ç”¨æˆ·çš„å®¢æˆ·ç«¯ï¼ˆå¯é€šè¿‡IP,UAç­‰èµ„æ–™åˆ¤æ–­ï¼‰æ¥è¯·æ±‚æ˜¯å¯ä»¥é€šè¿‡çš„ã€‚é€€ä¸€æ­¥è®²ï¼Œå¦‚æœæ”»å‡»è€…æ¨¡æ‹Ÿäº†å®¢æˆ·ç«¯å¯ä»¥æ‰§è¡Œåˆ·æ–°è¯·æ±‚ï¼Œé‚£ä¹ˆå°±è¦çœ‹è°å…ˆåˆ·ã€‚ç”±äºæˆæƒæœåŠ¡**å¯ä»¥è®¾ç½®Refresh Tokenä¸€æ¬¡æœ‰æ•ˆ**ï¼Œå› æ­¤ä¸ç®¡å“ªä¸ªå…ˆåˆ·æ–°ï¼Œå¦ä¸€ä¸ªäººåˆ·æ–°å°±ä¼šæŠ¥é”™ã€‚å¦‚æœç”¨æˆ·å…ˆåˆ·æ–°ï¼Œæ”»å‡»è€…ä»¥Access Tokenå’ŒRefresh Tokençš„åŒé‡å¤±æ•ˆç»“æŸæ¸¸æˆã€‚å¦‚æœæ”»å‡»è€…å…ˆåˆ·æ–°äº†ï¼Œåˆæ³•ç”¨æˆ·å°±ä¼šæ”¶åˆ°æŠ¥é”™ä¿¡æ¯ï¼ŒæˆæƒæœåŠ¡ä¼šå¼•å¯¼ç”¨æˆ·ä»ä¸Šå›¾çš„æ­¥éª¤(A)é‡æ–°å¼€å§‹è®¤è¯ï¼Œä»è€ŒæŠŠæœ‰æ•ˆçš„Refresh Tokenæ‹¿å›åˆ°åˆæ³•ç”¨æˆ·è¿™é‡Œã€‚


## è¤‡ç¿’

#ğŸ§  Question :: ->->-> ``

---
Status: #ğŸŒ± 
Tags:
[[Authorization]]
Links:
[[refresh token æ˜¯ç¨®tokenä¾†è®“Clientæˆ–Replying Party åœ¨ä¸éœ€è¦é¡å¤–ä½¿ç”¨è€…å¸³è™Ÿé€²è¡Œcredentialé©—è­‰çš„æƒ…æ³ä¸‹ç›´æ¥å‘Authorization Serverç´¢è¦æ–°çš„Access Tokenæˆ–ID token]]
[[Symmetric-key algorithm æ¦‚å¿µæœƒæ˜¯åŠ å¯†æ–¹å’Œè§£å¯†æ–¹éƒ½ä½¿ç”¨åŒä¸€å€‹é‘°åŒ™å€¼é€²è¡ŒåŠ å¯†æˆ–è§£å¯†ï¼›Public-key cryptography æ¦‚å¿µæœƒæ˜¯åŠ å¯†æ–¹å’Œè§£å¯†æ–¹å…©æ–¹éƒ½æ‹¿ç¨ç«‹ä¸åŒçš„é‘°åŒ™å€¼ä¾†å„åˆ¥åšåŠ å¯†æˆ–è€…è§£å¯†]]
References:
[[@AccessTokenRefresh]]