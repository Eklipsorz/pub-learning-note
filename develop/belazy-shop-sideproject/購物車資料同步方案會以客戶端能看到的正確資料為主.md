
## 描述
sideproject - belazy-shop設定
### 未登入時的狀況

未登入：只考慮緩存是否有資料，總共有二種狀況

若緩存有購物車資料：
1. 就延續該緩存上的購物車資料，所有購物車內變更都會在緩存上進行

若緩存沒有購物車資料：
1. 就建立緩存，所有購物車內變更都會在緩存上進行
### 登入時的狀況

登入：考慮緩存和資料庫是否有資料，總共有四種狀況

 
若緩存上和資料庫上皆沒有購物車資料：
1.  建立緩存儲存，所有購物車內變更都會在緩存上進行
2.  只要登出就同步緩存上資料至DB、刪除對應的session和緩存上的購物車資料

 
若緩存沒有購物車資料且只有資料庫有購物車資料：
1.  從資料庫獲取購物車資料並建立對應資料在緩存上，所有購物車內變更都會在緩存上進行
2.  只要登出就同步緩存上資料至DB、刪除對應的session和緩存上的購物車資料

  
若緩存有購物車資料且資料庫沒有購物車資料：
1.  同步緩存上的資料至DB，所有購物車內變更都會在緩存上進行
2.  只要登出就同步緩存上資料至DB、刪除對應的session和緩存上的購物車資料

  
若緩存和資料庫都有購物車資料：
1.  兩者資料合併再一起，並同步DB和緩存，所有購物車內變更都會在緩存上進行
2.  只要登出就同步緩存上資料至DB、刪除對應的session和緩存上的購物車資料

---
Status: #🌱 
Tags:
[[Caching]] - [[Databse]] - [[Side Project]]
Links:
[[Session 的去留會依據過期時間和登出，cookie的去留會依據過期時間、登出、自行清除cookie]]
References: