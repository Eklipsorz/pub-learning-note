## 描述

[[@wikidataBuLongGuoLuQi2021]]所描述：

> 布隆過濾器的原理是，當一個元素被加入集合時，通過K個[雜湊函式](https://zh.wikipedia.org/wiki/%E6%95%A3%E5%88%97%E5%87%BD%E6%95%B0 "雜湊函式")將這個元素對映成一個位[陣列](https://zh.wikipedia.org/wiki/%E6%95%B0%E7%BB%84 "陣列")中的K個點，把它們置為1。檢索時，我們只要看看這些點是不是都是1就（大約）知道集合中有沒有它了：如果這些點有任何一個0，則被檢元素一定不在；如果都是1，則被檢元素很可能在。這就是布隆過濾器的基本思想。

重點為：
- Bloom Filter 會使用K個雜湊函式和M個位置為主的bit array，bit array 上的每個位置都會是0
- 當一個將要加入集合的元素A前會先透過K個雜湊函式(將元素轉為數值)來輸出對應位置，其位置會是bit array上的位置，在該位置設定為1
- 當要查詢元素A是否在集合中，就用同樣的K個雜湊函式對元素A來轉換輸出位置，看位置是的bit是否都皆為1，若都為1就是代表元素A很有可能在集合，若有任何一個0，則表示元素A肯定不在。

### 案例

[[@kadaiZiLiaoJieGouDaBianDangBloomFilter2019]] 所描述的：

> Bloom Filter 有兩個要素：長度為 n 的 bit array 和 m 個獨立的 hash function，當要寫入資料（x）的時候，用所有的 hash function 對 x 進行 hash 後 mod n 得到 m 個位置，把 bit array 這些位置的 bit 設為 1，就完成了一次寫入。

> 圖片中的例子是 m = 3  
> X, Y, Z 都是 int，作為 index 去設定 bit array 的值

![](https://miro.medium.com/max/1400/1*AJqhuLfXgGhE8h1_F5VLZg.jpeg)
> 查詢也是同樣的流程在得到 m 個位置之後，去 bit array 取出相對應的值，如果全都是 1 的話就代表集合中有這個元素，就可以確認這個資料之前曾經出現過。


### 優點
> 相比於其它的資料結構，布隆過濾器在空間和時間方面都有巨大的優勢。布隆過濾器儲存空間和插入/查詢時間都是常數O(K)

重點：
- 優點是空間複雜度會是O(M)，而時間複雜度會是O(K)，兩者皆為常數時間。
- 相較於其他大部分常見方式，如hash，這方法較為快速且省空間

### 缺點
> 但是布隆過濾器的缺點和優點一樣明顯。誤算率是其中之一。隨著存入的元素數量增加，誤算率隨之增加。但是如果元素數量太少，則使用雜湊表足矣。

> 另外，一般情況下不能從布隆過濾器中刪除元素。我們很容易想到把位陣列變成整數陣列，每插入一個元素相應的計數器加1, 這樣刪除元素時將計數器減掉就可以了。然而要保證安全地刪除元素並非如此簡單。首先我們必須保證刪除的元素的確在布隆過濾器裡面。這一點單憑這個過濾器是無法保證的。另外計數器迴繞也會造成問題。

重點：
- 缺點是以準確度來換取一定程度的速度和省空間 以及 難以更新從集合中移除元素的情況下的bit array，畢竟得保證刪除元素得要能夠在bloolm filter，但誤判缺點難以保證

## 複習
#🧠 Bloom Filter 是什麼？請畫圖說明吧->->-> `會使用K個雜湊函式和M個位置為主的bit array，bit array 上的每個位置都會是0，當一個將要加入集合的元素A前會先透過K個雜湊函式(將元素轉為數值)來輸出對應位置，其位置會是bit array上的位置，在該位置設定為1，當要查詢元素A是否在集合中，就用同樣的K個雜湊函式對元素A來轉換輸出位置，看位置是的bit是否都皆為1，若都為1就是代表元素A很有可能在集合，若有任何一個0，則表示元素A肯定不在`
<!--SR:!2022-06-14,10,250-->

#🧠 Bloom Filter 優點是什麼？ ->->-> `優點是空間複雜度會是O(M)，而時間複雜度會是O(K)，兩者皆為常數時間、相較於其他大部分常見方式，如hash，這方法較為快速且省空間`
<!--SR:!2022-06-11,6,248-->

#🧠 Bloom Filter 缺點是什麼？(提示：刪除和準確) ->->-> `以準確度來換取一定程度的速度和省空間 以及 難以更新從集合中移除元素的情況下的bit array，畢竟得保證刪除元素得要能夠在bloolm filter，但誤判缺點難以保證`
<!--SR:!2022-06-19,9,210-->


---
Status: #🌱 
Tags:
[[Algorithm]] - [[Hash]]
Links:
References:
[[@wikidataBuLongGuoLuQi2021]]
[[@kadaiZiLiaoJieGouDaBianDangBloomFilter2019]]