

## æè¿°
### ç›®æ¨™ç‹€æ…‹å…§éƒ¨åˆ†ç‹€æ…‹æ˜¯ä¾è³´è‘—éå»ç‹€æ…‹

åœ¨é€™è£æ˜¯æœƒæœ‰ä¸‰å€‹è¼¸å…¥æ¬„ä½åˆ†åˆ¥æ˜¯æ¨™é¡Œã€åƒ¹æ ¼ã€æ—¥æœŸï¼Œæ¨™é¡Œè¼¸å…¥æ¬„ä½çš„æ”¹è®Šäº‹ä»¶æ˜¯ç”±titleChangeHandlerè² è²¬ï¼Œåƒ¹æ ¼è¼¸å…¥æ¬„ä½çš„æ”¹è®Šäº‹ä»¶æ˜¯ç”±amountChangeHandlerè² è²¬ï¼Œæœ€å¾Œæ—¥æœŸè¼¸å…¥æ¬„ä½çš„æ”¹è®Šäº‹ä»¶æ˜¯ç”±dateChangeHandlerè² è²¬ã€‚

åœ¨é€™è£ç•¶titleè¼¸å…¥æ¬„ä½ç™¼ç”Ÿæ”¹è®Šæ™‚ï¼Œæœƒå°‡æ–°titleå’ŒèˆŠæœ‰çš„æ¬„ä½å€¼æ­é…åœ¨ä¸€èµ·ä¾†æ›´æ–°ç‹€æ…‹ã€‚



```
function ExpenseForm(props) {

	const [userInput, setUserInput] = useState({
		enteredTitle: '',
		enteredAmount: '',
		enteredDate: ''
	})
  
	const titleChangeHandler = (event) => {
		const enteredTitle = event.target.value
		setUserInput({...userInput, enteredTitle})
	}

	const amountChangeHandler = (event) => {
		const enteredAmount = event.target.value
		setUserInput({...userInput, enteredAmount})
	}

	const dateChangeHandler = (event) => {
		const enteredDate = event.target.value
		setUserInput({...userInput, enteredDate})
	}
	.
	.
	.
	.
}
```



åœ¨é€™è£¡æœƒæ˜¯æ‹¿è‘—userInputä¸­ä¾†å–å¾—èˆŠæœ‰çš„æ¬„ä½å€¼ï¼Œåœ¨é€™è£userInputæœƒæ˜¯æ¯ä¸€æ¬¡æ¸²æŸ“å‰›é–‹å§‹æœƒæ‹¿åˆ°çš„è³‡æ–™ï¼Œè€Œåœ¨åŸ·è¡ŒsetUserInputæ™‚ä¸¦ä¸æœƒç«‹å³æ”¹è®Šç‹€æ…‹&æ¸²æŸ“ä¸¦åˆ·æ–°userInputå€¼ï¼Œè€Œæ˜¯**å…ˆå°‡ç›®å‰æ¥æ”¶åˆ°çš„ç‹€æ…‹å…ˆèˆ‡éå»çš„ç‹€æ…‹åˆä½µï¼Œæ¥è‘—ç­‰åˆ°ç¢ºå®šæ²’ç‹€æ…‹æ›´æ–°æŒ‡ä»¤æ™‚æ‰æœƒæ­£å¼ç«‹å³æ”¹è®Šç‹€æ…‹&æ¸²æŸ“**ï¼Œé€™ä½¿å¾—å¾è¦æ±‚æ›´æ”¹ç‹€æ…‹è‡³å®Œæˆç‹€æ…‹æ”¹è®Š&æ¸²æŸ“ä¹‹é–“æ˜¯æœ‰æ™‚é–“å·®


### è‹¥é¢å°å¤§é‡æ›´æ”¹ç‹€æ…‹è¦æ±‚çš„æƒ…æ³ä¸‹
ä¸»è¦æ˜¯ä¸ä¸€è‡´çš„å•é¡Œï¼šè‹¥é¢å°å¤§é‡æ›´æ”¹ç‹€æ…‹è¦æ±‚çš„æƒ…æ³ä¸‹ï¼Œå¾è¦æ±‚æ›´æ”¹ç‹€æ…‹è‡³å®Œæˆç‹€æ…‹æ”¹è®Š&æ¸²æŸ“ä¹‹é–“çš„æ™‚é–“å·®æœƒé€æ¼¸åŠ é‡ï¼Œç”šè‡³æ²’è¾¦æ³•é€éæ¸²æŸ“è€Œå¾—åˆ°æœ€æ–°å€¼ï¼Œä½¿å¾—æ¯ä¸€æ¬¡æ¸²æŸ“å‰›é–‹å§‹æœƒæ‹¿åˆ°çš„è³‡æ–™æœƒæ˜¯æœ€èˆŠçš„è³‡æ–™


#### è§£æ³•

åœ¨setStateä¸­æ·»åŠ callbackï¼Œå°±èƒ½å°‡setStateç›®å‰æ‰€è¦æ›´æ”¹çš„ç‹€æ…‹å¡«å…¥è‡³callbackç•¶åƒæ•¸ä¸¦ä¸”è¼¸å‡ºæˆæ–°çš„ç›®æ¨™ç‹€æ…‹ä¾†ç•¶æ›´æ–°ç‹€æ…‹&æ¸²æŸ“çš„ç›®æ¨™
```
function setState(callback) {
	const newState = callback(currentState)
	// update with newState.....

}
```

é€™æ¨£èƒ½ä½¿setStateåœ¨æ¯ä¸€æ¬¡è¦æ±‚æ›´æ–°ç‹€æ…‹æ™‚ï¼Œéƒ½èƒ½ä»¥ä¸Šä¸€å€‹setStateæ‰€è¦æ±‚çš„ç‹€æ…‹ç‚ºåŸºç¤ä¾†è¦æ±‚æ›´æ”¹é¡å¤–çš„ç‹€æ…‹

## è¤‡ç¿’

#ğŸ§  Reactï¼šè«‹å•æ¯ç•¶åŸ·è¡ŒsetStateæœƒç«‹å³æ›´æ”¹ç‹€æ…‹&æ¸²æŸ“å—ï¼Ÿé‚„æ˜¯æœ‰æ™‚é–“å·®ï¼Ÿç‚ºä»€éº¼ï¼Ÿ ->->-> `åœ¨åŸ·è¡ŒsetStateæ™‚ä¸¦ä¸æœƒç«‹å³æ”¹è®Šç‹€æ…‹&æ¸²æŸ“ä¸¦åˆ·æ–°stateå€¼ï¼Œè€Œæ˜¯**å…ˆå°‡ç›®å‰æ¥æ”¶åˆ°çš„ç‹€æ…‹å…ˆèˆ‡éå»çš„ç‹€æ…‹åˆä½µï¼Œæ¥è‘—ç­‰åˆ°ç¢ºå®šæ²’ç‹€æ…‹æ›´æ–°æŒ‡ä»¤æ™‚æ‰æœƒæ­£å¼ç«‹å³æ”¹è®Šç‹€æ…‹&æ¸²æŸ“**ï¼Œé€™ä½¿å¾—å¾è¦æ±‚æ›´æ”¹ç‹€æ…‹è‡³å®Œæˆç‹€æ…‹æ”¹è®Š&æ¸²æŸ“ä¹‹é–“æ˜¯æœ‰æ™‚é–“å·®`

#ğŸ§  Reactï¼šè«‹å•æ¯æ¬¡åŸ·è¡ŒsetStateæ™‚ï¼Œå¾è¦æ±‚æ›´æ”¹ç‹€æ…‹è‡³å®Œæˆç‹€æ…‹æ”¹è®Š&æ¸²æŸ“ä¹‹é–“æ˜¯æœ‰æ™‚é–“å·®ï¼Œå…·é«”æ˜¯ç‚ºä»€éº¼ï¼Ÿ ->->->`åœ¨åŸ·è¡ŒsetStateæ™‚ä¸¦ä¸æœƒç«‹å³æ”¹è®Šç‹€æ…‹&æ¸²æŸ“ä¸¦åˆ·æ–°stateå€¼ï¼Œè€Œæ˜¯**å…ˆå°‡ç›®å‰æ¥æ”¶åˆ°çš„ç‹€æ…‹å…ˆèˆ‡éå»çš„ç‹€æ…‹åˆä½µï¼Œæ¥è‘—ç­‰åˆ°ç¢ºå®šæ²’ç‹€æ…‹æ›´æ–°æŒ‡ä»¤æ™‚æ‰æœƒæ­£å¼ç«‹å³æ”¹è®Šç‹€æ…‹&æ¸²æŸ“**`

#ğŸ§  Reactï¼šè‹¥é¢å°å¤§é‡æ›´æ”¹ç‹€æ…‹è¦æ±‚çš„æƒ…æ³ä¸‹ï¼Œå°æ–¼æ¯æ¬¡åŸ·è¡ŒStateæ‰€å¾—åˆ°çš„æ™‚é–“å·®æœƒè®Šæˆå¦‚ä½• ->->-> `æ™‚é–“å·®æœƒä½¿è¦æ±‚é€æ¼¸ç´¯ç¸¾èµ·ä¾†ï¼Œé€²è€ŒåŠ é‡æ™‚é–“å·®`


#ğŸ§  Reactï¼šè‹¥é¢å°å¤§é‡æ›´æ”¹ç‹€æ…‹è¦æ±‚çš„æƒ…æ³ä¸‹ï¼Œå°æ–¼æ¯æ¬¡åŸ·è¡ŒStateæ‰€å¾—åˆ°çš„æ™‚é–“å·®æœƒè¢«åŠ é‡ï¼Œé‚£éº¼å°æ–¼this.setState({...state1, a})ä¸”state1æ˜¯æºè‡ªæ–¼useStateæ‰€å›å‚³çš„å€¼ä¾†èªªæœƒæœ‰ä»€éº¼æ½›åœ¨å•é¡Œ? ç‚ºä»€éº¼(ä»¥ä¾è³´ã€æ¸²æŸ“ä¾†èªªæ˜)->->-> `ä¸»è¦æ˜¯ä¸ä¸€è‡´çš„å•é¡Œï¼Œç”±æ–¼ç‹€æ…‹éƒ½æ˜¯ä¾è³´è‘—state1ä¾†æ›´æ”¹ï¼Œstate1æ˜¯å¿…é ˆé€éæ¸²æŸ“æ‰èƒ½æ‹¿åˆ°æœ€æ–°ç‹€æ…‹ï¼Œç„¶è€Œåœ¨æ™‚é–“åŠ é‡åˆ°ç„¡æ³•é€éæ¸²æŸ“æ›´æ–°ç‹€æ…‹ï¼Œç›®å‰state1å¾ˆæœ‰å¯èƒ½æœƒæ˜¯è¼ƒèˆŠï¼Œè‹¥ä¸­é–“æœ‰éƒ¨åˆ†è³‡æ–™è¦æ›´æ–°çš„è©±`

#ğŸ§  Reactï¼šè‹¥é¢å°å¤§é‡æ›´æ”¹ç‹€æ…‹è¦æ±‚çš„æƒ…æ³ä¸‹ï¼Œå°æ–¼æ¯æ¬¡åŸ·è¡ŒStateæ‰€å¾—åˆ°çš„æ™‚é–“å·®æœƒè¢«åŠ é‡ï¼Œé‚£éº¼å°æ–¼this.setState({...state1, a})ä¸”state1æ˜¯æºè‡ªæ–¼useStateæ‰€å›å‚³çš„å€¼ä¾†èªªæœƒæœ‰ä¸ä¸€è‡´çš„å•é¡Œï¼Œé‚£éº¼è§£æ³•æœƒæ˜¯ä»€éº¼ï¼Ÿ ->->-> `ä½¿ç”¨callbackç•¶ä½œsetStateåƒæ•¸ï¼Œä¸¦ç”¨callbackä¾†å–å¾—è¼ƒæ–°çš„ç‹€æ…‹state1`

---
Status: #ğŸŒ± 
Tags:
[[React]] - [[JavaScript]]
Links:
[[Reactï¼šsetState æœƒè©¦è‘—å°‡å¤šå€‹ç‹€æ…‹æ›´æ–°ä»»å‹™åˆä½µæˆä¸€å€‹ä»»å‹™ï¼Œé€²è€Œæ¸›å°‘å› ä¸€å€‹ä»»å‹™è€Œè§¸ç™¼ä¸€æ¬¡æ¸²æŸ“çš„æ¸²æŸ“æ¬¡æ•¸]]
References: