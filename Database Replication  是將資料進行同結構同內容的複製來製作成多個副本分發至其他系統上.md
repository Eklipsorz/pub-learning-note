## æè¿°


### ä»€éº¼æ˜¯Database Replication
[[@karanpratansinghSystemDesignComplete]]
> Replication is a process that involves sharing information to ensure consistency between redundant resources such as multiple databases, to improve reliability, fault-tolerance, or accessibility.

[[@homuchenSystemDesignQianTanDatabase2021]]
> é¡§åæ€ç¾©å°±æ˜¯å°‡ä¸€ä»½è³‡æ–™ï¼Œè¤‡è£½æˆå¤šä»½ï¼Œä¸¦æŠŠå®ƒæ”¾åˆ°ä¸åŒçš„æ©Ÿå™¨ä¸Šï¼Œ å¥½åƒä¹Ÿæ²’ä»€éº¼å¥½èªªçš„ğŸ¤ªï¼Œæ¥è‘—æœƒçœ‹çœ‹ç‚ºä»€éº¼è¦åšè¤‡è£½ï¼Œå®ƒæœƒå¸¶ä¾†ä»€éº¼å¥½è™•åŠå£è™•ï¼Œ å†çœ‹çœ‹è¦å¦‚ä½•åšåˆ°replicationï¼Œæœ€å¾Œçœ‹çœ‹åœ¨RDBMSã€NoSQLæˆ–æ˜¯ä½ è‡ªå·±çš„ç³»çµ±ï¼Œæ˜¯æ€éº¼æ‡‰ç”¨é€™äº›æ¦‚å¿µçš„ã€‚

é‡é»ï¼š
- åœ¨é›»è…¦ç§‘å­¸è£¡ï¼Œæ˜¯æŒ‡å°‡è³‡æ–™é€²è¡ŒåŒçµæ§‹åŒå…§å®¹çš„è¤‡è£½ä¾†è£½æˆå¤šå€‹å‰¯æœ¬ä¸¦åˆ†ç™¼è‡³åˆ¥è™•ï¼Œå¯ä»¥åˆ†ç™¼è‡³è³‡æ–™åº«ç³»çµ±ã€åˆ†ç™¼è‡³å…¶ä»–ä¸»æ©Ÿ
- Database replicationå‰‡æ˜¯å°‡å‰¯æœ¬åˆ†ç™¼çµ¦å…¶ä»–è³‡æ–™åº«ç³»çµ±ï¼Œé€™åŒ…å«äº†ï¼š
	- åˆ†ç™¼çµ¦åŒå€‹ä¸»æ©Ÿä¸‹çš„å…¶ä»–è³‡æ–™åº«ç³»çµ±
	- åˆ†ç™¼çµ¦ä¸åŒä¸»æ©Ÿä¸‹çš„è³‡æ–™åº«ç³»çµ±



### ç‚ºä½•è¦ Database Replication

[[@homuchenSystemDesignQianTanDatabase2021]]
> ## è³‡æ–™å‚™ä»½
>
> æŠŠä¸€ä»½è³‡æ–™è®Šæˆå¤šä»½æ”¾åˆ°ä¸åŒçš„åœ°æ–¹ï¼Œæœ€æ˜é¡¯çš„å¥½è™•å°±æ˜¯**å‚™ä»½**ï¼Œç•¶ä½ çš„æ©Ÿå™¨å£æ‰ï¼Œå¦‚æœç¡¬ç¢Ÿæ²’å£ï¼Œ å…¶å¯¦é‡å•Ÿä¹‹å¾Œè³‡æ–™é‚„æ˜¯åœ¨é‚£é‚Šï¼Œä½†å°±æ€•ä½ çš„æ©Ÿå™¨æ•´çµ„å£å…‰å…‰ï¼Œæˆ–æ˜¯å°±æ˜¯ç¡¬ç¢Ÿçˆ†äº†ç„¡æ³•å†ä½¿ç”¨ï¼Œ æ­¤æ™‚å¦‚æœè³‡æ–™æœ‰è¤‡è£½é“åˆ¥å°æ©Ÿå™¨ä¸Šï¼Œå°±ä¸ç”¨æ€•æœƒæœ‰è³‡æ–™çš„ä¸Ÿå¤±ã€‚

> ## è®€å–æ•ˆèƒ½
> 
> è³‡æ–™éƒ½åœ¨åŒä¸€å°æ©Ÿå™¨æ™‚ï¼Œæ‰€æœ‰çš„è®€å–æŸ¥è©¢éƒ½å¿…é ˆç¶“ç”±é€™å°æ©Ÿå™¨ä¾†å®Œæˆï¼Œä¸€å°æ©Ÿå™¨ç¸½æœ‰ä»–çš„ç“¶é ¸ï¼Œ ä¸€å°ä¸è¡Œï¼Œé‚£ä½ æœ‰è©¦éå…©å°å—ï¼Ÿä¸‰å°å››å°äº”å°å—ï½
>
> å°æ–¼è®€å–æ•ˆèƒ½çš„å¢é€²ï¼Œä¸»è¦æœ‰å…©å€‹æ–¹å‘ï¼Œåˆ†åˆ¥æ˜¯ååé‡(throughput)åŠå»¶é²æ™‚é–“(latency)ã€‚
> -   **read throughput:** è¤‡è£½äº†Nä»½ï¼Œæˆ‘å°±æœ‰Nå°æ©Ÿå™¨å¯ä»¥ä¾›æˆ‘æŸ¥è©¢æ‹‰ï¼Œå¹³å‡åˆ†æ•£æ‰€æœ‰çš„æŸ¥è©¢è«‹æ±‚åˆ°Nå°æ©Ÿå™¨ä¸Šï¼Œ é æœŸæœ€å¤šå°±å¯ä»¥æœ‰Nå€çš„throughputã€‚
> -   **read latency:** å¦å¤–ä¹Ÿå¯ä»¥æŠŠä¸€äº›æ©Ÿå™¨æ”¾åˆ°é›¢userè¿‘ä¸€é»çš„åœ°æ–¹ï¼Œæ¸›å°‘ç¶²è·¯å°åŒ…ä¾†å›çš„æ™‚é–“ï¼Œé™ä½latencyï¼Œ


é‡é»ï¼š
- Database Replication å‡ºç¾çš„åŸå› æ˜¯ç‚ºäº†
	- å¯¦ç¾è³‡æ–™å‚™ä»½
	- å¢åŠ æ•ˆèƒ½ä¸Šçš„è«‹æ±‚è™•ç†ååé‡(throughput)ã€æ¯å€‹è«‹æ±‚çš„å›æ‡‰æ™‚é–“(latecny)ï¼Œå°¤å…¶æ˜¯è®€å–æ•ˆèƒ½


### Database Replication ç¼ºé»
[[@homuchenSystemDesignQianTanDatabase2021]]
> ## å„²å­˜ç©ºé–“
> 
> æƒ³ç•¶ç„¶çˆ¾ï¼Œè¤‡è£½äº†å¹¾ä»½çš„è³‡æ–™å°±éœ€è¦å¤šå¹¾ä»½çš„ç£ç¢Ÿçš„ç©ºé–“ï¼Œä¸éç¾åœ¨ç¡¬ç¢Ÿè¶Šä¾†è¶Šä¾¿å®œçš„æ™‚ä»£ï¼Œ æ‡‰è©²ä¸æ˜¯å€‹å¤§å•é¡Œã€‚

> ## è³‡æ–™çš„ä¸ä¸€è‡´
> 
> ä¸ä¸€è‡´çš„ä¸»è¦ä¾†æºå°±æ˜¯å…©ç¨®: **replication**å’Œ**concurrent write**ï¼Œ è©¦æƒ³ä¸€ä¸‹è³‡æ–™å¦‚æœåªæœ‰å–®ä¸€ä¾†æºï¼Œé‚£è¦è·Ÿèª°ä¸ä¸€è‡´å‘¢ï¼Ÿåä¹‹ï¼Œå› ç‚ºæœ‰äº†replicaï¼Œ æ¯ä»½è¤‡è£½è¦å¦‚ä½•ä¿æŒåŒæ­¥åŠä¸€è‡´å°±æœƒæ˜¯å€‹å•é¡Œ? æœƒé€ æˆä»€éº¼consistencyçš„å•é¡Œï¼Œ å¾Œé¢æœƒåœ¨é™¸çºŒè¨è«–ã€‚


é‡é»ï¼š
- Database Replication ç¼ºé»ç‚º
	- å„²å­˜ç©ºé–“éœ€æ±‚å¤§å¢
	- è³‡æ–™ä¸€è‡´æ€§ã€å®Œæ•´æ€§ã€å†—ä½™å•é¡Œï¼Œé€ æˆåŸå› ç‚ºï¼š
		- replicationï¼šæ¯å€‹å‰¯æœ¬(replica)è¦å¦‚ä½•èˆ‡èˆ‡ç›®å‰åŸå§‹è³‡æ–™ä¿æŒä¸€è‡´
		- éåŒæ­¥çš„å¯«å…¥

### Replication å‘½åç·£ç”±

> the process by which organisms and genetic or other structures make exact copies of themselves

> the production of exact copies of complex molecules, such as DNA molecules, that occurs during growth of living organisms 


é‡é»ï¼š
- è£½ä½œèˆ‡ç‰¹å®šäº‹ç‰©åŒçµæ§‹åŒå…§å®¹çš„å‰¯æœ¬ä¹‹æµç¨‹ã€è¡Œç‚º

### Replica

> an exact copy of an object

é‡é»ï¼š
- replica æ˜¯ç¶“ç”±Replicationè€Œç”¢å‡ºçš„å‰¯æœ¬

## è¤‡ç¿’


---
Status: #ğŸŒ±  
Tags:
[[Database]]
Links:
References:
[[@karanpratansinghSystemDesignComplete]]
[[@homuchenSystemDesignQianTanDatabase2021]]
