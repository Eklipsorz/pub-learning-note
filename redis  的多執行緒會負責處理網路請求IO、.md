## æè¿°
[[@MianShiGuanWenRedisShiDanZhiXingXuHuanShiDuoZhiXingXu]]æ‰€æè¿°ï¼š

### ç‰ˆæœ¬3.0

> Redis 3.0 ç‰ˆæœ¬å¾Œï¼Œä¸»ç¨‹å¼ä¸­é™¤äº†ä¸»åŸ·è¡Œç·’è™•ç†ç¶²è·¯ IO å’Œå‘½ä»¤æ“ä½œå¤–ï¼Œé‚„æœ‰ 3 å€‹è¼”åŠ© BIO åŸ·è¡Œç·’ã€‚é€™ 3 å€‹ BIO åŸ·è¡Œç·’åˆ†åˆ¥è² è²¬è™•ç†ï¼Œæª”æ¡ˆé—œé–‰ã€AOF ç·©è¡è³‡æ–™é‡æ–°æ•´ç†åˆ°ç£ç¢Ÿï¼Œä»¥åŠæ¸…ç†ç‰©ä»¶é€™ä¸‰å€‹ä»»å‹™ä½‡åˆ—ï¼Œå¾žè€Œé¿å…é€™äº›ä»»å‹™å°ä¸» IO åŸ·è¡Œç·’çš„å½±éŸ¿ã€‚
> Redis åœ¨å•Ÿå‹•æ™‚ï¼ŒæœƒåŒæ™‚å•Ÿå‹•é€™ä¸‰å€‹ BIO åŸ·è¡Œç·’ï¼Œä½†æ˜¯ BIO åŸ·è¡Œç·’åªæœ‰åœ¨éœ€è¦åŸ·è¡Œç›¸é—œåž‹åˆ¥å¾Œè‡ºä»»å‹™æ™‚æ‰æœƒå–šé†’ï¼Œå…¶ä»–æ™‚é–“æœƒä¼‘çœ ç­‰å¾…ä»»å‹™ã€‚

![](https://i.iter01.com/images/ad6688b840c91cb804f3c2a21289d2e581484efc2c9d9c421bb9323a8299831f.png)

é‡é»žï¼š
- åœ¨Redis 3.xç‰ˆæœ¬ä¸­ï¼Œä¸»åŸ·è¡Œç·’è² è²¬è™•ç†ç¶²è·¯è«‹æ±‚IOã€è™•ç†æŒ‡ä»¤æ“ä½œ
- é™¤äº†ä¸»åŸ·è¡Œç·’ä»¥å¤–ï¼Œé‚„æœ‰ä¸‰å€‹è¼”åŠ©ç”¨çš„BIO åŸ·è¡Œç·’ä¾†è² è²¬ä»¥ä¸‹æ¥­å‹™ï¼Œé€™äº›åŸ·è¡Œç·’åªæœ‰åœ¨éœ€è¦æ™‚æ‰æœƒè¢«å–šé†’ï¼Œå¹³æ™‚éƒ½æœƒä¿æŒç¡çœ 
	- fsync åŸ·è¡Œç·’ï¼šAOF ç·©è¡è³‡æ–™é‡æ–°æ•´ç†åˆ°ç£ç¢Ÿ
	- closeåŸ·è¡Œç·’ï¼šæª”æ¡ˆé—œé–‰
	- æ¸…ç†å›žæ”¶åŸ·è¡Œç·’ï¼šæ¸…ç†ç‰©ä»¶
- fsync åŸ·è¡Œç·’ã€closeåŸ·è¡Œç·’ã€æ¸…ç†å›žæ”¶åŸ·è¡Œç·’æ˜¯Background I/O (BIO) ï¼Œæœƒæ–¼èƒŒæ™¯ä¸‹åŸ·è¡Œã€‚


### ç‰ˆæœ¬6.0

> å¤šåŸ·è¡Œç·’æ˜¯ Redis6.0 æŽ¨å‡ºçš„ä¸€å€‹æ–°ç‰¹æ€§ã€‚æ­£å¦‚ä¸Šé¢æ‰€èªª Redis æ˜¯æ ¸å¿ƒåŸ·è¡Œç·’è² è²¬ç¶²è·¯ IO ï¼Œå‘½ä»¤è™•ç†ä»¥åŠå¯«è³‡æ–™åˆ°ç·©è¡ï¼Œè€Œéš¨è‘—ç¶²è·¯ç¡¬é«”çš„æ•ˆèƒ½æå‡ï¼Œå–®å€‹ä¸»åŸ·è¡Œç·’è™•ç†â½¹çµ¡è«‹æ±‚çš„é€Ÿåº¦è·Ÿä¸ä¸Šåº•å±¤â½¹çµ¡ç¡¬é«”çš„é€Ÿåº¦ï¼Œå°Žè‡´ç¶²è·¯ IO çš„è™•ç†æˆç‚ºäº† Redis çš„æ•ˆèƒ½ç“¶é ¸ã€‚

> è€Œ Redis6.0 å°±æ˜¯å¾žå–®åŸ·è¡Œç·’è™•ç†ç¶²è·¯è«‹æ±‚åˆ°å¤šåŸ·è¡Œç·’è™•ç†ï¼Œé€šéŽå¤šå€‹ IO åŸ·è¡Œç·’ä¸¦â¾è™•ç†ç¶²è·¯æ“ä½œæå‡ä¾‹é …çš„æ•´é«”è™•ç†æ•ˆèƒ½ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å°æ–¼è®€å¯«å‘½ä»¤ï¼ŒRedis ä»ç„¶ä½¿â½¤å–®åŸ·è¡Œç·’ä¾†è™•ç†ï¼Œé€™æ˜¯å› ç‚ºç¹¼çºŒä½¿â½¤å–®åŸ·è¡Œç·’åŸ·è¡Œå‘½ä»¤æ“ä½œï¼Œå°±ä¸â½¤ç‚ºäº†ä¿è­‰ Lua æŒ‡ä»¤ç¢¼ã€äº‹å‹™çš„åŽŸâ¼¦æ€§ï¼Œé¡å¤–é–‹ç™¼å¤šåŸ·è¡Œç·’äº’æ–¥æ©Ÿåˆ¶äº†ã€‚


![](https://i.iter01.com/images/366286b2a68f20c755c2692895d9ff3a58719c78e75a4adf43ae2be2f6841850.png)


> å…¨éƒ¨æµç¨‹åˆ†ç‚ºä»¥ä¸‹ 4 éšŽæ®µï¼š

> **éšŽæ®µä¸€ï¼šæœå‹™ç«¯å’Œå®¢â¼¾ç«¯å»ºç«‹ Socket é€£ç·šï¼Œä¸¦åˆ†é…è™•ç†åŸ·è¡Œç·’**

> ç•¶æœ‰å®¢â¼¾ç«¯è«‹æ±‚å’Œä¾‹é …å»ºç«‹ Socket é€£ç·šæ™‚ï¼Œä¸»åŸ·è¡Œç·’æœƒå»ºç«‹å’Œå®¢æˆ¶ç«¯çš„é€£ç·šï¼Œä¸¦æŠŠ Socket æ”¾å…¥å…¨åŸŸæ€§ç­‰å¾…ä½‡åˆ—ä¸­ã€‚ç„¶å¾Œä¸»åŸ·è¡Œç·’é€šéŽè¼ªè©¢æ–¹æ³•æŠŠ Socket é€£ç·šåˆ†é…çµ¦ IO åŸ·è¡Œç·’ã€‚

> **éšŽæ®µäºŒï¼šIO åŸ·è¡Œç·’è®€å–ä¸¦è§£æžè«‹æ±‚**

> ä¸»åŸ·è¡Œç·’æŠŠ Socket åˆ†é…çµ¦ IO åŸ·è¡Œç·’å¾Œï¼Œæœƒé€²â¼Šé˜»å¡žç‹€æ…‹ç­‰å¾… IO åŸ·è¡Œç·’å®Œæˆå®¢æˆ¶ç«¯è«‹æ±‚è®€å–å’Œè§£æžã€‚

> **éšŽæ®µä¸‰ï¼šä¸»åŸ·è¡Œç·’åŸ·â¾è«‹æ±‚æ“ä½œ**

> IO åŸ·è¡Œç·’è§£æžå®Œè«‹æ±‚å¾Œï¼Œä¸»åŸ·è¡Œç·’ä»¥å–®åŸ·è¡Œç·’çš„â½…å¼åŸ·â¾é€™äº›å‘½ä»¤æ“ä½œã€‚

> **éšŽæ®µå››ï¼šIO åŸ·è¡Œç·’å›žå¯« Socket å’Œä¸»åŸ·è¡Œç·’æ¸…ç©ºå…¨åŸŸæ€§éšŠ**

> ä¸»åŸ·è¡Œç·’åŸ·è¡Œå®Œè«‹æ±‚æ“ä½œå¾Œï¼ŒæœƒæŠŠéœ€è¦è¿”å›žçš„çµæžœå¯«å…¥ç·©è¡å€ã€‚ç„¶å¾Œï¼Œä¸»åŸ·è¡Œç·’æœƒé˜»å¡žç­‰å¾… IO åŸ·è¡Œç·’æŠŠé€™äº›çµæžœå›žå¯«åˆ° Socket ä¸­ï¼Œä¸¦è¿”å›žçµ¦å®¢æˆ¶ç«¯ã€‚ç­‰åˆ° IO åŸ·è¡Œç·’å›žå¯« Socket å®Œç•¢ï¼Œä¸»åŸ·è¡Œç·’æœƒæ¸…ç©ºå…¨åŸŸæ€§ä½‡åˆ—ï¼Œç­‰å¾…å®¢æˆ¶ç«¯çš„å¾ŒçºŒè«‹æ±‚ã€‚

é‡é»žï¼š


## è¤‡ç¿’
#ðŸ§  Question :: ->->-> ``

---
Status: 
Tags:
Links:
References:
[[@MianShiGuanWenRedisShiDanZhiXingXuHuanShiDuoZhiXingXu]]
