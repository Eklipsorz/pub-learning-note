## æè¿°
[[@wikidataLuaWeiJiBaiKeZiYouDeBaiKeQuanShu]] æ‰€æè¿°çš„æ˜¯Luaæœ¬èº«ç·¨è­¯å’Œå¦‚ä½•åŸ·è¡Œï¼š
>  Luaç¨‹å¼ä¸æ˜¯å¾æ–‡å­—å¼çš„Luaæª”æ¡ˆç›´æ¥è§£é‡‹çš„ï¼Œè€Œæ˜¯ç·¨è­¯æˆä½å…ƒçµ„ç¢¼ï¼Œæ¥è‘—æŠŠå®ƒåŸ·è¡Œåœ¨Luaè™›æ“¬æ©Ÿå™¨ä¸Šã€‚ç·¨è­¯éç¨‹å…¸å‹çš„å°æ–¼ä½¿ç”¨è€…æ˜¯ä¸å¯è¦‹ä¸¦ä¸”æ˜¯åœ¨åŸ·è¡Œæ™‚é–“é€²è¡Œçš„ï¼Œä½†æ˜¯å®ƒå¯ä»¥é›¢ç·šå®Œæˆç”¨ä¾†å¢åŠ è£è¼‰æ•ˆèƒ½æˆ–é€šéæ’é™¤ç·¨è­¯å™¨ä¾†æ¸›å°‘å°å®¿ä¸»ç’°å¢ƒçš„è¨˜æ†¶é«”å ç”¨ã€‚Luaä½å…ƒçµ„ç¢¼é‚„å¯ä»¥åœ¨Luaä¹‹å…§ç”¢ç”Ÿå’ŒåŸ·è¡Œ

[[@wikidataLuaProgrammingLanguage2022]] æè¿°
> **Lua** (/ËˆluËÉ™/ _LOO__-É™_; from Portuguese: _lua_ [Ëˆlu.(w)É] meaning _moon_) is a lightweight, high-level, multi-paradigm programming language designed primarily for embedded use in applications.[3] Lua is cross-platform, since the interpreter of compiled bytecode is written in ANSI C,[4] and Lua has a relatively simple C API to embed it into applications.[5]


[[@LuaShiZenYangYiMenYuYanZhiHu]] æ‰€æè¿°çš„æ˜¯Lua æœ¬èº«æ˜¯å€‹è† æ°´èªè¨€ï¼š
> ä½†æ˜¯Luaå¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«æ“´å……ï¼šç”±å®¿ä¸»èªè¨€ï¼ˆé€šå¸¸æ˜¯Cæˆ–C++ï¼‰æä¾›é€™äº›åŠŸèƒ½ï¼ŒLuaå¯ä»¥ä½¿ç”¨å®ƒå€‘ï¼Œå°±åƒæ˜¯æœ¬ä¾†å°±å…§å»ºçš„åŠŸèƒ½ä¸€æ¨£ã€‚äº‹å¯¦ä¸Šï¼Œç¾åœ¨å·²ç¶“æœ‰å¾ˆå¤šæˆç†Ÿçš„æ“´å……æ¨¡çµ„å¯ä¾›é¸ç”¨ã€‚

> Luaå¤©ç”Ÿçš„å®šä½å°±æ˜¯åšä¸ºä¸€é—¨"èƒ¶æ°´è¯­è¨€"å‡ºç°çš„.å®ƒæ²¡æœ‰è‡ªå·±ç‹¬ç«‹çš„ç¯å¢ƒ,å¿…é¡»ä¾é™„åœ¨å®¿ä¸»è¯­è¨€çš„ç¯å¢ƒä¸­æ‰èƒ½èµ·ä½œç”¨.æ‰€ä»¥ä»ä¸€å¼€å§‹,Luaå°±éå¸¸æ¸…æ¥šè‡ªå·±çš„å®šä½:å®ƒä¸æƒ³è‡ªå·±åšå¤§,è€Œæ˜¯åšçš„å¤Ÿç²¾ç®€å¤Ÿå°,åµŒå…¥åœ¨å®¿ä¸»è¯­è¨€ä¸­,å¸®å¿™æä¾›ä¸€äº›åŠ¨æ€ç‰¹æ€§.

> æ˜ç™½äº†è¿™ä¸€ç‚¹,å°±æ˜ç™½äº†Luaçš„è®¸å¤šè®¾è®¡æ€è·¯--å°,è‡ªæä¾›åº“å°‘,å¤©ç”Ÿçš„èƒ¶æ°´è¯­è¨€---å› æ­¤ä»»ä½•C\C++èƒ½å‡ºç°çš„åœ°æ–¹,Luaå°±èƒ½è½»æ¾çš„åµŒå…¥å…¶ä¸­.é™¤äº†C\C++ä¹‹å¤–,å…¶ä»–è¯­è¨€ä¹Ÿå¼€å§‹æ„è¯†åˆ°äº†Luaçš„ä»·å€¼,å¼€å§‹æ”¯æŒå®ƒäº†.obj-C,asç­‰.

> Luaæ˜¯ä¸€ç¨®è¼•é‡èªè¨€ï¼Œå®ƒçš„å®˜æ–¹ç‰ˆæœ¬åªåŒ…æ‹¬ä¸€å€‹ç²¾ç°¡çš„æ ¸å¿ƒå’Œæœ€åŸºæœ¬çš„åº«ã€‚é€™ä½¿å¾—Luaé«”ç©å°ã€å•Ÿå‹•é€Ÿåº¦å¿«ã€‚å®ƒç”¨ANSI Cèªè¨€ç·¨å¯«[8]ï¼Œä¸¦ä»¥åŸå§‹ç¢¼å½¢å¼é–‹æ”¾ï¼Œç·¨è­¯å¾Œçš„å®Œæ•´åƒè€ƒç›´è­¯å™¨åªæœ‰å¤§ç´„247kB[8]ï¼Œåˆ°5.4.3ç‰ˆæœ¬ï¼Œè©²é«”ç©è®Šæˆ283kBï¼ˆLinux,amd64ï¼‰ï¼Œä¾ç„¶éå¸¸å°å·§ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„åµŒå…¥åˆ¥çš„ç¨‹å¼è£¡ã€‚å’Œè¨±å¤šã€Œå¤§è€Œå…¨ã€çš„èªè¨€ä¸ä¸€æ¨£ï¼Œç¶²è·¯é€šè¨Šã€åœ–å½¢ä»‹é¢ç­‰éƒ½æ²’æœ‰é è¨­æä¾›ã€‚ä½†æ˜¯Luaå¯ä»¥å¾ˆå®¹æ˜“åœ°è¢«æ“´å……ï¼šç”±å®¿ä¸»èªè¨€ï¼ˆé€šå¸¸æ˜¯Cæˆ–C++ï¼‰æä¾›é€™äº›åŠŸèƒ½ï¼ŒLuaå¯ä»¥ä½¿ç”¨å®ƒå€‘ï¼Œå°±åƒæ˜¯æœ¬ä¾†å°±å…§å»ºçš„åŠŸèƒ½ä¸€æ¨£ã€‚äº‹å¯¦ä¸Šï¼Œç¾åœ¨å·²ç¶“æœ‰å¾ˆå¤šæˆç†Ÿçš„æ“´å……æ¨¡çµ„å¯ä¾›é¸ç”¨ã€‚

é‡é»ï¼š
- Lua æ˜¯è† æ°´èªè¨€çš„ä¸€ç¨®ï¼Œä»¥è‡ªè£½çš„èªæ³•å’Œèªè¨€ä¾†åŒ…è£Cèªè¨€ç‚ºä¸»çš„åŠŸèƒ½æ¨¡çµ„ï¼Œå…¶Cèªè¨€ç‰ˆæœ¬ç‚ºANSI Cèªè¨€
[[è† æ°´èªè¨€(Glue Language)  æ˜¯ä»¥è‡ªè£½çš„èªè¨€å’Œèªæ³•ä¾†é»è²¼ç‰¹å®šèªè¨€Açš„å‡½å¼åŠŸèƒ½è‡³ç‰¹å®šèªè¨€Bçš„ç”¢å“ä¸‹çš„ èªè¨€]]
- Lua ä¸æ˜¯å‚³çµ±çš„ç›´è­¯èªè¨€ï¼Œæ“æœ‰ç·¨è­¯ã€ç›´è­¯ç‰¹æ€§çš„èªè¨€ï¼Œä¸»è¦æœ‰ï¼š
	- å…ˆå°‡Luaèªæ³•è½‰æ›æˆByteCodeï¼Œæ¥è‘—å¾ByteCodeè§£æåŸ·è¡Œ
	- åŸ·è¡Œå‰å…ˆå°‡Luaèªæ³•è½‰æ›æˆByteCodeï¼Œç„¶å¾ŒåŸ·è¡Œæ™‚ä¸Ÿé€²Lua è™›æ“¬æ©Ÿé‚Šè§£æé‚ŠåŸ·è¡Œ
	- ç›´æ¥ä»¥Luaèªæ³•ä¾†è§£æ
	- å…ˆå°‡Luaèªæ³•è½‰æ›æˆByteCodeï¼Œæ¥è‘—å†é€écompilerå¾ByteCodeè½‰æ›æˆæ©Ÿæ¢°ç¢¼ä¾†åŸ·è¡Œ




### å…ˆå°‡Luaèªæ³•è½‰æ›è‡³ByteCodeï¼Œæ¥è‘—å¾ByteCodeè§£æåŸ·è¡Œ

é¦–å…ˆç•¶Lua èªæ³•æ”¾ç½®å¦ä¸€å€‹ç¨‹å¼èªè¨€Bçš„ç’°å¢ƒä¸‹ï¼Œä¸”æ²’äº‹å…ˆç·¨è­¯Luaèªæ³•ç‚ºByteCodeï¼Œé‚£éº¼æ ¹æ“šæ™‚æ©Ÿä¾†ç·¨è­¯ï¼š
	- ç¨‹å¼èªè¨€Bè¦é–‹å§‹å‘¼å«Luaèªæ³•æ™‚ï¼šLuaå°±æœƒè¢«ç·¨è­¯æˆByteCodeä¸¦å­˜æ”¾åœ¨å®¿ä¸»ç’°å¢ƒçš„è¨˜æ†¶é«”æˆ–è€…å¿«å–ä¸­ï¼Œä¸¦å°‡ByteCodeä¸Ÿé€²Lua è™›æ“¬æ©Ÿï¼Œç”±å®ƒè² è²¬é‚Šè§£æByteCodeé‚ŠåŸ·è¡Œå°æ‡‰çš„Cèªè¨€ä»£ç¢¼
	- åªè¦å®¿ä¸»ç¨‹å¼ä¸€é–‹å§‹åŸ·è¡Œä¸”æ²’é‡åˆ°Luaæ™‚ï¼šLuaå°±æœƒè¢«ç·¨è­¯æˆByteCodeä¸¦å­˜æ”¾åœ¨å®¿ä¸»ç’°å¢ƒçš„è¨˜æ†¶é«”ï¼Œæ¥è‘—ç­‰å®¿ä¸»ç¨‹å¼ä¸€åŸ·è¡Œåˆ°Luaå°±æŠŠByteCodeä¸Ÿé€²è™›æ“¬æ©Ÿé‚Šè§£æé‚ŠåŸ·è¡Œ

![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1657555608/blog/compilation/LuaCode-ByteCode-Execute_znwxg0.png)

ç´°ç¯€ï¼š
1. æ¯ä¸€æ¬¡å¾Luaç·¨è­¯æˆByteCodeæ™‚ï¼Œæœƒå°‡å°æ‡‰çš„ByteCodeæ”¾ç½®å®¿ä¸»çš„è¨˜æ†¶é«”æˆ–è€…å¿«å–ï¼Œä¸¦ä¸å¦å¤–å­˜æ”¾åœ¨ç¡¬ç¢Ÿ
2. è‹¥ä¸‹ä¸€æ¬¡åŸ·è¡Œçš„Luaæ˜¯ä¸€æ¨£çš„è©±ï¼Œå°±ä¸æœƒåšå¤šé¤˜çš„ç·¨è­¯ï¼Œç›´æ¥ä»¥ç¾å­˜åœ¨è¨˜æ†¶é«”çš„ByteCodeåŸ·è¡Œ
3. Lua è™›æ“¬æ©Ÿä¸»è¦æ˜¯è² è²¬é‚Šè§£æByteCodeé‚ŠåŸ·è¡Œçš„è§£æå™¨
4. ByteCodeæ˜¯ç¨ç«‹æ–¼Luaã€ä»»ä½•ç¨‹å¼èªè¨€ã€æ©Ÿæ¢°ç¢¼ã€çµ„åˆèªè¨€çš„ä»£ç¢¼å½¢å¼ï¼Œåªæœ‰Luaè™›æ“¬æ©Ÿèƒ½è§£æ


### ç›´æ¥ä»¥Luaèªæ³•ä¾†è§£æ

![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1657555105/blog/compilation/Offline-ByteCode-Execute_ig1wxn.png)


###  å…ˆå°‡Luaèªæ³•è½‰æ›è‡³ByteCodeï¼Œæ¥è‘—å†é€écompilerå¾ByteCodeè½‰æ›æˆæ©Ÿæ¢°ç¢¼ä¾†åŸ·è¡Œ




## è¤‡ç¿’
#ğŸ§  Question :: ->->-> ``


---
Status: 
Tags:
[[Lua]] - [[Redis]]
Links:
[[Redis éœ€è¦LuaæŒ‡ä»¤æ˜¯ç”±æ–¼æƒ³é€éå¾ä¼ºæœå™¨å…§éƒ¨ç›´æ¥åŸ·è¡Œè…³æœ¬ä¾†ææ˜‡æŒ‡ä»¤è¢«åŸ·è¡Œçš„æ•ˆç‡ä»¥åŠæ›¿å¤šå€‹æŒ‡ä»¤è½‰æ›æˆåŸå­åŒ–æ“ä½œ]] 
[[è† æ°´èªè¨€(Glue Language)  æ˜¯ä»¥è‡ªè£½çš„èªè¨€å’Œèªæ³•ä¾†é»è²¼ç‰¹å®šèªè¨€Açš„å‡½å¼åŠŸèƒ½è‡³ç‰¹å®šèªè¨€Bçš„ç”¢å“ä¸‹çš„ èªè¨€]]
References:
[[@LuaShiZenYangYiMenYuYanZhiHu]]
[[@wikidataLuaProgrammingLanguage2022]]
[[@wikidataLuaWeiJiBaiKeZiYouDeBaiKeQuanShu]]