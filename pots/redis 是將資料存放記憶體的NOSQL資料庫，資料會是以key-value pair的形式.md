
## æè¿°
### Redis ä»‹ç´¹
å¼•ç”¨[[@linNodeJsShiYong2018]]æ‰€è¿°ï¼š

> Redis æ˜¯ä¸€ç¨®å…§å­˜è³‡æ–™åº«(in-memory)çš„æ¶æ§‹ï¼Œå¯ä»¥è¢«ç•¶ä½œä¸€å€‹ç°¡æ˜“çš„è³‡æ–™åº«(key-value database) 
å¼•ç”¨[[@ithomeDay23RubyRails]]æ‰€è¿°ï¼š

> Single Thread I/O Multiplex


redis ï¼š
- æ˜¯ä»¥è¨˜æ†¶é«”ä¾†æ§‹ç¯‰çš„è³‡æ–™åº«ï¼Œè³‡æ–™åº«å…§éƒ¨çš„è³‡æ–™çš†ç”±key-value pairæ‰€æ§‹æˆã€‚
- redis server æ˜¯ä»¥å–®åŸ·è¡Œç·’ä¾†åŸ·è¡Œ


> Redis ä½¿ç”¨ RAM ä¾†å­˜å–è³‡æ–™æ‰€ä»¥ç›¸å°ä¾†å¾—å¿«é€Ÿï¼Œç¼ºé»æ˜¯é‡é–‹æ©Ÿå¾Œè¨˜æ†¶é«”å°±æœƒè¢«é‡‹æ”¾æ‰ï¼Œä½† Redis æœ‰å€‹åŠŸèƒ½ persistence å¯ä»¥è§£æ±ºé€™å€‹å•é¡Œï¼Œæ­¤å¤– Redis ä¹Ÿèƒ½è¨­å®šè³‡æ–™çš„ç”Ÿå‘½é€±æœŸ(Expire)ç•¶ä½ åœ¨å„²å­˜è³‡æ–™çš„æ™‚å€™ï¼Œä½ å¯ä»¥æ–°å¢ä¸€å€‹ Expire time çš„åƒæ•¸ï¼Œæ™‚é–“ä¸€åˆ°ä¹‹å¾Œï¼Œé€™å€‹ key å°±æœƒè‡ªå‹•è¢«æ¸…é™¤ 

redis å„ªé»ï¼š
- ç”±æ–¼è³‡æ–™åº«å»ºç«‹åœ¨è¨˜æ†¶é«”ä¸Šï¼Œæ‰€ä»¥å­˜å–è¼ƒå¿«é€Ÿ
- èƒ½è¨­å®šç´€éŒ„çš„éæœŸæ™‚é–“ï¼šè¨­å®šExpire timeåƒæ•¸ä¾†å®šç¾©æ™‚é–“ï¼Œæ™‚é–“ä¸€åˆ°å°±æœƒæ¸…é™¤å°æ‡‰çš„ç´€éŒ„

ç¼ºé»ï¼š
- æœƒéš¨è‘—è¨˜æ†¶é«”é‡é–‹æ©Ÿè€Œè·Ÿè‘—é‡‹æ”¾è³‡æ–™ï¼Œä¸éå¯æ¡å–persistenceåŠŸèƒ½ï¼Œè®“åŒæ¨£å…§å®¹çš„è³‡æ–™å„²å­˜åœ¨ç¡¬ç¢Ÿå’Œè¨˜æ†¶é«”ï¼Œç•¶è¨˜æ†¶é«”é‚£ä»½è³‡æ–™è¢«é‡‹æ”¾æ™‚ï¼Œå¯ç”±ç¡¬ç¢Ÿä¸Šçš„è³‡æ–™é‚„åŸéä¾†


### å®‰è£æ–¹å¼

æµç¨‹ç‚ºï¼š
- å…ˆè‡³rediså®˜æ–¹ä¸‹è¼‰ï¼Œä¸¦è§£å£“ç¸®å‡ºå°æ‡‰çš„ç›®éŒ„
- ç§»å‹•è‡³å…¶ç›®éŒ„ä¸‹çš„srcå­ç›®éŒ„ï¼Œç„¶å¾Œä¸‹é”makeä¾†ç·¨è­¯redis-serverå’Œredis-cli
> ä¸¦è¼¸å…¥ makeï¼Œç³»çµ±æœƒè‡ªå‹•å¹«ä½ ç·¨è­¯ç”¢å‡º redis-server èˆ‡ redis-cliã€‚ 



### redis-server
ä¸»è¦è² è²¬å»ºç«‹redis è³‡æ–™åº«çš„ä¼ºæœå™¨ï¼Œç”¨ä»¥æ¥æ”¶è«‹æ±‚å’Œè™•ç†è«‹æ±‚ï¼Œé è¨­port ç‚º**6379**

è‹¥è¦æŒ‡å®šå…¶ä»–portï¼ŒæŒ‡ä»¤æœƒæ˜¯å¦‚ä¸‹ï¼Œå…¶ä¸­[port]æœƒæ˜¯æŒ‡å®šä¼ºæœå™¨æ¥æ”¶è«‹æ±‚çš„portï¼ŒåŸ·è¡Œå®Œä¾¿æœƒç›´æ¥åŸ·è¡Œredis-serverä¾†æ¶è¨­redisä¼ºæœå™¨
```
./redis-server --port [port]
```

è‹¥æ²’æ·»åŠ çš„è©±ï¼Œå°±é è¨­ç‚º6379
```
./redis-server
```

#### è®“redis-server è®Šæˆ daemon

åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œå°±èƒ½ä½¿redis-serveråœ¨èƒŒæ™¯ä¸‹åŸ·è¡Œä¸¦æ–¼é‚£æ¥æ”¶/è™•ç†è«‹æ±‚
```
 src/redis-server --daemonize yes 
```

é—œé–‰è©²redis-server æ‰€æœ‰ç›¸é—œçš„process
```
pkill -u $USER redis-server 
```
### redis-cli
å¼•ç”¨[[@redisRedisCLI]]æ‰€è¿°ï¼š
> TheÂ `redis-cli`Â (Redis command line interface) is a terminal program used to send commands to and read replies from the Redis server.

redis-cli æ˜¯å€‹èˆ‡redis serverç›¸é€£æ¥çš„ä»‹é¢ç¨‹å¼ï¼š
- é™„åŠ ä¸€çµ„æŒ‡ä»¤ä¾†é ç«¯æ“æ§å°æ‡‰redis server
- å¯æŒ‡å®šé€£æ¥å“ªä¸€å€‹redis server




### redis-cli æŒ‡ä»¤

#### SET
SET æŒ‡ä»¤ç‚ºè¨­å®šå°æ‡‰keyæ‰€æ“æœ‰çš„valueå€¼ï¼Œç”¨æ³•ç‚º
```
SET key value
```

e.g., SET something hi

è¨­å®šä¸€å€‹ç´€éŒ„ï¼Œå…¶ä¸­å®ƒçš„keyç‚ºsomethingï¼Œè€Œå°æ‡‰çš„valueæœƒæ˜¯hi

#### GET
GET æŒ‡ä»¤ç‚ºå›å‚³å°æ‡‰keyçš„valueï¼Œç”¨æ³•ç‚º
```
GET key
```
e.g., GET something

å›å‚³ä¸€ç­†keyå€¼ç‚ºsomethingçš„ç´€éŒ„æ‰€æ“æœ‰çš„valueå€¼

## è¤‡ç¿’


#ğŸ§  Redis ç³»çµ±æ˜¯å¤šåŸ·è¡Œç·’ï¼Ÿé‚„æ˜¯å–®åŸ·è¡Œç·’ï¼Ÿ ->->-> `å–®åŸ·è¡Œç·’`
<!--SR:!2022-06-25,8,250-->


---
Status: #ğŸŒ± 
Tags:
[[RedisJSON è®“Redis ä¼ºæœå™¨èƒ½å¤ ä»¥JSONå½¢å¼ä¾†è™•ç†æ¯å€‹keyä¸Šçš„value]] - [[NoSQL]]
Links:
[[node.js é€énode-redisç¨‹å¼ä¾†èˆ‡redis serveré€£ç·šä¸¦ä¸‹é”å°æ‡‰è³‡æ–™åº«æŒ‡ä»¤]]
References:
[[@linNodeJsShiYong2018]]
[[@ithomeDay23RubyRails]]
[[@redisRedisCLI]]
