## æè¿°




### ä½¿ç”¨useState ä¾†ç®¡ç†å¤šå€‹ç‹€æ…‹çš„æ½›åœ¨å•é¡Œ

#### å¤šå€‹ç‹€æ…‹å¯å¤§ç•¥åˆ†æˆå…©ç¨®æƒ…æ³ï¼š
1. å¤šå€‹ç¨ç«‹ç‹€æ…‹ï¼Œå½¼æ­¤é–“æ²’ä»»ä½•é—œä¿‚
2. å¤šå€‹ç¨ç«‹ç‹€æ…‹ï¼Œç‹€æ…‹å½¼æ­¤é–“æœƒæ”¹è®Šè‡ªå·±çš„ç‹€æ…‹æˆ–è€…é€™äº›ç‹€æ…‹çš†æœ‰é—œä¿‚


#### ç¬¬ä¸€ç¨®æ½›åœ¨å•é¡Œï¼šå¤šå€‹ç¨ç«‹ç‹€æ…‹ï¼Œå½¼æ­¤é–“æ²’ä»»ä½•é—œä¿‚
- ç‹€æ…‹éå¤šï¼Œæœƒæœ‰é›£ä»¥ç¶­è­·ã€é–‹ç™¼çš„å•é¡Œï¼š
	- æ¡ˆä¾‹ï¼š1000å€‹ç‹€æ…‹å°±è¦å¯«1000è¡ŒuseStateä¾†é€²è¡Œ

#### ç¬¬äºŒç¨®æ½›åœ¨å•é¡Œï¼šå¤šå€‹ç¨ç«‹ç‹€æ…‹ï¼Œç‹€æ…‹å½¼æ­¤é–“æœƒæ”¹è®Šè‡ªå·±çš„ç‹€æ…‹æˆ–è€…é€™äº›ç‹€æ…‹çš†æœ‰é—œä¿‚

- ç‹€æ…‹Aä¾è³´å¦ä¸€å€‹ç‹€æ…‹Bä¾†ä½¿ç”¨setState(ç‹€æ…‹B)æ›´æ–°ï¼Œä½†æœƒé¢è‡¨ç„¡æ³•ç¢ºä¿ç‹€æ…‹Bæ˜¯æœ€æ–°çš„å•é¡Œ
	- åŸå› ï¼š
		1) æ¯å€‹ç‹€æ…‹çš„setStateä¸€åŸ·è¡Œåˆ°æ›´æ–°ç‹€æ…‹ä¹‹é–“æ˜¯æœ‰æ™‚é–“å·®ã€‚
		2) ç‹€æ…‹Aä½¿ç”¨çš„ç‹€æ…‹æ›´æ–°å‡½å¼setStateåªèƒ½ä»¥callbackä¾†å–å¾—æœ€æ–°çš„ç‹€æ…‹Aä¾†æ›´æ–°ï¼Œç„¡æ³•å–å¾—æœ€æ–°ç‹€æ…‹Bä¾†æ›´æ–°ã€‚

#### ç¸½çµ
- ç¹¼çºŒä½¿ç”¨useState ä¾†å¯¦ç¾æœƒè¡ç”Ÿå‡º é›£ä»¥æ§ç®¡ã€ç¶­è­·ç‹€æ…‹ä¸”bugçœ¾å¤šçš„ä»£ç¢¼



### æ¡ˆä¾‹ï¼šä½¿ç”¨useState ä¾†ç®¡ç†å¤šå€‹ç‹€æ…‹çš„æ½›åœ¨å•é¡Œ


å¤šå€‹ç¨ç«‹ç‹€æ…‹ï¼Œç‹€æ…‹å½¼æ­¤é–“æœƒæ”¹è®Šè‡ªå·±çš„ç‹€æ…‹æˆ–è€…é€™äº›ç‹€æ…‹çš†æœ‰é—œä¿‚ã€‚


èˆ‰ä¾‹ä¾†èªªï¼šå‡å¦‚æœ‰enteredEmailã€emailIsValidé€™å…©å€‹è² è²¬å„²å­˜å…©å€‹ä¸åŒç‹€æ…‹å€¼çš„è®Šæ•¸ï¼Œè€ŒemailIsValidå„²å­˜çš„ç‹€æ…‹å€¼æ˜¯ä¾æ“šè‘—enteredEmailå„²å­˜çš„ç‹€æ…‹å€¼æ˜¯å¦åŒ…å«@ä¾†æ±ºå®šçš„ï¼š
- è‹¥æœ‰åŒ…å«@ï¼ŒemailIsValidå°±æœƒé å®šæ›´æ–°æˆtrue
- è‹¥æ²’åŒ…å«@ï¼ŒemailIsValidå°±æœƒé å®šæ›´æ–°æˆfalse
```
const [enteredEmail, setEnteredEmail] = useState('');
const [emailIsValid, setEmailIsValid] = useState();

const emailChangeHandler = (event) => {
	setEnteredEmail(event.target.value);
};

const validateEmailHandler = () => {
	setEmailIsValid(enteredEmail.includes('@'));
};
```

```
return (
	<input 
	  type='email' 
	  id='email'
	  value={enteredEmail}
	  onChange={emailChangeHandler}
	  onBlur={validateEmailHandler}
	/>
);
```

é€™æœƒå¼•ç™¼ä¸€å€‹æ½›åœ¨å•é¡Œï¼š
- emailIsValidçš„ç‹€æ…‹å€¼æœƒæ˜¯ä¾è³´è‘—å¦ä¸€å€‹ç‹€æ…‹å€¼enteredEmailä¾†åšæ±ºå®šï¼Œè€Œç‹€æ…‹å€¼enteredEmailå¾ˆæœ‰å¯èƒ½å› ç‚ºsetStateè®Šæ›´ç‹€æ…‹çš„æ™‚é–“å·®è€Œä¸æœƒæ˜¯æœ€æ–°çš„ã€‚
- emailIsValidè®Šæ›´ç‹€æ…‹ç”¨çš„å‡½å¼æ‰€æ”¯æ´çš„callbackåªæœƒä»¥emailIsValidç›®å‰è¦æ±‚çš„æœ€æ–°ç‹€æ…‹ä¾†æ›´æ–°ï¼Œä¸¦ä¸èƒ½å¤ ä»¥callbackå½¢å¼ä¾†å–å¾—enteredEmailç›®å‰è¦æ±‚çš„æœ€æ–°ç‹€æ…‹å€¼ä¾†æ›´æ–°



è§£æ³•ï¼š
å°‡å¤šå€‹ç‹€æ…‹åˆä½µæˆä¸€å€‹ç‹€æ…‹ä¾†ç®¡ç†ï¼šå¦‚ç‹€æ…‹æ”¹ä»¥ç‰©ä»¶ä¾†å„²å­˜enteredEmail, emailIsValidï¼Œä»¥æ­¤è©¦è‘—é€²è¡Œåˆä½µã€‚
```
  const [enteredEmail, setEnteredEmail] = useState('');
  const [emailIsValid, setEmailIsValid] = useState();
```



### è§£æ³•ï¼šä½¿ç”¨useState ä¾†ç®¡ç†å¤šå€‹ç‹€æ…‹çš„æ½›åœ¨å•é¡Œ

è§£æ³•æ€è·¯ç‚ºï¼š
	- å°‡å¤šå€‹ç‹€æ…‹åˆä½µæˆä¸€å€‹å¤§ç‹€æ…‹ä¾†ç®¡ç†

å¯¦ç¾æ‰‹æ®µç‚º
	- ä½¿ç”¨ useReducer 

> useReducer() can be used as a replacement for useState() if you need more powerful state management




## è¤‡ç¿’


---
Status: #ğŸŒ± #ğŸ““ 
Tags:
[[React]]
Links:
References: