## æè¿°






è¼‰å…¥æ™‚é‡åˆ°éŒ¯èª¤æ™‚æ‰€æœƒæœ‰çš„è™•ç†å’Œæ¸²æŸ“ï¼š

- å…ˆè¨»å†Šç‹€æ…‹ä¾†è¡¨ç¤ºæ˜¯å¦æœ‰éŒ¯èª¤

`const [error, setError] = useState(null)`

- åœ¨è™•ç†è¼‰å…¥è³‡æ–™çš„ç¨‹å¼æ¨¡çµ„å‰é¢æ·»åŠ é‡ç½®éŒ¯èª¤çš„æ‰‹æ®µï¼Œç¢ºä¿æ¯ä¸€æ¬¡ç•«é¢æ¸²æŸ“éƒ½æœƒæŒ‰ç…§æ˜¯å¦æ­£ç¢ºä¾†å‘ˆç¾
```
setError(null)
// è™•ç†è¼‰å…¥è³‡æ–™
```

- åœ¨è™•ç†è¼‰å…¥è³‡æ–™çš„ç¨‹å¼æ¨¡çµ„ä¸­çš„æ””æˆªéŒ¯èª¤éƒ¨åˆ†æ·»åŠ ï¼Œå¦å¤–è¨˜å¾—æ·»åŠ setIsLoading(false)ä¿è­‰æŒ‰ç…§å¯¦éš›æƒ…æ³ä¾†å‘ˆç¾é æœŸæ•ˆæœ
```
setError(error.message)
setIsLoading(false)
```

- æ¸²æŸ“éƒ¨åˆ†å‰‡æ ¹æ“šéŒ¯èª¤æ˜¯å¦å­˜åœ¨è€Œå‘ˆç¾

  

  

å¦‚æœè¼‰å…¥ä¸­é‡åˆ°éŒ¯èª¤çš„è©±ï¼Œå°±æ‡‰è©²æœƒå°‡ç‹€æ…‹ï¼š

- isLoading: true -> false (è¨­å®šæ˜¯ç‚ºäº†é¿å…é æœŸå¤–çš„éŒ¯èª¤)

- error: false -> true

even if we have an error, we're not loading anymore

  

  
### å‘ä¼ºæœå™¨ç™¼é€è«‹æ±‚çš„APIæ˜¯å¦æœƒæŠŠå¤¾é›œéŒ¯èª¤ç‹€æ…‹ç¢¼çš„å›æ‡‰ç‰©ä»¶è¦–ç‚ºçœŸæ­£çš„éŒ¯èª¤
  

one problem we'll face here is that the Fetch API doesn't treat error status codes as real errors

-> Fetch API ä¸¦ä¸æœƒæŠŠå¤¾é›œéŒ¯èª¤ç‹€æ…‹ç¢¼çš„å›æ‡‰ç‰©ä»¶è¦–ç‚ºçœŸæ­£çš„éŒ¯èª¤

  

axios API æœƒæŠŠå¤¾é›œéŒ¯èª¤ç‹€æ…‹ç¢¼çš„å›æ‡‰ç‰©ä»¶è¦–ç‚ºçœŸæ­£çš„éŒ¯èª¤

  

è§£æ±ºæ–¹å¼ç‚ºï¼š

- åœ¨try blockä¸­æ·»åŠ åˆ¤æ–·ç‹€æ…‹ç¢¼æ˜¯å¦ç‚ºéŒ¯èª¤ä»£ç¢¼è€Œæ‰‹å‹•æ‹‹éŒ¯

if (!response.ok) {
 throw new Error(...)
}


## è¤‡ç¿’
#ğŸ§  Question :: ->->-> ``

---
Status: 
Tags:
Links:
References: