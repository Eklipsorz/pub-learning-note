## æè¿°
[[@fooishReactTiShengGongYongZhuangTaiLifting]]
> å¾ˆå¸¸ä½ æœƒé‡åˆ°ä¸€ç¨®æƒ…æ³æ˜¯ï¼Œæœ‰å¥½å¹¾å€‹ç¨ç«‹å…ƒä»¶åŒæ™‚éƒ½è·ŸæŸå€‹è³‡æ–™ç‹€æ…‹ (shared state) çš„æ”¹è®Šæœ‰ç›¸ä¾æ€§ï¼ŒReact å»ºè­°çš„è™•ç†æ¨¡å¼æ˜¯ï¼Œå°‡é€™å€‹è³‡æ–™ç‹€æ…‹æå‡ (lifting state up) åˆ°é€™äº›å…ƒä»¶çš„æŸå€‹å…±åŒçˆ¶å…ƒä»¶ (closest common ancestor) ä¸Šé¢ã€‚

> å¯¦ä½œæ¦‚å¿µæ˜¯ï¼Œç•¶å­å…ƒä»¶äº‹ä»¶ (Child Events) ç™¼ç”Ÿæ™‚ï¼Œé€éçˆ¶å…ƒä»¶å‚³é€²ä¾†çš„ callback function é€šçŸ¥çˆ¶å…ƒä»¶æœ‰è³‡æ–™è®Šå‹•ï¼Œç„¶å¾Œç”±çˆ¶å…ƒä»¶çµ±ä¸€è¨ˆç®—å¾—åˆ°æ–°çš„çˆ¶å…ƒä»¶ stateï¼Œç„¶å¾Œé€é props åæ‡‰è³‡æ–™æ›´æ–°å›é€™äº›å­å…ƒä»¶ã€‚




é‡é»ï¼š
- lifting state up æ¦‚å¿µï¼š å°‡ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹å¾€ä¸Šå‚³éè‡³parentå…ƒä»¶ä¸Šï¼Œå¥½è®“parentå…ƒä»¶æ¥æ”¶ä¸¦è™•ç†
- lifting state up å¯¦ç¾ï¼šå°‡ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹è—‰ç”±parentå…ƒä»¶çµ¦äºˆçš„callbackä¾†é€šçŸ¥parentå…ƒä»¶æœ‰è³‡æ–™è®Šå‹•
- lifting state up æ¦‚å¿µ + pass state data via props æ¦‚å¿µï¼š å°‡ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹å¾€ä¸Šå‚³éè‡³parentå…ƒä»¶ä¸Šï¼Œä¸¦è®“parentå…ƒä»¶æ¥æ”¶åˆ°ç‹€æ…‹ä¾†ä¿®æ”¹æ¸²æŸ“ç”¨çš„è³‡æ–™ï¼Œæ¥è‘—è§¸ç™¼æ¸²æŸ“é€épropså¾€ä¸‹å°‡æ–°è³‡è¨Šæ›´æ–°è‡³å­å…ƒä»¶ä¾†é‡æ–°æ¸²æŸ“
-  lift state up æ¦‚å¿µ + pass state data via props å¯¦ç¾ï¼šå°‡ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹è—‰ç”±parentå…ƒä»¶çµ¦äºˆçš„callbackä¾†é€šçŸ¥parentå…ƒä»¶æœ‰è³‡æ–™è®Šå‹•ï¼Œæ¥è‘—é€éåŸ·è¡Œparentå…ƒä»¶ä¸Šçš„setStateä¾†ä¾æ“šè³‡æ–™æ›´æ–°ä»¥åŠè§¸ç™¼æ¸²æŸ“ï¼Œè§¸ç™¼å¾Œæœƒé€épropså°‡æ–°ç‹€æ…‹å¾€ä¸‹å‚³éä¾†æ§‹ç¯‰æ–°çš„childå…ƒä»¶å’Œparent

![](https://res.cloudinary.com/dqfxgtyoi/image/upload/v1661350629/blog/react/state/lifting-state-up_props_be8lkl.png)


### ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹æ”¹è¨»å†Šè‡³å…¶parentå…ƒä»¶ä¸Šï¼Œç®—æ˜¯lifting state upçš„æŠ€è¡“ä¸€éƒ¨åˆ†å—ï¼Ÿ

 ç‚ºä»€éº¼ï¼Ÿ `ä¸¦ä¸ç®—ï¼Œå…¶åŸå› ç‚ºlifting state upæ¦‚å¿µä¸Šæ˜¯æŒ‡å°‡ç›®å‰å…ƒä»¶ä¸Šçš„ç‹€æ…‹å¾€ä¸Šå‚³éè‡³å…¶parentå…ƒä»¶ï¼Œè®“parentå…ƒä»¶æ¥æ”¶åˆ°ä¸¦è™•ç†ï¼Œè€Œéè¨»å†Šåœ¨parentå…ƒä»¶`

#### ç¸½çµå·®ç•°ï¼š

##### ç‹€æ…‹æ‰€æœ‰æ¬Š
1. ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹è¨»å†Šåœ¨å…¶parentå…ƒä»¶ä¸Š vs lifting state up ï¼š
	- å‰è€…ä¸­ï¼Œç‰¹å®šå…ƒä»¶Aç”±æ–¼è½‰ç§»ç‹€æ…‹ï¼Œæ‰€ä»¥æ²’æœ‰è¢«è½‰ç§»éçš„ç‹€æ…‹ï¼Œè€Œparentå…ƒä»¶æ“æœ‰ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹
	- å¾Œè€…ä¸­ï¼Œç‰¹å®šå…ƒä»¶Aå’Œparentå…ƒä»¶çš„ç‹€æ…‹é‚„ä¿æœ‰åŸæœ‰æ¨£å­

##### å‚³éç‹€æ…‹æ–¹å‘
1. lifting state upç´”ç²¹å°‡ç›®å‰å…ƒä»¶ä¸Šçš„ç‹€æ…‹å¾€ä¸Šå‚³éè‡³å…¶parentå…ƒä»¶ï¼Œè®“parentå…ƒä»¶æ¥æ”¶åˆ°ä¸¦è™•ç†
2. ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹è¨»å†Šåœ¨å…¶parentå…ƒä»¶ï¼šè½‰ç§»å¾Œï¼Œparentå…ƒä»¶å°±æŠŠç‹€æ…‹å¾€ä¸‹å‚³éç‰¹å®šå…ƒä»¶A


### è§£æ

because we can now store our state in that closest involved component.

So in that parent component which has access to both involved components by lifting our state up.


> The app component in our application has access to both the new expense and the expenses component because it renders both components in its returned JSX code, that's why we wanna utilize that

```
<NewExpense />
<Expenses />
```


é€™è£¡æŒ‡çš„æ˜¯app componentèƒ½å¤ å­˜å–å…¶childå…ƒä»¶ä¸‹é¢çš„è³‡è¨Š(propså¤¾å¸¶çš„è³‡è¨Š)

## è¤‡ç¿’
#ğŸ§  Reactï¼šå…·é«”å¦‚ä½•åˆ©ç”¨lifting state up æ¦‚å¿µ + pass state data via prosæ¦‚å¿µä¾†å¯¦ç¾å¾childå…ƒä»¶å‚³éè³‡è¨Šè‡³parentå…ƒä»¶ï¼Œä¸¦è®“parentå…ƒä»¶è™•ç†å’Œæ¸²æŸ“? æ¦‚å¿µä¸Šè¦å¦‚ä½•è§£æ±º ->->-> `	 å°‡ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹å¾€ä¸Šå‚³éè‡³parentå…ƒä»¶ä¸Šï¼Œä¸¦è®“parentå…ƒä»¶æ¥æ”¶åˆ°ç‹€æ…‹ä¾†ä¿®æ”¹æ¸²æŸ“ç”¨çš„è³‡æ–™ï¼Œæ¥è‘—è§¸ç™¼æ¸²æŸ“é€épropså¾€ä¸‹å°‡æ–°è³‡è¨Šæ›´æ–°è‡³å­å…ƒä»¶ä¾†é‡æ–°æ¸²æŸ“`
<!--SR:!2022-10-04,28,250-->


#ğŸ§  Reactï¼šå…·é«”å¦‚ä½•åˆ©ç”¨lifting state up æ¦‚å¿µ + pass state data via prosæ¦‚å¿µä¾†å¯¦ç¾å¾childå…ƒä»¶å‚³éè³‡è¨Šè‡³parentå…ƒä»¶ï¼Œä¸¦è®“parentå…ƒä»¶è™•ç†å’Œæ¸²æŸ“? å…·é«”å¯¦ç¾æ˜¯å¦‚ä½•ï¼Ÿ ->->-> `å°‡ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹è—‰ç”±parentå…ƒä»¶çµ¦äºˆçš„callbackä¾†é€šçŸ¥parentå…ƒä»¶æœ‰è³‡æ–™è®Šå‹•ï¼Œæ¥è‘—é€éåŸ·è¡Œparentå…ƒä»¶ä¸Šçš„setStateä¾†ä¾æ“šè³‡æ–™æ›´æ–°ä»¥åŠè§¸ç™¼æ¸²æŸ“ï¼Œè§¸ç™¼å¾Œæœƒé€épropså°‡æ–°ç‹€æ…‹å¾€ä¸‹å‚³éä¾†æ§‹ç¯‰æ–°çš„childå…ƒä»¶å’Œparent`
<!--SR:!2022-11-29,60,250-->


#ğŸ§  Reactï¼š lifting state up æ¦‚å¿µæ˜¯ä»€éº¼ï¼Ÿ(è«‹èªªåˆ°å‚³éå’Œæ¥æ”¶è€…è¦åšå•¥) ->->-> `å°‡ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹å¾€ä¸Šå‚³éè‡³parentå…ƒä»¶ä¸Šï¼Œå¥½è®“parentå…ƒä»¶æ¥æ”¶ä¸¦è™•ç†`
<!--SR:!2022-10-31,28,250-->


#ğŸ§  Reactï¼š lifting state up æ¦‚å¿µæ˜¯ä»€éº¼ï¼Ÿ ->->-> `å°‡ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹å¾€ä¸Šå‚³éè‡³parentå…ƒä»¶ä¸Šï¼Œå¥½è®“parentå…ƒä»¶æ¥æ”¶ä¸¦è™•ç†`
<!--SR:!2022-10-03,10,250-->


#ğŸ§  Reactï¼š lifting state up æ¦‚å¿µçš„å¯¦ä½œæœƒæ˜¯ä»€éº¼ï¼Ÿ->->-> `å°‡ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹è—‰ç”±parentå…ƒä»¶çµ¦äºˆçš„callbackä¾†é€šçŸ¥parentå…ƒä»¶æœ‰è³‡æ–™è®Šå‹•`
<!--SR:!2022-10-31,28,250-->


#ğŸ§  Reactï¼šç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹è¨»å†Šåœ¨å…¶parentå…ƒä»¶ä¸Šï¼Œç‰¹å®šå…ƒä»¶Aå’Œparentå…ƒä»¶çš„ç‹€æ…‹æ‰€æœ‰æ¬Šåˆ†åˆ¥å¦‚ä½•ï¼Ÿ ->->-> `ç‰¹å®šå…ƒä»¶Aç”±æ–¼è½‰ç§»ç‹€æ…‹ï¼Œæ‰€ä»¥æ²’æœ‰è¢«è½‰ç§»éçš„ç‹€æ…‹ï¼Œè€Œparentå…ƒä»¶æ“æœ‰ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹`
<!--SR:!2022-10-31,28,250-->

#ğŸ§  Reactï¼šç‰¹å®šå…ƒä»¶Aåˆ©ç”¨lifting state upæ–¹å¼å‚³éè‡ªå·±ç‹€æ…‹è‡³å…¶parentå…ƒä»¶ä¸Šï¼Œç‰¹å®šå…ƒä»¶Aå’Œparentå…ƒä»¶çš„ç‹€æ…‹æ‰€æœ‰æ¬Šåˆ†åˆ¥å¦‚ä½•ï¼Ÿ ->->-> `ç‰¹å®šå…ƒä»¶Aå’Œparentå…ƒä»¶çš„ç‹€æ…‹é‚„ä¿æœ‰åŸæœ‰æ¨£å­`
<!--SR:!2022-10-31,28,250-->

#ğŸ§  Reactï¼šlifting state up vs.  ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹æ”¹è¨»å†Šè‡³å…¶parentå…ƒä»¶ å·®ç•°æ˜¯ä»€éº¼ï¼Ÿ(ç°¡ç­”)->->-> `å·®ç•°ï¼šç‹€æ…‹æ‰€æœ‰æ¬Šã€å‚³éç‹€æ…‹æ–¹å‘`
<!--SR:!2022-10-31,28,250-->

#ğŸ§  Reactï¼šç‰¹å®šå…ƒä»¶Aåˆ©ç”¨lifting state upæ–¹å¼å‚³éè‡ªå·±ç‹€æ…‹è‡³å…¶parentå…ƒä»¶ä¸Šï¼Œç‰¹å®šå…ƒä»¶Aå’Œparentå…ƒä»¶çš„å‚³éç‹€æ…‹æ–¹å‘æ˜¯ï¼Ÿ ->->-> `lifting state upç´”ç²¹å°‡ç›®å‰å…ƒä»¶ä¸Šçš„ç‹€æ…‹å¾€ä¸Šå‚³éè‡³å…¶parentå…ƒä»¶ï¼Œè®“parentå…ƒä»¶æ¥æ”¶åˆ°ä¸¦è™•ç†`
<!--SR:!2022-10-27,24,250-->

#ğŸ§  Reactï¼šç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹è¨»å†Šåœ¨å…¶parentå…ƒä»¶ä¸Šï¼Œç‰¹å®šå…ƒä»¶Aå’Œparentå…ƒä»¶çš„å‚³éç‹€æ…‹æ–¹å‘æ˜¯ï¼Ÿ ->->-> `ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹è¨»å†Šåœ¨å…¶parentå…ƒä»¶ï¼šè½‰ç§»å¾Œï¼Œparentå…ƒä»¶å°±æŠŠç‹€æ…‹å¾€ä¸‹å‚³éç‰¹å®šå…ƒä»¶A`
<!--SR:!2022-10-31,28,250-->

#ğŸ§  Reactï¼šè‹¥ç‰¹å®šå…ƒä»¶Açš„ç‹€æ…‹æ”¹è¨»å†Šè‡³å…¶parentå…ƒä»¶ä¸Šï¼Œç®—æ˜¯lifting state upçš„æŠ€è¡“ä¸€éƒ¨åˆ†å—ï¼Ÿ ç‚ºä»€éº¼ï¼Ÿè«‹è©¦è‘—ä»¥è¨»å†Šçš„è§’åº¦ä¾†é–‹å§‹èªªèµ·->->-> `ä¸¦ä¸ç®—ï¼Œæœ¬è³ªä¸Šå°±ä¸ä¸€æ¨£ï¼Œè¨»å†Šå¾Œï¼Œç‹€æ…‹æœƒè¢«è½‰ç§»è‡³parentå…ƒä»¶ï¼Œä¸¦ç”±parentå…ƒä»¶å‚³éè³‡è¨Šè‡³ç‰¹å®šå…ƒä»¶Aï¼›è€Œlifting state upå‰‡æ˜¯åœ¨ä¿ç•™ç‹€æ…‹ä¸‹ï¼Œå¾€ä¸Šå‚³éè‡ªå·±ç‹€æ…‹è‡³parentå…ƒä»¶`
<!--SR:!2022-10-31,28,250-->




---
Status: #ğŸŒ± 
Tags:
[[React]] - [[JavaScript]]
Links:
[[Reactï¼šå…·é«”å¦‚ä½•åˆ©ç”¨lifting state up æ¦‚å¿µ + pass state data via prosæ¦‚å¿µä¾†å¯¦ç¾å¾childå…ƒä»¶å‚³éè³‡è¨Šè‡³parentå…ƒä»¶ï¼Œä¸¦è®“parentå…ƒä»¶è™•ç†å’Œæ¸²æŸ“]]
References:
[[@freecodecampWhatLiftingState2021]]
[[@fooishReactTiShengGongYongZhuangTaiLifting]]