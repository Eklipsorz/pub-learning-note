## æè¿°

[[@ithomeDay04DOM]]
> DOM ç¯€é»èˆ‡ç€è¦½å™¨ä¸­çš„æ¸²æŸ“å¼•æ“ç¶å®šï¼Œç•¶æˆ‘å€‘åœ¨æ“ä½œ DOM çš„æ™‚å€™å°±æœƒé€£å¸¶è§¸ç™¼ç€è¦½å™¨çš„æ¸²æŸ“å¼•æ“é€²è¡Œä¸€é€£ä¸²æ›´æ–°ç•«é¢çš„æµç¨‹ï¼Œå› æ­¤ DOM çš„æ“ä½œåœ¨æ•ˆèƒ½ä¸Šæ˜¯ç›¸å°æ˜‚è²´çš„å‹•ä½œï¼Œç•¶ç•«é¢ä¸Šæœ‰å¤§é‡çš„ DOM åœ¨çŸ­æ™‚é–“å…§ç•°å‹•æ™‚æ›´å®¹æ˜“å‡ºç¾ç•«é¢ä¸Šçš„å¡é “ç­‰ç­‰å•é¡Œã€‚å› æ­¤ï¼Œåœ¨ç€è¦½å™¨ä¸­ç›¡å¯èƒ½åœ°æ¸›å°‘ DOM æ“ä½œ â€”â€” å…·é«”ä¾†èªªï¼Œæ‡‰è©²æ˜¯ã€Œä»¥æœ€å°‘çš„ DOM æ“ä½œä¾†é”åˆ°æ‰€éœ€è¦çš„ç•«é¢çµæœã€ï¼Œå°‡æœƒæ˜¯å‰ç«¯æ•ˆèƒ½å„ªåŒ–çš„é‡è¦é—œéµã€‚


é‡é»ï¼š
- å‚³çµ±ä¸Šç‚ºäº†è®“ç€è¦½å™¨å‘ˆç¾æƒ³è¦çš„ç•«é¢ï¼Œæœƒä»¥èƒ½ç”¨DOM ç¯€é»è¡¨ç¤ºç•«é¢ä¸Šçš„å…ƒä»¶ä¸¦ä¸”ä½¿ç”¨å…¶ APIæ–¹å¼ä¾†æ±ºå®šç•«é¢ï¼Œè€Œå°æ‡‰DOM APIæœƒè¢«è½‰æ›å‡ºä¸€ç³»åˆ—æŒ‡ç¤ºç€è¦½å¦‚ä½•æ›´æ–°ç•«é¢çš„æŒ‡ä»¤æˆ–è€…æ¸²æŸ“æŒ‡ä»¤ã€‚
- æ½›åœ¨å•é¡Œï¼š
	- è‹¥åœ¨çŸ­æ™‚é–“å…§ç™¼ç”Ÿå¤§é‡DOM APIä¾†æ±ºå®šç•«é¢æ˜¯ä»€éº¼ï¼Œé‚£éº¼å°±ç”¢ç”Ÿå‡ºå¤§é‡çš„æ¸²æŸ“æŒ‡ä»¤ä¾†å‘ŠçŸ¥ç€è¦½å™¨è¦å¦‚ä½•æ¸²æŸ“
- å°æ–¼å‰ç«¯é–‹ç™¼ä¾†èªªï¼Œæ•ˆèƒ½å¯ä»¥å¾ **ä»¥æœ€å°‘çš„Real DOMæ“ä½œä¾†é”åˆ°æ‰€æƒ³è¦çš„ç•«é¢çµæœ** ä¾†é€²è¡Œæ”¹å–„ã€‚

### Virtual DOM æ˜¯ä»€éº¼

[[@ithomeDay04DOM]]
> æ„ç¾©ä¸Šä¾†èªªï¼ŒVirtual DOM æ˜¯çœŸå¯¦ DOM çš„è™›æ§‹æè¿°é«”ï¼Œå®ƒå¯¦éš›ä¸Šä¹Ÿæ˜¯ä¸€ç¨®æ¨¹ç‹€çµæ§‹çš„è³‡æ–™ã€‚

> **æ¯ä¸€å€‹ Virtual DOM element çš„è³‡æ–™éƒ½æ˜¯æ™®é€šçš„ JavaScript ç‰©ä»¶è®Šæ•¸ï¼Œå…§å®¹å‰‡å˜—è©¦åœ¨æè¿°ä¸€å€‹çœŸå¯¦çš„ DOM element é è¨ˆè¦é•·çš„æ¨£å­**ï¼ˆåƒæ˜¯å…ƒç´ é¡å‹ã€å±¬æ€§ã€å­å…ƒç´ æœ‰å“ªäº›â€¦ç­‰ç­‰è³‡è¨Šï¼‰ã€‚æ¥è‘—é€éè² è²¬æ¸²æŸ“ç•«é¢çš„ç¨‹å¼è™•ç†å¾Œï¼Œå°±èƒ½å°‡ Virtual DOM element è½‰æ›ä¸¦ç”¢ç”Ÿæˆå¯¦éš›çš„ DOM elementï¼Œä»¥æ›´æ–°ç€è¦½å™¨çš„å¯¦éš›ç•«é¢ã€‚




é‡é»ï¼š
- Virtual DOM ç¯€é»/çµæ§‹ æœ¬èº«æ˜¯æŒ‡é›»è…¦ç¨‹å¼é‡å°å°æ‡‰Real DOM ç¯€é»/çµæ§‹ ä¾†ç”Ÿæˆç›¸åŒç‰¹æ€§å’Œè¡Œç‚ºçš„DOM ç‰©ä»¶çµæ§‹ï¼Œåªæ˜¯è©²DOMç‰©ä»¶çµæ§‹åªèƒ½å¤ å­˜åœ¨æ–¼ç‰¹å®šç³»çµ±ä¸Šï¼Œåœ¨é€™è£¡æœƒå­˜åœ¨æ–¼Reactå±¤ç´šä¸Š
- React ä¸»è¦æœƒä»¥Virtual DOMç‚ºå–®ä½ä¾†è™•ç†å…ƒä»¶çš„æ§‹å»º
- Virtual DOM ç¯€é»/çµæ§‹ åœ¨Reactä¸Šçš„çµæ§‹ï¼š
	- ä¸»è¦æœƒä»¥JSç‰©ä»¶ä¾†å°æ‡‰Real DOMç¯€é»
	- å…¶å±¬æ€§(property)æœƒæœ‰å°æ‡‰Real DOMç¯€é»æœƒæœ‰çš„è³‡è¨Šï¼Œå¦‚å…ƒç´ ç¨®é¡ã€å±¬æ€§å€¼(attribute)ã€åŒ…å«çš„å­ç¯€é»æœƒæœ‰ä»€éº¼
- Virtual DOM ç¯€é»/çµæ§‹ åœ¨Reactå±¤ç´šä¸Šæœƒæœ‰ç¨‹å¼æ¨¡çµ„å°ˆé–€è½‰æ›æˆ å°æ‡‰çš„Real DOMå…ƒç´ 

### Real DOM vs. Virtual DOM

> é›–ç„¶æ¯æ¬¡é‡æ–°ç”¢ç”Ÿç•«é¢çš„ Virtual DOM è³‡æ–™ï¼Œä¸¦ä¸”èˆ‡èˆŠæœ‰çš„ Virtual DOM é€²è¡Œè©³ç´°çš„æ¨¹ç‹€çµæ§‹æ¯”è¼ƒéƒ½æœƒæœ‰æ•ˆèƒ½ä¸Šçš„èŠ±è²»ï¼Œä½†æ˜¯ç•¢ç«Ÿæ“ä½œçš„æ˜¯æ™®é€šçš„ JavaScript ç‰©ä»¶è³‡æ–™ï¼Œä¸¦ä¸”èˆ‡çœŸå¯¦çš„ DOM ä¸åŒçš„æ˜¯ï¼Œ**Virtual DOM ä¸¦æ²’æœ‰èˆ‡ç€è¦½å™¨çš„æ¸²æŸ“å¼•æ“åšç›´æ¥çš„ç¶å®š**ï¼Œå› æ­¤æ•´é«”ä¾†èªªé‚„æ˜¯æ¯”é »ç¹ä¸”å¤§é‡çš„æ“ä½œçœŸå¯¦ DOM çš„æ•ˆèƒ½èŠ±è²»è¦ä½äº†è¨±å¤šã€‚


é‡é»ï¼š
- ç”¨é€”ï¼šReal DOMæ˜¯ç›´æ¥æŒ‡ç¤ºç€è¦½å™¨è©²å¦‚ä½•æ¸²æŸ“ï¼›Virtual DOMæ˜¯å¾Real DOMæŠ½é›¢å‡ºä¾†çš„ç‰ˆæœ¬ï¼Œè©²ç‰ˆæœ¬åƒ…æè¿°å°æ‡‰ç•«é¢çš„ DOMçµæ§‹ï¼Œä¸¦æ²’è¾¦æ³•æŒ‡ç¤ºç€è¦½å™¨è©²å¦‚ä½•æ¸²æŸ“ï¼Œç”¨é€”ç‚ºæè¿°ç”¨çš„è—åœ–
- èª°èƒ½ç›´æ¥å‘ŠçŸ¥ç€è¦½å™¨å¦‚ä½•æ¸²æŸ“ï¼šReal DOM èƒ½ç›´æ¥æŒ‡ç¤º ï¼› Virtual DOMæ²’è¾¦æ³•
- å¦‚ä½•æŒ‡ç¤ºç€è¦½å™¨ä¾†æ¸²æŸ“ç•«é¢ï¼Œä¸åˆ†ç›´æ¥æˆ–è€…é–“æ¥ï¼šReal DOM èƒ½ç›´æ¥æŒ‡ç¤º ï¼› Virtual DOM å…ˆè½‰æ›æˆå°æ‡‰Real DOMï¼Œç„¶å¾Œä»¥Real DOMä¾†æŒ‡ç¤ºæ¸²æŸ“ç•«é¢


### Virtual DOMç‚ºä½•å‡ºç¾ï¼Ÿ
[[@ithomeDay04DOM]]
> ä½ å¯ä»¥æƒ³åƒ Virtual DOM å°±åƒæ˜¯ç•«é¢ç”¢ç”Ÿçš„æ¨¡æ“¬å½©æ’å ´ï¼Œæ¯æ¬¡æœ‰æ–° UI ç•«é¢ç”¢ç”Ÿçš„éœ€æ±‚æ™‚ï¼Œæˆ‘å€‘å¯ä»¥ç”¨ä»¥ä¸‹æµç¨‹ä¾†å®Œæˆç•«é¢æ›´æ–°ï¼š

> 1.  **é€éäº‹å…ˆå®šç¾©å¥½çš„æ¨¡æ¿ç¨‹å¼ä¾†ç”¢ç”Ÿæ–°çš„ Virtual DOM Tree ï¼Œä½œç‚ºæ–°çš„å½©æ’çµæœ**
> 2.  **ä¸¦ä¸”èˆ‡æ­¤å‰æœ€å¾Œä¸€æ¬¡èˆŠç•«é¢ç”¨çš„ Virtual DOM Tree é€²è¡Œå…©æ£µæ¨¹çš„çµæ§‹ç´°ç¯€æ¯”è¼ƒï¼Œå…¶ä¸­å·®ç•°ä¹‹è™•æ‰æ˜¯æœ¬æ¬¡ç•«é¢æ›´æ–°ä¸­çœŸæ­£æœ‰éœ€è¦è®Šæ›´çš„éƒ¨åˆ†**
> 3.  å°‡æ–°èˆŠ Virtual DOM Tree ä¸­æœ‰å·®ç•°çš„éƒ¨åˆ†æ›´æ–°åˆ°çœŸå¯¦çš„ DOM Tree ä¸­ï¼Œä»¥å®Œæˆç€è¦½å™¨ç•«é¢çš„æ›´æ–°

> é€éé€™å€‹æµç¨‹ï¼Œæˆ‘å€‘å°±å¯ä»¥å°‡çœŸå¯¦çš„ DOM æ“ä½œç¯„åœæœ€å°åŒ–ï¼Œä¸¦é™ç¸®åœ¨é€™äº›çœŸæ­£éœ€è¦è®Šæ›´çš„åœ°æ–¹ï¼Œä¾†ç›¡å¯èƒ½çš„æ¸›å°‘å›  DOM æ“ä½œè€Œé€ æˆçš„æ•ˆèƒ½èŠ±è²»ã€‚

![](https://miro.medium.com/max/1400/1*ZXE-64hJcWYfNjmWAjiRmw.png)

é‡é»ï¼š
- Virtual DOM æ¦‚å¿µçš„æå‡ºåŸå› ï¼š
	- ç‚ºäº†å¯¦ç¾ **ä»¥æœ€å°‘çš„Real DOMæ“ä½œä¾†é”åˆ°æ‰€æƒ³è¦çš„ç•«é¢çµæœ**ã€‚
-  **ä»¥æœ€å°‘çš„Real DOMæ“ä½œä¾†é”åˆ°æ‰€æƒ³è¦çš„ç•«é¢çµæœ** ï¼šæœƒå°‡çœŸæ­£è¦ä¿®æ”¹çš„DOM çµæ§‹å’Œæ“ä½œåƒ…é™æ–¼çœŸæ­£éœ€è¦çš„åœ°æ–¹ï¼Œè€Œéæ•´é«”ã€‚

- é¦–å…ˆå…ˆä»¥JSå±¤ç´šä¾†å°‡Real DOMçµæ§‹æŠ½é›¢å‡º **åƒ…æè¿°ç›¸å°æ‡‰ç•«é¢çš„DOMçµæ§‹**ï¼Œä¸¦ä»¥æ­¤çµæ§‹ä½œç‚ºè—åœ–ä¾†æŒ‡ç¤ºè¦å¦‚ä½•ä¿®æ”¹å°æ‡‰çš„Real DOMçµæ§‹ã€‚ è©²è—åœ–å°±æ˜¯Virtual DOMï¼š
		- ä»¥å°‡è¦æ¸²æŸ“åœ¨Real DOM Treeçš„ç•«é¢è½‰æ›æˆå°æ‡‰çš„Virtual DOMçµæ§‹
		- ç¬¬ä¸€é …æ‰€ç²å¾—çš„çµæ§‹èˆ‡ç›®å‰ç•«é¢å°æ‡‰çš„Virtual DOMçµæ§‹æ¯”è¼ƒå·®ç•°
		- ç²å–å·®ç•°å¾Œï¼Œå°±äº¤çµ¦Reactå±¤ç´šçš„è½‰æ›ç¨‹å¼ä¾†è½‰æ›æˆå°æ‡‰Real DOMç¯€é»/çµæ§‹ä¾†æ›´æ–°ç›®å‰DOM Treeæ›´æ–°ï¼Œå…¶å°æ‡‰Real DOMç¯€é»/çµæ§‹æœƒæ˜¯ä»¥å·®ç•°ç‚ºä¸»ï¼Œè€Œéä»¥æ•´é«”ã€‚



### èª¤è§£ï¼šVirtual DOM æ˜¯å¾çœŸå¯¦ DOM è¤‡è£½ä¸€ä»½å‡ºä¾†çš„ copy

[[@ithomeDay04DOM]]
> Virtual DOM æ˜¯å¾çœŸå¯¦ DOM è¤‡è£½ä¸€ä»½å‡ºä¾†çš„ copy

é‡é»ï¼š
- Virtual DOM æ˜¯å¾çœŸå¯¦ DOM è¤‡è£½ä¸€ä»½å‡ºä¾†çš„ copy é€™é …è«–é»æ˜¯éŒ¯çš„ã€‚
- Virtual DOM æœ¬èº«æ˜¯å¾Real DOMæŠ½é›¢å‡ºä¾†çš„ç‰ˆæœ¬ï¼Œè©²ç‰ˆæœ¬åƒ…æè¿°è‘—å°æ‡‰ç•«é¢çš„DOMçµæ§‹ã€‚


### Virtual å‘½åç·£ç”±
virtual adj 
> You can use virtual to indicate that something is so nearly true that for most purposes it can be regarded as true.

virtual adj
> objects and activities are generated by a computer to simulate real objects and activities.

virtual adj
> made to appear to exist by the use of computer software, for example on the internet

é‡é»ï¼š
- ç”±ç¨‹å¼æˆ–è€…é›»è…¦ä¾ç…§å¯¦é«”ç‰©ä»¶Aæ“æœ‰çš„ç‰¹å¾µã€è¡Œç‚ºä¾†ç”Ÿæˆå¦ä¸€å€‹ç›¸åŒç‰¹å¾µã€è¡Œç‚ºçš„ç‰©ä»¶Bï¼Œä½†ç‰©ä»¶Aå’Œç‰©ä»¶Bæœ¬èº«çš„å­˜åœ¨æ€§è³ªä¸Šæœƒæ˜¯ä¸ä¸€æ¨£ï¼Œæ¯”å¦‚ç‰©ä»¶Aå­˜åœ¨æ–¼ç¾å¯¦ï¼Œè€Œç‰©ä»¶Båªå­˜åœ¨æ–¼é›»è…¦æˆ–è€…ç‰¹å®šç³»çµ±ä¸­

## è¤‡ç¿’


---
Status: #ğŸŒ± #ğŸ““ 
Tags:
[[React]]
Links:
References:
[[@ithomeDay04DOM]]