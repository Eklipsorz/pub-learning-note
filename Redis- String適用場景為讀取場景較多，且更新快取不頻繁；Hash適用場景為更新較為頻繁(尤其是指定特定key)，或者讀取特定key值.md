## æè¿°

### String vs. Hash

#### è¨˜æ†¶é«”æˆæœ¬
1. è¨˜æ†¶é«”æˆæœ¬ï¼š
- ä»¥Stringä½œç‚ºValueçš„æˆæœ¬ï¼Œç›¸è¼ƒæ–¼Hashï¼Œæ¯”è¼ƒå–®ç´”ä¸”æ¯”è¼ƒå°‘
- ä»¥Hashä½œç‚ºValueçš„æˆæœ¬ï¼Œç›¸è¼ƒæ–¼Stringï¼Œæ¯”è¼ƒç¹è¤‡ä¸”ç”±æ–¼å°‡è³‡æ–™åˆ‡åˆ†é–‹ä¾†å„²å­˜ï¼Œæ¯å€‹è¦å„²å­˜çš„å½¢å¼åˆæ˜¯ä»¥key-valueçš„å½¢å¼ï¼Œæ‰€ä»¥æˆæœ¬ä¸Šæœƒæ¯”è¼ƒå¤š

#### è¡¨ç¤ºå¤šå€‹å±¬æ€§å€¼è³‡æ–™çš„å½¢å¼
2. è¡¨ç¤ºå­˜åœ¨å¤šå€‹å±¬æ€§å€¼çš„è³‡æ–™çš„å½¢å¼ï¼š
- ä»¥Stringä¾†èªªçš„è©±ï¼Œä¸»è¦å¯ä»¥æ˜¯å°‡æ‰€æœ‰å±¬æ€§å€¼åˆä½µä¸€å€‹æ–°å­—ä¸²ï¼Œå¦‚ä¸‹åœ–ç”±keyå°æ‡‰æ–°å­—ä¸²
```
key -> <property1>:value1,<property2>:value2,<property3>:value3,...
```

- ä»¥Stringä¾†èªªçš„è©±ï¼Œé™¤äº†ä¸Šè¿°çš„æ–¹æ³•ï¼Œé‚„æœ‰æ ¹æ“šå±¬æ€§é¡å¤–å»ºç«‹key-value pair
```
key:<property1> -> value1
key:<property2> -> value2
key:<property3> -> value3
.
.
```

- ä»¥Hashä¾†èªªçš„è©±ï¼Œæœƒç›´æ¥å»ºç«‹ä¸€å€‹dictionaryä¾†å„²å­˜é‚£äº›å±¬æ€§å€¼

```
key -> dictionary
```

#### ä¿®æ”¹ç‰¹å®šè³‡æ–™ä¸Šçš„ç‰¹å®šå±¬æ€§
3. ä¿®æ”¹ç‰¹å®šè³‡æ–™ä¸Šç‰¹å®šå±¬æ€§ï¼šè‹¥è³‡æ–™æœ¬èº«æœ‰å¤šå€‹å±¬æ€§çš„å±¬æ€§å€¼
- ä»¥Stringä¾†èªªçš„è©±ï¼Œè‹¥æ˜¯æ¡ç”¨ä¸»è¦å¯ä»¥æ˜¯å°‡æ‰€æœ‰å±¬æ€§å€¼åˆä½µä¸€å€‹æ–°å­—ä¸²ï¼Œè¦ä¿®æ”¹ç‰¹å®šå±¬æ€§çš„å€¼ï¼Œå°±å¿…é ˆç‚ºäº†é‚£å€‹å€¼ï¼Œè€Œå°‡æ•´ç­†è³‡æ–™(ä¸åŒ…å«è¦ä¿®æ”¹çš„å±¬æ€§å€¼)éƒ½è¤‡è£½ä¸€ä»½ä¸¦èˆ‡æ–°å±¬æ€§å€¼åˆä½µæˆä¸€å€‹æ–°å­—ä¸²ï¼Œæ¯”å¦‚èªªä½¿ç”¨è€…è³‡æ–™æœ‰åå­—ã€æ€§åˆ¥ã€é›»è©±ï¼Œå‡è¨­åŸè³‡æ–™ç‚º
```
å°æ˜ï¼šç”·ï¼š0102103131
```
ä½†è‹¥æƒ³ä¿®æ”¹å°æ˜çš„é›»è©±ï¼Œç†è«–ä¸Šå°±åªä¿®æ”¹é›»è©±çš„å€¼ï¼Œä½†Stringæ²’ç¨ç«‹å­˜æ”¾ï¼Œå› æ­¤åªèƒ½æ•´ç­†è³‡æ–™ä¸€èµ·æ”¹
```
å°æ˜ï¼šç”·ï¼š1234567890
```
- ä»¥Stringä¾†èªªçš„è©±ï¼Œè‹¥æ˜¯å°‡keyå€¼å’Œå±¬æ€§åç¨±ä½œç‚ºæ–°keyä»¥åŠå°æ‡‰å±¬æ€§å€¼çš„è©±ï¼Œå°±ç›´æ¥é‡å°keyå’Œå±¬æ€§åç¨±å°æ‡‰çš„å±¬æ€§å€¼ä¾†ä¿®æ”¹ã€‚
- ä»¥Hashä¾†èªªçš„è©±ï¼Œè¦ä¿®æ”¹ç‰¹å®šå±¬æ€§çš„å€¼ï¼Œç”±æ–¼æœƒå°‡è³‡æ–™åˆ‡åˆ†æˆå¥½å¹¾åˆ†ç¨ç«‹çš„éƒ¨åˆ†ä¾†å„²å­˜ï¼Œæ¯å€‹åˆæ˜¯ä»¥key-value pairä¾†è¡¨ç¤ºï¼Œæ‰€ä»¥åªè¦æŒ‡å®šå°æ‡‰keyå°±èƒ½ç›´æ¥ä¿®æ”¹

#### æ–°å¢ç‰¹å®šè³‡æ–™ä¸Šçš„ç‰¹å®šå±¬æ€§
4.  æ–°å¢ç‰¹å®šå±¬æ€§å€¼è‡³ç‰¹å®šè³‡æ–™ï¼šè‹¥è³‡æ–™æœ¬èº«æœ‰å¤šå€‹å±¬æ€§çš„å±¬æ€§å€¼
- ä»¥Stringä¾†èªªçš„è©±ï¼Œè‹¥æ˜¯æ¡ç”¨ä¸»è¦å¯ä»¥æ˜¯å°‡æ‰€æœ‰å±¬æ€§å€¼åˆä½µä¸€å€‹æ–°å­—ä¸²ï¼Œè¦ä¿®æ”¹ç‰¹å®šå±¬æ€§å€¼ï¼Œå°±å¿…é ˆç‚ºäº†é‚£å€‹å€¼ï¼Œè€Œå°‡åŸè³‡æ–™éƒ½è¤‡è£½ä¸€ä»½ä¸¦èˆ‡æ–°å±¬æ€§å€¼åˆä½µæˆä¸€å€‹æ–°å­—ä¸²

- ä»¥Stringä¾†èªªçš„è©±ï¼Œè‹¥æ˜¯å°‡keyå€¼å’Œå±¬æ€§åç¨±ä½œç‚ºæ–°keyä»¥åŠå°æ‡‰å±¬æ€§å€¼çš„è©±ï¼Œå°±ç›´æ¥çœŸå°keyå’Œæ–°å±¬æ€§åç¨±ä¾†æ–°å¢å°æ‡‰å±¬æ€§å€¼

- ä»¥Hashä¾†èªªçš„è©±ï¼Œè¦æ–°å¢ç‰¹å®šè³‡æ–™ä¸Šçš„ç‰¹å®šå±¬æ€§ï¼Œå°±åªéœ€è¦æŒ‡å®šhash ä¸Škeyå€¼å°±èƒ½ç›´æ¥æ–°å¢

4. è®€å–ç‰¹å®šè³‡æ–™ä¸Šçš„ç‰¹å®šå±¬æ€§å€¼ï¼šè‹¥è³‡æ–™æœ¬èº«æœ‰å¤šå€‹å±¬æ€§çš„å±¬æ€§å€¼
- ä»¥Stringä¾†èªªçš„è©±ï¼Œè¦è®€å–ç‰¹å®šè³‡æ–™ä¸Šç‰¹å®šå±¬æ€§å€¼ï¼Œå°±å¾—å°‡å…ˆå°‡

3. æ–°å¢è®€å–/ä¿®æ”¹/åˆªé™¤å…¨éƒ¨è³‡æ–™çš„è©±
- ä»¥Stringä¾†èªªï¼Œå°±ç›´æ¥æ›´æ”¹valueå€¼ï¼Œä¸éœ€è¦æŒ‡å®škeyä¾†é€²è¡Œæ“ä½œ
- ä»¥Hashä¾†èªªï¼Œå°±å¿…é ˆæŒ‡å®šæ¯å€‹keyä¾†é€²è¡Œæ“ä½œ


### é©ç”¨å ´æ™¯ï¼šString vs. Hash 
å¼•ç”¨[[@RedisCunjsonZiLiaoShiXuanZestringHuanShihash]]æ‰€æè¿°çš„å ´æ™¯ï¼š
> -   å¦‚æœä½ çš„æ¥­å‹™å‹åˆ¥ä¸­å°æ–¼å¿«å–çš„è®€å–å¿«å–çš„å ´æ™¯æ›´å¤šï¼Œä¸¦ä¸”æ›´æ–°å¿«å–ä¸é »ç¹ï¼ˆæˆ–è€…æ¯æ¬¡æ›´æ–°éƒ½æ›´æ–°jsonè³‡æ–™ä¸­çš„å¤§å¤šæ•¸keyï¼‰ï¼Œé‚£éº¼é¸æ“‡stringå‹åˆ¥ä½œç‚ºå„²å­˜æ–¹å¼æœƒæ¯”è¼ƒå¥½ã€‚
> -   å¦‚æœä½ çš„æ¥­å‹™å‹åˆ¥ä¸­å°æ–¼å¿«å–çš„æ›´æ–°æ¯”è¼ƒé »ç¹ï¼ˆç‰¹åˆ¥æ˜¯æ¯æ¬¡åªæ›´æ–°å°‘æ•¸å¹¾å€‹éµï¼‰æ™‚ï¼Œ æˆ–è€…æˆ‘å€‘æ¯æ¬¡åªæƒ³å–jsonè³‡æ–™ä¸­çš„å°‘æ•¸å¹¾å€‹éµå€¼æ™‚ï¼Œæˆ‘å€‘é¸æ“‡hashå‹åˆ¥ä½œç‚ºæˆ‘å€‘çš„å„²å­˜æ–¹å¼æœƒæ¯”è¼ƒå¥½ã€‚
ä»¥åŠæ ¹æ“š[[@yunshu_youpaiyunRedisCunChuDuiXiangXinXiShiYongHash]]æ‰€æè¿°çš„ï¼š
> **é€‚åˆç”¨ String å­˜å‚¨çš„æƒ…å†µï¼š**
>-   æ¯æ¬¡éœ€è¦è®¿é—®å¤§é‡çš„å­—æ®µ
>-   å­˜å‚¨çš„ç»“æ„å…·æœ‰å¤šå±‚åµŒå¥—çš„æ—¶å€™
>**é€‚åˆç”¨ Hash å­˜å‚¨çš„æƒ…å†µï¼š**
>-   åœ¨å¤§å¤šæ•°æƒ…å†µä¸­åªéœ€è¦è®¿é—®å°‘é‡å­—æ®µ
>-   è‡ªå·±å§‹ç»ˆçŸ¥é“å“ªäº›å­—æ®µå¯ç”¨ï¼Œé˜²æ­¢ä½¿ç”¨ mget æ—¶è·å–ä¸åˆ°æƒ³è¦çš„æ•°æ®

String é©ç”¨å ´æ™¯ç‚ºï¼š
- è®€å–(æ•´ä»½æˆ–è€…å¤§å¤šæ•¸éµå€¼)è³‡æ–™ã€æ›´æ–°å¿«å–ä¸é »ç¹(æˆ–è€…æ¯æ¬¡éƒ½æ›´æ–°jsonè³‡æ–™çš„å¤§å¤šæ•¸key)çš„å ´æ™¯ 
(ç†ç”±æ˜¯String è¨˜æ†¶é«”æˆæœ¬æ¯”Hashè¼ƒå°ï¼Œä¸”Stringæ˜¯æ•´å€‹åŒ…å«è³‡æ–™)

Hash é©ç”¨å ´æ™¯ç‚ºï¼š
- æ¸…æ¥šç†è§£å“ªäº›key-valueæ˜¯å¯ç”¨çš„(å¦å‰‡æœƒè®€å–åˆ°éŒ¯èª¤å€¼æˆ–è€…ç©ºå€¼)
- æ›´æ–°è¼ƒç‚ºé »ç¹ï¼Œå°¤å…¶æ˜¯æŒ‡å®šç‰¹å®škeyå€¼
- è®€å–ç‰¹å®šå°‘é‡çš„keyå€¼
(ç†ç”±æ˜¯Hashæ˜¯å°‡è³‡æ–™åˆ‡åˆ†æˆæ›´ç´°çš„key-value pairï¼Œæ‰€ä»¥å¯ä»¥é€ékeyä¾†å°ç‰¹å®švalueé€²è¡Œæ“ä½œ)

## è¤‡ç¿’


#ğŸ§   Redis è¨˜æ†¶é«”æˆæœ¬: string vs. hash ->->-> `ä»¥Stringä½œç‚ºValueçš„æˆæœ¬ï¼Œç›¸è¼ƒæ–¼Hashï¼Œæ¯”è¼ƒå–®ç´”ä¸”æ¯”è¼ƒå°‘ï¼›ä»¥Hashä½œç‚ºValueçš„æˆæœ¬ï¼Œç›¸è¼ƒæ–¼Stringï¼Œæ¯”è¼ƒç¹è¤‡ä¸”ç”±æ–¼å°‡è³‡æ–™åˆ‡åˆ†é–‹ä¾†å„²å­˜ï¼Œæ¯å€‹è¦å„²å­˜çš„å½¢å¼åˆæ˜¯ä»¥key-valueçš„å½¢å¼ï¼Œæ‰€ä»¥æˆæœ¬ä¸Šæœƒæ¯”è¼ƒå¤š`

#ğŸ§  Redisä¸Š string å’Œ hash åˆ†åˆ¥å¦‚ä½•è¡¨ç¤ºå­˜åœ¨å¤šå€‹å±¬æ€§å€¼çš„è³‡æ–™çš„å½¢å¼(æç¤ºï¼šstringæœ‰å…©å€‹æ–¹æ³•ï¼Œhashæœ‰ä¸€å€‹æ–¹æ³•)->->-> `stringä¸»è¦æœ‰å…©å€‹æ–¹æ³•åˆ†åˆ¥ç‚ºå°‡å¤šå€‹å±¬æ€§å€¼çµ„åˆä¸€å€‹å­—ä¸²ä½œç‚ºvalueï¼Œæˆ–è€…å°‡keyèˆ‡å±¬æ€§åç¨±æ§‹æˆæ–°çš„keyï¼Œç„¶å¾Œå…¶valueç‚ºå°æ‡‰keyä¸Šçš„ç‰¹å®šå±¬æ€§å€¼ï¼›hashå°±ç›´æ¥ä»¥dictionaryä¾†è£½ä½œå¤šå€‹key-value pairså°±å³å¯å®Œæˆ`

#ğŸ§  Redis ä¸Š string å’Œhash åˆ†åˆ¥å¦‚ä½•ä¿®æ”¹(æ“æœ‰å¤šå€‹å±¬æ€§å€¼)è³‡æ–™ä¸Šçš„ç‰¹å®šå±¬æ€§ ->->-> `ä»¥Stringä¾†èªªçš„è©±ï¼Œè‹¥æ˜¯å°‡æ‰€æœ‰å±¬æ€§å€¼çµ„åˆæˆä¸€å€‹å­—ä¸²ä½œç‚ºvalueçš„è©±ï¼Œå°±å¿…é ˆç‚ºäº†é‚£å€‹å€¼ï¼Œè€Œå°‡æ•´ç­†è³‡æ–™(ä¸åŒ…å«è¦ä¿®æ”¹çš„å±¬æ€§å€¼)éƒ½è¤‡è£½ä¸€ä»½ä¸¦èˆ‡æ–°å±¬æ€§å€¼åˆä½µæˆä¸€å€‹æ–°å­—ä¸²ï¼›è‹¥é‚„æ˜¯Stringçš„è©±ï¼Œä½†é€™æ¬¡æ˜¯å°‡keyå€¼å’Œå±¬æ€§åç¨±ä½œç‚ºæ–°keyä»¥åŠå°æ‡‰å±¬æ€§å€¼çš„è©±ï¼Œå°±ç›´æ¥é‡å°keyå’Œå±¬æ€§åç¨±å°æ‡‰çš„å±¬æ€§å€¼ä¾†ä¿®æ”¹ï¼›åä¹‹ï¼Œä»¥Hashä¾†èªªçš„è©±ï¼Œè¦ä¿®æ”¹ç‰¹å®šå±¬æ€§çš„å€¼ï¼Œåªè¦æŒ‡å®šå°æ‡‰keyå’Œhash keyå°±èƒ½ç›´æ¥ä¿®æ”¹`

#ğŸ§  Redis ä¸Š string å’Œhashåˆ†åˆ¥å¦‚ä½•æ–°å¢(æ“æœ‰å¤šå€‹å±¬æ€§å€¼)è³‡æ–™ä¸Šçš„ç‰¹å®šå±¬æ€§ ->->-> `ä»¥Stringä¾†èªªçš„è©±ï¼Œè‹¥æ˜¯æ¡ç”¨ä¸»è¦å¯ä»¥æ˜¯å°‡æ‰€æœ‰å±¬æ€§å€¼åˆä½µä¸€å€‹æ–°å­—ä¸²ï¼Œè¦ä¿®æ”¹ç‰¹å®šå±¬æ€§å€¼ï¼Œå°±å¿…é ˆç‚ºäº†é‚£å€‹å€¼ï¼Œè€Œå°‡åŸè³‡æ–™éƒ½è¤‡è£½ä¸€ä»½ä¸¦èˆ‡æ–°å±¬æ€§å€¼åˆä½µæˆä¸€å€‹æ–°å­—ä¸²ï¼›è‹¥æ˜¯å°‡keyå€¼å’Œå±¬æ€§åç¨±ä½œç‚ºæ–°keyä»¥åŠå°æ‡‰å±¬æ€§å€¼çš„è©±ï¼Œå°±ç›´æ¥çœŸå°keyå’Œæ–°å±¬æ€§åç¨±ä¾†æ–°å¢å°æ‡‰å±¬æ€§å€¼ï¼›åä¹‹ï¼Œä»¥Hashä¾†èªªçš„è©±ï¼Œè¦ä¿®æ”¹ç‰¹å®šå±¬æ€§çš„å€¼ï¼Œåªè¦æŒ‡å®šå°æ‡‰keyå’Œhash keyå°±èƒ½ç›´æ¥ä¿®æ”¹`

#ğŸ§  Redis ä¸Š string å’Œhashåˆ†åˆ¥å¦‚ä½•è™•ç†æ–°å¢/è®€å–/ä¿®æ”¹/åˆªé™¤è³‡æ–™ä¸Šçš„éƒ¨åˆ†è³‡æ–™ ->->-> `ä»¥Stringä¾†èªªçš„è©±ï¼Œè¦å°éƒ¨åˆ†è³‡æ–™é€²è¡Œä¿®æ”¹ï¼Œå°±å¿…é ˆç‚ºäº†é‚£å€‹å€¼ï¼Œè€Œæ•´ç­†è³‡æ–™(åŒ…å«æœªè¦ä¿®æ”¹çš„å±¬æ€§å€¼)éƒ½è¦ä¸€èµ·æ”¹ï¼›è¦ä¿®æ”¹ç‰¹å®šå±¬æ€§çš„å€¼ï¼Œç”±æ–¼æœƒå°‡è³‡æ–™åˆ‡åˆ†æˆå¥½å¹¾åˆ†ç¨ç«‹çš„éƒ¨åˆ†ä¾†å„²å­˜ï¼Œæ¯å€‹åˆæ˜¯ä»¥key-value pairä¾†è¡¨ç¤ºï¼Œæ‰€ä»¥åªè¦æŒ‡å®šå°æ‡‰keyå°±èƒ½ç›´æ¥ä¿®æ”¹`


#ğŸ§  Redis ä¸Š string å’Œ hash åˆ†åˆ¥å¦‚ä½•è™•ç†æ–°å¢/è®€å–/ä¿®æ”¹/åˆªé™¤å…¨éƒ¨è³‡æ–™ï¼šstring vs. hash ->->-> `ä»¥Stringä¾†èªªï¼Œå°±ç›´æ¥æ›´æ”¹valueå€¼ï¼Œä¸éœ€è¦æŒ‡å®škeyä¾†é€²è¡Œæ“ä½œï¼›ä»¥Hashä¾†èªªï¼Œå°±å¿…é ˆæŒ‡å®šæ¯å€‹keyä¾†é€²è¡Œæ“ä½œ`

#ğŸ§  redis ä¸Šçš„stringé©ç”¨å ´æ™¯ï¼Ÿ ç†ç”±æ˜¯ï¼Ÿ ->->-> ` è®€å–(æ•´ä»½æˆ–è€…å¤§å¤šæ•¸éµå€¼)è³‡æ–™ã€æ›´æ–°å¿«å–ä¸é »ç¹(æˆ–è€…æ¯æ¬¡éƒ½æ›´æ–°jsonè³‡æ–™çš„å¤§å¤šæ•¸key)çš„å ´æ™¯ ï¼Œ(ç†ç”±æ˜¯String è¨˜æ†¶é«”æˆæœ¬æ¯”Hashè¼ƒå°ï¼Œä¸”Stringæ˜¯æ•´å€‹åŒ…å«è³‡æ–™) `
<!--SR:!2022-05-29,3,250-->

#ğŸ§   redis ä¸Šçš„Hash é©ç”¨å ´æ™¯ç‚ºï¼Ÿç†ç”±æ˜¯ï¼Ÿ ->->-> `æ¸…æ¥šç†è§£å“ªäº›key-valueæ˜¯å¯ç”¨çš„(å¦å‰‡æœƒè®€å–åˆ°éŒ¯èª¤å€¼æˆ–è€…ç©ºå€¼)ã€ æ›´æ–°è¼ƒç‚ºé »ç¹ï¼Œå°¤å…¶æ˜¯æŒ‡å®šç‰¹å®škeyå€¼ã€è®€å–ç‰¹å®šå°‘é‡çš„keyå€¼ï¼Œç†ç”±æ˜¯Hashæ˜¯å°‡è³‡æ–™åˆ‡åˆ†æˆæ›´ç´°çš„key-value pairï¼Œæ‰€ä»¥å¯ä»¥é€ékeyä¾†å°ç‰¹å®švalueé€²è¡Œæ“ä½œ)`
<!--SR:!2022-05-29,3,250-->



---
Status: #ğŸŒ± 
Tags:
[[Redis]]
Links:
[[Redis Simple Dynamic Stringæœƒæ ¹æ“šå¯¦éš›å„²å­˜å­—ä¸²çš„å…§å®¹ä¾†èª¿æ•´å…¶è¨˜æ†¶é«”ç©ºé–“]]
[[Redis Hashæ˜¯å„²å­˜å¤šå€‹key-valueçš„å­—å…¸]]
[[Redis Hash é‡åˆ° å·¢ç‹€çµæ§‹çš„è³‡æ–™çš„è©±ï¼Œåˆæ˜¯é¢è‡¨åˆ°è¦ä»¥Stringæˆ–è€…Hashä¾†å„²å­˜çš„å•é¡Œ]]
References:
[[@yunshu_youpaiyunRedisCunChuDuiXiangXinXiShiYongHash]]
[[@RedisCunjsonZiLiaoShiXuanZestringHuanShihash]]
