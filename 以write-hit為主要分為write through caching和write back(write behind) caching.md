## æè¿°
å¼•ç”¨[[@jyt0532HuanCunDuXieJiZhiJyt0532Blog]]æ‰€æè¿°çš„ï¼š
>  ### Write-hit(å°±æ˜¯ä½ è¦æ›´æ–°çš„æ±è¥¿ ä¹Ÿåœ¨ç·©å­˜è£¡):
>  åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œå®¢æˆ¶ç›´æ¥å‘ç·©å­˜ç™¼å¯«éœ€æ±‚æ²’å•é¡Œï¼Œçœ‹æ˜¯å¯«æ–°è³‡æ–™æˆ–æ˜¯æ›´æ–°èˆŠè³‡æ–™éƒ½å¯ä»¥ï¼Œæ›´æ–°äº†ç·©å­˜ä¹‹å¾Œ é€™æ™‚ç·©å­˜å°±å¯ä»¥é¸æ“‡åŒæ­¥(Synchronous) æˆ–æ˜¯éåŒæ­¥çš„(Asynchronous)æ›´æ–°DB åŒæ­¥çš„æ›´æ–°å«åšWrite through éåŒæ­¥çš„å«åšWrite backæˆ–æ˜¯Write behind
### write-through caching
å¼•ç”¨[[@jyt0532HuanCunDuXieJiZhiJyt0532Blog]]æ‰€æè¿°çš„ï¼š
> #### Write throughå„ªç¼ºé»
> æ¯æ¬¡å¯«å…¥éƒ½åŒæ™‚ä¿®æ”¹ç·©å­˜è·ŸDBï¼Œç•¶ç„¶å„ªé»å°±æ˜¯ä¸€è‡´æ€§å¾—ä»¥æ»¿è¶³
> ç¼ºé»å°±æ˜¯æ…¢ï¼Œå› ç‚ºè¦å¯«å…©å€‹åœ°æ–¹(æ¯”æ²’æœ‰ç·©å­˜é‚„æ…¢)
> ä½¿ç”¨æ™‚æ©Ÿå°±æ˜¯ç•¶ä½ å¯«å®Œä¸€å€‹æ•¸æ“šå¾Œï¼Œä¸‹æ¬¡è®€æœƒç™¼ç”Ÿçš„å¾ˆå¿«å¾ˆå¤šæ¬¡ï¼Œé€™æ¨£å°±é©åˆæŠŠlatencyèŠ±åœ¨å¯«


### write-back caching
å¼•ç”¨[[@jyt0532HuanCunDuXieJiZhiJyt0532Blog]]æ‰€æè¿°çš„ï¼š
> å¯«å…¥ç·©å­˜å¾Œå°±å›å‚³çµ¦å®¢æˆ¶ æˆ‘ä¹‹å¾Œ**æœ‰ç©º**çš„æ™‚å€™å†æ…¢æ…¢ä¿®æ”¹DB ä¿è¨¼äº†write lantencyçš„ä¸‹é™

> Note: é€šå¸¸å¤§å®¶éƒ½å¾ˆå¿™ æ²’ä»€éº¼ç©º ä½†æ˜¯ä¿®æ”¹DBçš„æ­»ç·šæ˜¯cacheçš„é‚£å€‹entryè¦è¢«evictçš„æ™‚å€™ æœ€èµ·ç¢¼åœ¨é‚£å€‹æ™‚å€™ ä½ è¦å¯«å›DB åœ¨é‚£ä¹‹å‰çš„cache hitéƒ½å¯ä»¥ç›´æ¥å›å‚³

> æ‰€ä»¥å¯¦ä½œèµ·ä¾† æ¯ä¸€å€‹ç·©å­˜çš„entryéƒ½è¦æœ‰ä¸€å€‹dirty bit. åªè¦ä½ ä¿®æ”¹éé€™å€‹å€¼ dirty bitå°±è¦è¨­æˆtrue ç­‰åˆ°evictçš„æ™‚å€™ å¦‚æœdirty bitæ˜¯trueå°±è¦æ›´æ–°DB

> ä½†ç¼ºé»ä¹Ÿå¾ˆæ˜é¡¯ é€šå¸¸DBçš„recoveræ©Ÿåˆ¶éå¸¸å¥å…¨ä½†ç·©å­˜æ²’æœ‰å¤ªå¤šrecoveræ©Ÿåˆ¶ è¦æ˜¯ä½ çš„cacheç•¶æ©Ÿæˆ–æ˜¯è·³é›» ä½ çš„æŸäº›åªå¯«åœ¨ç·©å­˜è€Œä¸åœ¨DBçš„è³‡æ–™å°±æ°¸é æ¶ˆå¤±äº†

> ä½¿ç”¨æ™‚æ©Ÿå°±æ˜¯è®€å¯«ç™¼ç”Ÿçš„å¾ˆå¹³å‡ Write backæ©Ÿåˆ¶è®“è®€å¯«éƒ½ä¸æœƒlatencyå¤ªé«˜ ä½†æ˜¯è¦å°å¿ƒCrashçš„å•é¡Œ

## è¤‡ç¿’
#ğŸ§  Question :: ->->-> ``

---
Status: #ğŸŒ± 
Tags:
[[Caching]] - [[Redis]] - [[Database]]
Links:
[[å®¢æˆ¶ç«¯å°ç·©å­˜ç™¼è®€éœ€æ±‚ä¸»è¦æœ‰cache hitç‚ºä¸»å’Œcache missç‚ºä¸»é€™å…©ç¨®ç­–ç•¥]]
[[inline Caching æ˜¯å®¢æˆ¶ç«¯ç›´æ¥ä»¥cacheç‚ºä¸»è¦å„²å­˜ç³»çµ±çš„é¢¨æ ¼ ï¼ŒLook-Aside Caching å‰‡æ˜¯å…ˆä»¥cacheä¾†è™•ç†ï¼Œå†ä¾†ä»¥DBä½œè™•ç†çš„é¢¨æ ¼]]
References:
[[@jyt0532HuanCunDuXieJiZhiJyt0532Blog]]