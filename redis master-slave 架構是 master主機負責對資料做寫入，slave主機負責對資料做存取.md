## æè¿°

å¼•ç”¨[[@feixiangdezhuRedisZhuCongMoShi]]æ‰€æè¿°ï¼š
>   ä¸»ï¼ˆmasterï¼‰å’Œ ä»ï¼ˆslaveï¼‰éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå½“ä¸»èŠ‚ç‚¹æœåŠ¡å™¨å†™å…¥æ•°æ®æ—¶ä¼šåŒæ­¥åˆ°ä»èŠ‚ç‚¹çš„æœåŠ¡å™¨ä¸Šï¼Œä¸€èˆ¬ä¸»èŠ‚ç‚¹è´Ÿè´£å†™å…¥æ•°æ®ï¼Œä»èŠ‚ç‚¹è´Ÿè´£è¯»å–æ•°æ®

![](https://pic2.zhimg.com/80/v2-5d1ddfcf9745f441c44222fda257f72d_720w.jpg)

å¼•ç”¨[[@tienyuRedisLiuZhuCongFuZhi]]æ‰€æè¿°ï¼š
> ä¸»å¾è¤‡è£½æ¨¡å¼æä¾›è®“ Master(ä¸»ä¼ºæœå™¨) å‘ä»»æ„æ•¸é‡çš„ Slave(é™„å±¬ä¼ºæœå™¨) é€²è¡Œè³‡æ–™åŒæ­¥ï¼Œä»¥è§£æ±ºå–®é»è³‡æ–™åº«çš„å•é¡Œã€‚

> ä¸»å¾è¤‡è£½æ¨¡å¼æœ€ä¸»è¦çš„ç›®çš„æ˜¯è¦å¯¦ç¾è®€å¯«åˆ†é›¢å’Œè³‡æ–™å‚™ä»½ã€‚Redis è®€å¯«åˆ†é›¢çš„ä½œæ³•æ˜¯ Master å¯ä»¥é€²è¡Œè®€å–å’Œå¯«å…¥ï¼Œå…¶ä»–çš„ Slave åªèƒ½è®€å–ã€‚é€é Slave å¹«å¿™è™•ç†è®€å–çš„å·¥ä½œä¾†æ¸›è¼• Master çš„è² æ“”ã€‚

![](https://i.imgur.com/GLSvDQu.png)


é‡é»ï¼š
- ä¸»å¾æ¶æ§‹æ˜¯ç”±ä¸€å€‹masterä¸»æ©Ÿå’Œå¤šå€‹slaveä¸»æ©Ÿæ‰€æ§‹æˆï¼Œæ¯å€‹ä¸»æ©Ÿéƒ½æ˜¯redisè³‡æ–™åº«ç³»çµ±
- masterä¸»æ©Ÿä¾†ä¸»è¦è² è²¬æ§ç®¡è³‡æ–™ä¸Šè®Šæ›´å’Œå­˜å–ï¼Œè€Œslaveå‰‡æ˜¯æ¥æ”¶å¾masterä¸»æ©Ÿæ‰€å„²å­˜çš„è³‡æ–™é€²è¡ŒåŒæ­¥ï¼Œå¾è€Œé€éé€™äº›ä¸»æ©Ÿä¾†å…±åŒæŒæœ‰åŒä¸€å€‹redisè³‡æ–™åº«
- é–‹å§‹å»ºæ§‹æ¶æ§‹æ™‚ï¼Œä¸€é–‹å§‹æœƒç”±masterä¸»æ©Ÿè² è²¬å»ºç«‹å°æ‡‰çš„redisè³‡æ–™åº«Aï¼Œä¸¦æ‹¿è³‡æ–™åº«Açš„è³‡æ–™å°å…¶ä»–slaveä¸»æ©Ÿé€²è¡Œè³‡æ–™åº«çš„åŒæ­¥ï¼Œè€ŒåŒæ­¥æ–¹å¼ç‚ºhot backupï¼Œæ›è¨€ä¹‹ï¼Œmasterä¸»æ©Ÿå’Œslaveä¸»æ©Ÿæ‰€å…±äº«çš„è³‡æ–™æœƒå¯¦æ™‚æ›´æ–°ï¼Œä¸æœƒå‡ºç¾ç‰ˆæœ¬çš„å•é¡Œ
- master ä¸»æ©Ÿè² è²¬çš„æ¥­å‹™ï¼š
	- èˆ‡slaveçš„è³‡æ–™åº«åŒæ­¥ï¼šä¸»è¦æä¾›è‡ªå·±çš„redis è³‡æ–™åº«ä¾†åŒæ­¥slaveä¸»æ©Ÿä¸Šçš„redisè³‡æ–™åº«
	- æ¶æ§‹ä¸Šå”¯ä¸€è² è²¬å°è³‡æ–™åº«å¯«å…¥çš„ä¸»æ©Ÿï¼šç”±æ–¼æ˜¯å¾è‡ªå·±redis è³‡æ–™åº«ä¾†å…±äº«ï¼Œä¸”è€ƒæ…®è³‡æ–™ä¸€è‡´æ€§çš„å•é¡Œï¼Œæ‰€ä»¥æœƒè¨­å®šåªæœ‰masterä¸»æ©Ÿèƒ½å¤ å¯«å…¥
	- æ¶æ§‹ä¸Šè² è²¬å°è³‡æ–™åº«è®€å–çš„ä¸»æ©Ÿ
- slave ä¸»æ©Ÿè² è²¬çš„æ¥­å‹™ï¼š
	- æ¶æ§‹ä¸Šè² è²¬å°è³‡æ–™åº«è®€å–çš„ä¸»æ©Ÿ
## redis master-slave æ¶æ§‹å„ªé»
å¼•ç”¨[[@feixiangdezhuRedisZhuCongMoShi]]æ‰€æè¿°ï¼š
> è¯»å†™åˆ†ç¦»ï¼Œæé«˜æ•ˆç‡
> æ•°æ®çƒ­å¤‡ä»½ï¼Œæä¾›å¤šä¸ªå‰¯æœ¬

é‡é»ï¼š
- å„ªé»æ˜¯å¯ä»¥å¯¦ç¾è®€å¯«åˆ†é›¢ï¼šè² è²¬å¹«åŠ©é–‹ç™¼è€…é€²è¡Œå¯«å…¥è³‡æ–™åº«å’Œè®€å–è³‡æ–™åº«çš„ä¼ºæœå™¨éƒ½æ˜¯ä¸åŒçš„ï¼Œå¾è€Œå¹³å‡åˆ†æ”¤è³‡æ–™åº«çš„å£“åŠ›
- ç”±æ–¼åŒæ­¥æ–¹å¼æ˜¯æ¡ç”¨hot backupï¼Œæ‰€ä»¥æ¯å€‹ä¸»æ©Ÿçš„è³‡æ–™åº«éƒ½æ˜¯ä¸€è‡´ï¼Œæ‰€ä»¥ç•¶å…¶ä¸­ä¸€å€‹ä¸»æ©Ÿç„¡æ³•æ­£å¸¸æœå‹™æ™‚ï¼Œå¯ä»¥ç”±å…¶ä»–æ­£å¸¸çš„ä¸»æ©Ÿä¾†é ‚æ›¿ã€‚

## redis master-slave æ¶æ§‹ç¼ºé»
å¼•ç”¨[[@feixiangdezhuRedisZhuCongMoShi]]æ‰€æè¿°ï¼š
> ä¸»èŠ‚ç‚¹æ•…éšœï¼Œé›†ç¾¤åˆ™æ— æ³•è¿›è¡Œå·¥ä½œï¼Œå¯ç”¨æ€§æ¯”è¾ƒä½ï¼Œä»èŠ‚ç‚¹å‡ä¸»èŠ‚ç‚¹éœ€è¦äººå·¥æ‰‹åŠ¨å¹²é¢„
> å•ç‚¹å®¹æ˜“é€ æˆæ€§èƒ½ä½ä¸‹
> ä¸»èŠ‚ç‚¹çš„å†™å—åˆ°é™åˆ¶ï¼ˆåªæœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼‰


é‡é»ï¼š
- masterä¸»æ©Ÿæ•…éšœæ™‚ï¼Œmasterä¸»æ©Ÿæ‰€å»ºæ§‹çš„çµæ§‹å°‡æœƒå› ç‚ºç„¡æ³•å…±äº«è³‡æ–™è€Œå¤±æ•ˆï¼Œéœ€è¦äººå·¥ä¿®å¾©
- å¯«å…¥æ™‚åªæœ‰ä¸€å€‹masterä¸»æ©Ÿï¼Œæ‰€ä»¥å¯«å…¥æ•ˆèƒ½æœƒæœ‰æ‰€é™åˆ¶
## è¤‡ç¿’
#ğŸ§  redis çš„ ä¸»å¾æ¶æ§‹æ˜¯ä»€éº¼ï¼Ÿ->->-> `ä¸»å¾æ¶æ§‹æ˜¯ç”±ä¸€å€‹masterä¸»æ©Ÿå’Œå¤šå€‹slaveä¸»æ©Ÿæ‰€æ§‹æˆï¼Œæ¯å€‹ä¸»æ©Ÿéƒ½æ˜¯redisè³‡æ–™åº«ç³»çµ±ï¼Œmasterä¸»æ©Ÿä¾†ä¸»è¦è² è²¬æ§ç®¡è³‡æ–™ä¸Šè®Šæ›´å’Œå­˜å–ï¼Œè€Œslaveå‰‡æ˜¯æ¥æ”¶å¾masterä¸»æ©Ÿæ‰€å„²å­˜çš„è³‡æ–™é€²è¡ŒåŒæ­¥ï¼Œå¾è€Œé€éé€™äº›ä¸»æ©Ÿä¾†å…±åŒæŒæœ‰åŒä¸€å€‹redisè³‡æ–™åº«`

#ğŸ§  redis çš„ ä¸»å¾æ¶æ§‹å‰›é–‹å§‹å»ºç«‹æ™‚ï¼Œçµæ§‹ä¸Šçš„ä¸»æ©Ÿæ˜¯å¦‚ä½•å…±äº«åŒä¸€å€‹è³‡æ–™ï¼Ÿ(ç›¡é‡æåˆ°hot backup) ->->-> `-   é–‹å§‹å»ºæ§‹æ¶æ§‹æ™‚ï¼Œä¸€é–‹å§‹æœƒç”±masterä¸»æ©Ÿè² è²¬å»ºç«‹å°æ‡‰çš„redisè³‡æ–™åº«Aï¼Œä¸¦æ‹¿è³‡æ–™åº«Açš„è³‡æ–™å°å…¶ä»–slaveä¸»æ©Ÿé€²è¡Œè³‡æ–™åº«çš„åŒæ­¥ï¼Œè€ŒåŒæ­¥æ–¹å¼ç‚ºhot backupï¼Œæ›è¨€ä¹‹ï¼Œmasterä¸»æ©Ÿå’Œslaveä¸»æ©Ÿæ‰€å…±äº«çš„è³‡æ–™æœƒå¯¦æ™‚æ›´æ–°ï¼Œä¸æœƒå‡ºç¾ç‰ˆæœ¬çš„å•é¡Œ`

#ğŸ§  redis ä¸»å¾æ¶æ§‹ä¸‹çš„master ä¸»æ©Ÿè² è²¬çš„æ¥­å‹™æ˜¯ä»€éº¼->->-> `èˆ‡slaveçš„è³‡æ–™åº«åŒæ­¥ï¼šä¸»è¦æä¾›è‡ªå·±çš„redis è³‡æ–™åº«ä¾†åŒæ­¥slaveä¸»æ©Ÿä¸Šçš„redisè³‡æ–™åº«ã€æ¶æ§‹ä¸Šå”¯ä¸€è² è²¬å°è³‡æ–™åº«å¯«å…¥çš„ä¸»æ©Ÿï¼šç”±æ–¼æ˜¯å¾è‡ªå·±redis è³‡æ–™åº«ä¾†å…±äº«ï¼Œä¸”è€ƒæ…®è³‡æ–™ä¸€è‡´æ€§çš„å•é¡Œï¼Œæ‰€ä»¥æœƒè¨­å®šåªæœ‰masterä¸»æ©Ÿèƒ½å¤ å¯«å…¥ã€æ¶æ§‹ä¸Šè² è²¬å°è³‡æ–™åº«è®€å–çš„ä¸»æ©Ÿ`


#ğŸ§   redis ä¸»å¾æ¶æ§‹ä¸‹çš„slave ä¸»æ©Ÿè² è²¬çš„æ¥­å‹™æ˜¯ä»€éº¼->->-> `-   æ¶æ§‹ä¸Šè² è²¬å°è³‡æ–™åº«è®€å–çš„ä¸»æ©Ÿ`

#ğŸ§  redis master-slave æ¶æ§‹å„ªé»: ->->-> `å„ªé»æ˜¯å¯ä»¥å¯¦ç¾è®€å¯«åˆ†é›¢ï¼šè² è²¬å¹«åŠ©é–‹ç™¼è€…é€²è¡Œå¯«å…¥è³‡æ–™åº«å’Œè®€å–è³‡æ–™åº«çš„ä¼ºæœå™¨éƒ½æ˜¯ä¸åŒçš„ï¼Œå¾è€Œå¹³å‡åˆ†æ”¤è³‡æ–™åº«çš„å£“åŠ›ã€ç”±æ–¼åŒæ­¥æ–¹å¼æ˜¯æ¡ç”¨hot backupï¼Œæ‰€ä»¥æ¯å€‹ä¸»æ©Ÿçš„è³‡æ–™åº«éƒ½æ˜¯ä¸€è‡´ï¼Œæ‰€ä»¥ç•¶å…¶ä¸­ä¸€å€‹ä¸»æ©Ÿç„¡æ³•æ­£å¸¸æœå‹™æ™‚ï¼Œå¯ä»¥ç”±å…¶ä»–æ­£å¸¸çš„ä¸»æ©Ÿä¾†é ‚æ›¿ã€‚`

#ğŸ§  redis master-slave æ¶æ§‹ç¼ºé»:->->-> `masterä¸»æ©Ÿæ•…éšœæ™‚ï¼Œmasterä¸»æ©Ÿæ‰€å»ºæ§‹çš„çµæ§‹å°‡æœƒå› ç‚ºç„¡æ³•å…±äº«è³‡æ–™è€Œå¤±æ•ˆï¼Œéœ€è¦äººå·¥ä¿®å¾©ã€å¯«å…¥æ™‚åªæœ‰ä¸€å€‹masterä¸»æ©Ÿï¼Œæ‰€ä»¥å¯«å…¥æ•ˆèƒ½æœƒæœ‰æ‰€é™åˆ¶`
<!--SR:!2022-06-06,3,250-->

### note
1. è®€å¯«åˆ†é›¢è‹±æ–‡ç‚ºRead/Write Splitting



---
Status: #ğŸŒ± 
Tags:
[[Redis]] - [[master-slave]]
Links:
References:
[[@tienyuRedisLiuZhuCongFuZhi]]
[[@feixiangdezhuRedisZhuCongMoShi]]
