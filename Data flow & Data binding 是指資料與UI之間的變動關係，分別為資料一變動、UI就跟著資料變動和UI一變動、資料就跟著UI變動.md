## æè¿°



### ç”¨è©æ¾„æ¸…1 - data flow & data binding

[[@youchuanhaoJianDanLiaoYiXiaOnewayData]]
> ### ç”¨è©æ¾„æ¸…

> åœ¨é–‹å§‹ä¹‹å‰ï¼Œå…ˆé‡å°ç”¨è©åšå…©é»æ¾„æ¸…ã€‚ 
>## æ¾„æ¸…ä¸€ï¼šã€Œdata flowã€è·Ÿã€Œdata bindingã€æŒ‡çš„æ˜¯åŒä¸€ä»¶äº‹ã€‚
>
> æ›å¥è©±èªªï¼Œone-way data flowå°±æ˜¯one-way data bindingï¼›two-way data bindingå°±æ˜¯two-way data flowã€‚
>
>é€™ä»¶äº‹å…¶å¯¦Facebookçš„Reactå®˜æ–¹æ–‡ä»¶å°±æœ‰æåˆ°ï¼š[[@reactThinkingReactReact]]
>> Reactâ€™s one-way data flow (also called one-way binding) keeps everything modular and fast.

é‡é»ï¼š
- data binding æ˜¯æŒ‡ç”±è³‡æ–™èˆ‡UIçš„å°æ‡‰é—œä¿‚ï¼Œè³‡æ–™æ±ºå®šUIæˆ–è€…UIæ±ºå®šè³‡æ–™
- data flow æ˜¯æŒ‡è³‡æ–™èˆ‡UIçš„æµå‹•æ–¹å¼ï¼Œè³‡æ–™ä¸€è®Šå‹•ï¼ŒUIå°±è·Ÿè‘—è³‡æ–™ä¸€èµ·è®Šå‹• æˆ–è€… UIä¸€è®Šå‹•ï¼Œè³‡æ–™å°±è·Ÿè‘—UIä¸€èµ·è®Šå‹•
- åœ¨é€™è£data binding å’Œ data flow ç”±æ–¼éƒ½æ˜¯é¢å‘åŒä¸€ä»¶äº‹-è³‡æ–™æ±ºå®šUI æˆ–è€…UIæ±ºå®šè³‡æ–™ï¼Œå› æ­¤æœƒæ˜¯ä¸€æ¨£çš„èªªæ³•

### ç”¨è©æ¾„æ¸…1 -  data flow & data binding æ˜¯æŒ‡ç¨±æŸç¨®è¡Œç‚º


[[@youchuanhaoJianDanLiaoYiXiaOnewayData]]
> èˆ‰ä¾‹ä¾†èªªï¼Œä¸‹é¢é€™ç¨®å¥å­æ˜¯ä¸åš´è¬¹ã€å……æ»¿èª¤æœƒçš„ï¼š
> -   æŸæŸæ¡†æ¶ã€Œæ˜¯ã€ä¸€å€‹ one-way data binding æ¡†æ¶ã€‚ â†’ ä¸åš´è¬¹çš„å¥å‹ï¼Œç›¡é‡å°‘ç”¨ã€‚
> 
> æ­£ç¢ºçš„æè¿°æ–¹æ³•æ˜¯é€™æ¨£ï¼š
> -   æŸæŸæ¡†æ¶è®“äººã€Œå¾ˆå®¹æ˜“åšåˆ°ã€one-way data bindingã€‚ â†’ æ­£ç¢ºå¥å‹ã€‚
>
> æºé€šä¸Šæ‡‰è©²é¿å…ç”¨ã€Œæ˜¯ã€å¥å‹ï¼›ç”¨ã€Œå¾ˆå®¹æ˜“åšåˆ°ã€å¥å‹æ‰æ­£ç¢ºã€‚
> ä½¿ç”¨æ­£ç¢ºçš„å¥å‹æœ‰åŠ©æ–¼ç†è§£é€™å…©å€‹è©ã€‚é€™éƒ¨ä»½å¾Œé¢æœƒå†è§£é‡‹ã€‚


é‡é»ï¼š
- data flow & data binding éƒ½æ˜¯æŒ‡èª°æ±ºå®šèª°çš„è¡Œç‚ºï¼Œè€Œéæ˜¯å½¢å®¹è©
- æ­£ç¢ºæè¿°æœƒæ˜¯
```
æŸæŸæ¡†æ¶è®“äººã€Œå¾ˆå®¹æ˜“åšåˆ°ã€one-way data binding
```
- éŒ¯èª¤æè¿°æœƒæ˜¯
```
æŸæŸæ¡†æ¶ã€Œæ˜¯ã€ä¸€å€‹ one-way data binding æ¡†æ¶ã€‚ â†’ ä¸åš´è¬¹çš„å¥å‹ï¼Œç›¡é‡å°‘ç”¨ã€‚
```

### Data Model
1. ç•¶å°ç•«é¢ä½¿ç”¨templateæŠ€è¡“è€Œåˆ‡åˆ†æˆæ¥­å‹™é‚è¼¯&è³‡æ–™ å’Œ UIæ™‚ï¼Œæ­¤æ™‚è² è²¬æ¥­å‹™é‚è¼¯&è³‡æ–™å°±æœƒæ˜¯Data Model
2. Data Model æ˜¯
	- å®šç¾©è¦èˆ‡template ç¶²é çµåˆçš„è³‡æ–™æ˜¯ä»€éº¼é¡å‹
	- å®šç¾©è©²è³‡æ–™æœƒæ“æœ‰ä»€éº¼æ¨£çš„åŠŸèƒ½å‡½å¼-æ¥­å‹™é‚è¼¯


### Data binding

[[@youchuanhaoJianDanLiaoYiXiaOnewayData]]
> æœ‰äº†data modelç¨ç«‹æ–¼UIçš„è§€å¿µä¹‹å¾Œï¼Œæˆ‘å€‘æœƒç™¼ç¾ä¸Šé¢å…©ç¨®ä½œæ³•ä»£è¡¨å…©ç¨®è³‡æ–™çš„æµå‘ï¼ˆdata flowï¼‰ï¼š
> -   å¾data modelå‡ºç™¼ï¼Œæ¯æ¬¡æ›´æ–°å°±åŒæ­¥æ›´æ–°UIï¼ˆç”²æ–¹å‘ï¼‰
> -   å¾UIå‡ºç™¼ï¼Œæ¯æ¬¡æ›´æ–°å°±åŒæ­¥æ›´æ–°data modelï¼ˆä¹™æ–¹å‘ï¼‰
    

> å‰ç«¯æ¡†æ¶èˆ‡data bindingçš„é—œä¿‚ï¼Œå°±æ˜¯æ¡†æ¶æœ¬èº«èƒ½å¦è®“äººå¾ˆå®¹æ˜“å°±åšå‡ºç”²æ–¹å‘æˆ–æ˜¯ä¹™æ–¹å‘çš„æ•ˆæœã€‚
> 
> èƒ½è¼•æ˜“åšå‡ºå…¶ä¸­ä¸€å€‹æ–¹å‘ï¼Œå°±ç®—æ˜¯é”æˆone-way data bindingã€‚
> èƒ½è¼•æ˜“åŒæ™‚åšå‡ºå…©æ–¹å‘ï¼Œå°±ç®—æ˜¯é”æˆtwo-way data bindingã€‚

[[@mcgarnagleJavascriptWhatTwo]]
> Two-way binding just means that:
>
> 1.  When properties in the model get updated, so does the UI.
> 2.  When UI elements get updated, the changes get propagated back to the model.

![](https://i.stack.imgur.com/2wouW.jpg)

é‡é»ï¼š
- data flow & data binding ä¸»è¦æœ‰å…©ç¨®æ–¹å‘
	- æ–¹å‘1ï¼šè³‡æ–™ä¸€æ”¹è®Šï¼ŒUIå°±è·Ÿè‘—è³‡æ–™æ”¹è®Š / è³‡æ–™æ±ºå®šUI
	- æ–¹å‘2ï¼šUIä¸€æ”¹è®Šï¼Œè³‡æ–™å°±è·Ÿè‘—UIæ”¹è®Š / UI æ±ºå®šè³‡æ–™
- å¦‚æœæ¡†æ¶åªèƒ½å¤ è¼•æ˜“åšå…¶ä¸­ä¸€å€‹æ–¹å‘ï¼Œå°±ä»£è¡¨è©²æ¡†æ¶å®¹æ˜“å¯¦ç¾one-way data binding
- å¦‚æœæ¡†æ¶èƒ½è¼•æ˜“åšå…©å€‹æ–¹å‘ï¼Œå°±ä»£è¡¨è©²æ¡†æ¶å®¹æ˜“å¯¦ç¾two-way data binding


### æ¡ˆä¾‹ï¼šè³‡æ–™ä¸€æ”¹è®Šï¼ŒUIå°±è·Ÿè‘—è³‡æ–™æ”¹è®Š / è³‡æ–™æ±ºå®šUI

è³‡æ–™modelåœ¨æ¸²æŸ“å‰è¢«å®šç¾©å¥½ï¼Œæ‰€ä»¥åªéœ€è¦å°‡è³‡æ–™æ’å…¥è‡³UIï¼Œå°±èƒ½ç”¢å‡ºå°æ‡‰è³‡æ–™çš„UIï¼Œè‹¥è³‡æ–™modelè¢«æ”¹è®Šæ™‚ï¼Œå°æ‡‰çš„UIä¹Ÿæœƒè·Ÿè‘—æ”¹è®Šã€‚

```
var PRODUCTS = [
    {category: 'Sporting Goods', price: '$49.99', stocked: true, name: 'Football'},
    {category: 'Sporting Goods', price: '$9.99', stocked: true, name: 'Baseball'},
    {category: 'Sporting Goods', price: '$29.99', stocked: false, name: 'Basketball'},
    {category: 'Electronics', price: '$99.99', stocked: true, name: 'iPod Touch'},
    {category: 'Electronics', price: '$399.99', stocked: false, name: 'iPhone 5'},
    {category: 'Electronics', price: '$199.99', stocked: true, name: 'Nexus 7'}
];

ReactDOM.render(
    <FilterableProductTable products={PRODUCTS} />,
    document.getElementById('container')
);
```



### æ¡ˆä¾‹ï¼šUIä¸€æ”¹è®Šï¼Œè³‡æ–™å°±è·Ÿè‘—UIæ”¹è®Š / UI æ±ºå®šè³‡æ–™

è¼¸å…¥æ¬„ä½è¢«äººå¡«å¯«ï¼Œæ­¤æ™‚Data Modelä¸¦æ²’æœ‰è©²æ¬„ä½è³‡æ–™ï¼Œç¶“ç”±è¼¸å…¥æ¬„ä½çš„è¼¸å…¥äº‹ä»¶å¾Œè™•ç†ä¾†å°‡æ¬„ä½è³‡æ–™ç´å…¥è³‡æ–™æˆ–è€…Data Model

```
handleChange: function(event) {
  this.setState({message: event.target.value});
},
```

```
render: function() {
  var message = this.state.message;
  return <input type="text" value={message} onChange={this.handleChange} />;
}
```

## è¤‡ç¿’
#ğŸ§  åœ¨å‰ç«¯é–‹ç™¼ä¸­ï¼Œdata bindingæ˜¯ä»€éº¼æ„æ€ï¼Ÿ ->->-> `æ˜¯æŒ‡ç”±è³‡æ–™èˆ‡UIçš„å°æ‡‰é—œä¿‚ï¼Œè³‡æ–™æ±ºå®šUIæˆ–è€…UIæ±ºå®šè³‡æ–™`

#ğŸ§  åœ¨å‰ç«¯é–‹ç™¼ä¸­ï¼Œdata flowæ˜¯ä»€éº¼æ„æ€ï¼Ÿ ->->-> `æ˜¯æŒ‡è³‡æ–™èˆ‡UIçš„æµå‹•æ–¹å¼ï¼Œè³‡æ–™ä¸€è®Šå‹•ï¼ŒUIå°±è·Ÿè‘—è³‡æ–™ä¸€èµ·è®Šå‹• æˆ–è€… UIä¸€è®Šå‹•ï¼Œè³‡æ–™å°±è·Ÿè‘—UIä¸€èµ·è®Šå‹•`

#ğŸ§  åœ¨å‰ç«¯é–‹ç™¼ä¸­ï¼Œdata binding å’Œ data flowä¹‹é–“æ˜¯å¦ä¸€æ¨£ï¼Ÿç‚ºä»€éº¼ ->->-> `æ˜¯ä¸€æ¨£ï¼Œéƒ½åŒæ¨£é¢å‘æ–¼è³‡æ–™æ±ºå®šUIæˆ–è€…UIæ±ºå®šè³‡æ–™`

#ğŸ§  åœ¨å‰ç«¯é–‹ç™¼ä¸­ï¼Œdata binding å’Œ data flow æ˜¯ç®—å½¢å®¹è©å—ï¼Ÿ ->->-> `ä¸¦ä¸æ˜¯ï¼Œç®—æ˜¯æŸç¨®è¡Œç‚º`

#ğŸ§  åœ¨å‰ç«¯é–‹ç™¼ä¸­ï¼Œdata binding å’Œ data flow æ˜¯è¡Œç‚ºï¼Œè«‹èˆ‰æ­£ç¢ºæ¡ˆä¾‹ ->->-> `æŸæŸæ¡†æ¶è®“äººã€Œå¾ˆå®¹æ˜“åšåˆ°ã€one-way data bindingã€‚`

#ğŸ§  æŸæŸæ¡†æ¶ã€Œæ˜¯ã€ä¸€å€‹ one-way data binding æ¡†æ¶ é€™èªªæ³•å°æ–¼data binding æ­£ç¢ºçš„å— ->->-> `ä¸æ˜¯ï¼Œå› ç‚ºdata binding æœ¬èº«æŒ‡çš„æ˜¯è¡Œç‚ºï¼Œè€Œä¸æ˜¯ç”¨ä¾†å½¢å®¹ç”¨çš„è©`

#ğŸ§  åœ¨å‰ç«¯é–‹ç™¼ä¸­ï¼Œdata model æ˜¯ä»€éº¼ï¼Ÿ->->-> `ç•¶å°ç•«é¢ä½¿ç”¨templateæŠ€è¡“è€Œåˆ‡åˆ†æˆæ¥­å‹™é‚è¼¯&è³‡æ–™ å’Œ UIæ™‚ï¼Œæ­¤æ™‚è² è²¬æ¥­å‹™é‚è¼¯&è³‡æ–™å°±æœƒæ˜¯Data Model`

#ğŸ§  Data flowï¼šè³‡æ–™ä¸€è®Šå‹•ï¼ŒUIå°±è·Ÿè‘—è³‡æ–™ä¸€èµ·è®Šå‹• æˆ–è€… UIä¸€è®Šå‹•ï¼Œè³‡æ–™å°±è·Ÿè‘—UIä¸€èµ·è®Šå‹• é€™å¥ä¸­çš„è³‡æ–™åœ¨MVCæœƒæ˜¯ä»€éº¼ï¼Ÿ->->-> `Data Model `

#ğŸ§  data flow & data binding ä¸»è¦æœ‰å…©ç¨®æ–¹å‘ï¼Œæ˜¯å“ªå…©ç¨®ï¼Ÿ ->->-> `æ–¹å‘1ï¼šè³‡æ–™ä¸€æ”¹è®Šï¼ŒUIå°±è·Ÿè‘—è³‡æ–™æ”¹è®Š / è³‡æ–™æ±ºå®šUIã€æ–¹å‘2ï¼šUIä¸€æ”¹è®Šï¼Œè³‡æ–™å°±è·Ÿè‘—UIæ”¹è®Š / UI æ±ºå®šè³‡æ–™`

#ğŸ§  æ¡†æ¶å®¹æ˜“å¯¦ç¾one-way data bindingï¼Œé‚£éº¼ä»£è¡¨ä»€éº¼æ„æ€ï¼Ÿ ->->-> `è©²æ¡†æ¶å®¹æ˜“å¯¦ç¾- æ–¹å‘1ï¼šè³‡æ–™ä¸€æ”¹è®Šï¼ŒUIå°±è·Ÿè‘—è³‡æ–™æ”¹è®Š / è³‡æ–™æ±ºå®šUI - æ–¹å‘2ï¼šUIä¸€æ”¹è®Šï¼Œè³‡æ–™å°±è·Ÿè‘—UIæ”¹è®Š / UI æ±ºå®šè³‡æ–™ä¸­çš„æ–¹å‘ä¹‹ä¸€`

#ğŸ§  æ¡†æ¶å®¹æ˜“å¯¦ç¾two-way data bindingï¼Œé‚£éº¼ä»£è¡¨ä»€éº¼æ„æ€ï¼Ÿ->->-> `è©²æ¡†æ¶å®¹æ˜“å¯¦ç¾- æ–¹å‘1ï¼šè³‡æ–™ä¸€æ”¹è®Šï¼ŒUIå°±è·Ÿè‘—è³‡æ–™æ”¹è®Š / è³‡æ–™æ±ºå®šUI - æ–¹å‘2ï¼šUIä¸€æ”¹è®Šï¼Œè³‡æ–™å°±è·Ÿè‘—UIæ”¹è®Š / UI æ±ºå®šè³‡æ–™`

#ğŸ§  UIä¸€æ”¹è®Šï¼Œè³‡æ–™å°±è·Ÿè‘—UIæ”¹è®Š / UI æ±ºå®šè³‡æ–™ï¼Œè«‹èˆ‰å‡ºæ¡ˆä¾‹ä¾†èªªæ˜ï¼Ÿ->->-> `ç¶å®šæ–¼ç‰¹å®šå…ƒä»¶ä¸‹ä¾†æ””æˆªè³‡æ–™ï¼Œå°±èƒ½ä»¥UIä¸€æ”¹è®Šå°±è·Ÿè‘—æ”¹è®Šè³‡æ–™çš„æ¡ˆä¾‹`

#ğŸ§  è³‡æ–™ä¸€æ”¹è®Šï¼ŒUIå°±è·Ÿè‘—è³‡æ–™æ”¹è®Š / è³‡æ–™æ±ºå®šUIï¼Œè«‹èˆ‰å‡ºæ¡ˆä¾‹ä¾†èªªæ˜ï¼Ÿ ->->-> `è—‰ç”±å®šç¾©Data Modelä»¥åŠæ­é…templateï¼Œå°±èƒ½å¾—åˆ°å°æ‡‰è³‡æ–™çš„UIï¼Œè€Œç•¶Data Modelä¸Šçš„è³‡æ–™è®Šå‹•æ™‚ï¼Œå°±æœƒè·Ÿè‘—æ”¹è®ŠUI`


---
Status: #ğŸŒ± 
Tags:
[[Rendering]]
Links:
References:
[[@reactThinkingReactReact]]
[[@mcgarnagleJavascriptWhatTwo]]
[[@youchuanhaoJianDanLiaoYiXiaOnewayData]]